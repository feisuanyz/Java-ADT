### 1. 新增资源实例

#### 1.1 新增分布式中间件资源

系统提供该功能，您可以新增分布式中间件资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

c）您需要预先添加分布式中间件资源加载项，具体可参见[《SoFlu社区版快速入门教程：4.9 如何加载资源》](https://gitee.com/feisuanyz/SoFlu-adp/blob/master/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E6%95%99%E7%A8%8B/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B.md)。

##### 1.1.1 操作步骤

a）进入平台“资源实例”功能模块，可以看到列表中预先加载的“分布式中间件”资源类型，选中该资源类型，单击“+”按钮，选择“新增资源实例”，如图1-1所示：

![1-1](https://www.feisuanyz.com/fsimage/zc-image/11-2_img.png)

##### 图1-1 资源实例页面

b）在“新增资源实例”页面，填写资源名称及描述，同时填写配置项信息，如图1-2所示：

![1-2](https://www.feisuanyz.com/fsimage/zc-image/zysl/fenbushi_1.png)

##### 图1-2 填写配置项信息

##### 说明：

##### a）分布式中间件配置项中的必填项包括：zkAddress、group、timeout、retries，分别用于表示ZK地址、dal组、超时时间和重试次数。

##### b）选填项包括：client、username、password，用于表示zkAddress的账户密码信息，当后台服务操作zkAddress相关内容时，若未获取到zkAddress账号密码，则会打印无权限操作日志信息。注意： 若要输入zkAddress的账号密码，需同时输入client、username、password的值，其中client的值固定为curator，若未设置密码则无需填写。

c）填写完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.2 新增嵌入式中间件资源

系统提供该功能，您可以资源实例管理中新增嵌入式中间件资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.2.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-3所示：

![1-3](https://www.feisuanyz.com/fsimage/zc-image/cz_11.2-1_img.png)

##### 图1-3 选择资源实例

b）单击“嵌入式中间件”后的“+”，选择“新增资源实例”，如图1-4所示：

![1-4](https://www.feisuanyz.com/fsimage/zc-image/cz_11.2-2_img.png)

##### 图1-4 新增资源实例

c）在“资源实例管理”页面，选择系统默认的环境，如图1-5所示：

![1-5](https://www.feisuanyz.com/fsimage/zc-image/cz_11.2-3_img.png)

##### 图1-5 选择系统默认的环境

d）请根据资源实例的实际信息，配置资源实例的配置项信息，如图1-6所示：

![1-6](https://www.feisuanyz.com/fsimage/zc-image/cz_11.2-4_img.png)

##### 图1-6 配置资源实例的配置项

##### 说明：本节是以配置嵌入式中间件为样例做说明，其他资源配置的配置项，请根据实际进行配置。目前嵌入式中间件必须配置的项包括：驱动类、连接地址、用户名、密码和初始化大小等。

e）单击“提交” --> 系统提示“新增成功”。

f）在“资源实例管理”页面，成功新增一个分布式中间件的资源实例，如图1-7所示：

![1-7](https://www.feisuanyz.com/fsimage/zc-image/cz_11.2-5_img.png)

##### 图1-7 新增分布式中间件

#### 1.3 新增SFTP存储资源

系统提供该功能，您可以资源实例管理中新增SFTP存储资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.3.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-8所示：

![1-8](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-8 选择资源实例

b）单击“SFTP存储”后的“+”，选择“新增资源实例”，如图1-9所示：

![1-9](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_02.png)

##### 图1-9 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-10所示：

![1-10](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_03.png)

##### 图1-10 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.4 新增Minio存储资源

系统提供该功能，您可以资源实例管理中新增Minio存储资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.4.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-11所示:

![1-11](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-11 选择资源实例

b）单击“Minio存储”后的“+”，选择“新增资源实例”，如图1-12所示：

![1-12](https://www.feisuanyz.com/fsimage/zc-image/cz_11_4_02.png)

##### 图1-12 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-13所示：

![1-13](https://www.feisuanyz.com/fsimage/zc-image/cz_11_4_03.png)

##### 图1-13 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.5 新增Xeos存储资源

系统提供该功能，您可以资源实例管理中新增Xeos存储资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.5.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-14所示：

![1-14](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-14 选择资源实例

b）单击“Xeos存储”后的“+”，选择“新增资源实例”，如图1-15所示：

![1-15](https://www.feisuanyz.com/fsimage/zc-image/cz_11_5_02.png)

##### 图1-15 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-16所示：

![1-16](https://www.feisuanyz.com/fsimage/zc-image/cz_11_5_03.png)

##### 图1-16 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.6 新增Kafka生产者资源

系统提供该功能，您可以资源实例管理中新增Kafka生产者资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.6.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-17所示：

![1-17](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-17 选择资源实例

b）单击“Kafka生产者”后的“+”，选择“新增资源实例”，如图1-18所示：

![1-18](https://www.feisuanyz.com/fsimage/zc-image/cz_11_6_02.png)

##### 图1-18 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-19所示：

![1-19](https://www.feisuanyz.com/fsimage/zc-image/cz_11_6_03.png)

##### 图1-19 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.7 新增Kafka消费者资源

系统提供该功能，您可以资源实例管理中新增Kafka消费者资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.7.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-20所示：

![1-20](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-20 选择资源实例

b）单击“Kafka消费者”后的“+”，选择“新增资源实例”，如图1-21所示：

![1-21](https://www.feisuanyz.com/fsimage/zc-image/cz_11_7_02.png)

##### 图1-21 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-22所示：

![1-22](https://www.feisuanyz.com/fsimage/zc-image/cz_11_7_03.png)

##### 图1-22 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.8 新增Redis缓存资源

系统提供该功能，您可以资源实例管理中新增Redis缓存资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.8.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-23所示：

![1-23](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-20 选择资源实例

b）单击“Redis缓存”后的“+”，选择“新增资源实例”，如图1-24所示：

![1-24](https://www.feisuanyz.com/fsimage/zc-image/cz_11_8_02.png)

##### 图1-24 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-25所示：

![1-25](https://www.feisuanyz.com/fsimage/zc-image/cz_11_8_03.png)

##### 图1-25 填写配置项信息

d）您也可以单击“示例”参考配置项信息，进入“资源实例示例”页面，示例包含“集群模式”、“云托管模式”、“单节点模式”、“哨兵模式”和“主从模式”五种，如图1-26、1-27所示：

![1-26](https://www.feisuanyz.com/fsimage/zc-image/cz_11_8_05.png)

##### 图1-26 单击示例

![1-27](https://www.feisuanyz.com/fsimage/zc-image/cz_11_8_04.png)

##### 图1-27 资源实例示例页面

##### 说明：选择好Redis缓存资源模式后，直接在该页面修改蓝色或绿色参数值，单击“复制”即可。

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.9 新增Http通信资源

系统提供该功能，您可以资源实例管理中新增Http通信资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

c）您需要提前在项目加载项添加Http组件加载项，添加项目加载项方式参见[《项目管理 第1.7节：添加项目加载项》](https://gitee.com/feisuanyz/SoFlu-adp/blob/master/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E6%95%99%E7%A8%8B/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/8.%20%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86.md#17-%E6%B7%BB%E5%8A%A0%E9%A1%B9%E7%9B%AE%E5%8A%A0%E8%BD%BD%E9%A1%B9)。

##### 1.9.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-28所示：

![1-28](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-28 选择资源实例

b）单击“Http通信”后的“+”，选择“新增资源实例”，如图1-29所示：

![1-29](https://www.feisuanyz.com/fsimage/zc-image/cz_11_9_02.png)

##### 图1-29 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-30所示：

![1-30](https://www.feisuanyz.com/fsimage/zc-image/cz_11_9_03.png)

##### 图1-30 配置配置项信息

##### 说明：Http通信资源的新增暂时可以不用强制填写配置项信息即可提交成功。

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.10 新增MongoDB数据库资源

系统提供该功能，您可以资源实例管理中新增MongoDB数据库资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.10.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-31所示：

![1-31](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-31 选择资源实例

b）单击“Redis缓存”后的“+”，选择“新增资源实例”，如图1-32所示：

![1-32](https://www.feisuanyz.com/fsimage/zc-image/cz_11_10_02.png)

##### 图1-32 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-33所示：

![1-33](https://www.feisuanyz.com/fsimage/zc-image/cz_11_10_03.png)

##### 图1-33 填写配置项信息

d）您也可以单击“示例”参考配置项信息，进入“资源实例示例”页面，示例包含“MongoBb单个地址配置”和“MongoBb多个地址配置”两种，如图1-34、1-35所示：

![1-34](https://www.feisuanyz.com/fsimage/zc-image/cz_11_10_05.png)

##### 图1-34 单击示例

![1-35](https://www.feisuanyz.com/fsimage/zc-image/cz_11_10_04.png)

##### 图1-35 资源实例示例页面

##### 说明：选择好MongoBb地址配置方式后，直接在该页面修改蓝色参数值，单击“复制”即可。

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.11 新增线程池资源

系统提供该功能，您可以资源实例管理中新增线程池资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.11.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-36所示：

![1-36](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-36 选择资源实例

b）单击“线程池”后的“+”，选择“新增资源实例”，如图1-37所示：

![1-37](https://www.feisuanyz.com/fsimage/zc-image/cz_11_11_02.png)

##### 图1-37 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-38所示：

![1-38](https://www.feisuanyz.com/fsimage/zc-image/cz_11_11_03.png)

##### 图1-38 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.12 新增Elasticsearch资源

系统提供该功能，您可以资源实例管理中新增Elasticsearch资源。

##### 前提条件

a）您需要拥有“资源实例”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 1.12.1 操作步骤

a）在项目管理页面中，选择“资源实例”，如图1-36所示：

![1-39](https://www.feisuanyz.com/fsimage/zc-image/cz_11_3_01.png)

##### 图1-39 选择资源实例

b）单击“Elasticsearch”后的“+”，选择“新增资源实例”，如图1-40所示：

![1-40](https://www.feisuanyz.com/fsimage/zc-image/cz_11_12_02.png)

##### 图1-40 新增资源实例

c）在“资源实例管理”页面，填写资源实例的名称和描述，选择系统默认的环境，根据资源实例的实际信息，配置资源实例的配置项信息，如图1-41所示：

![1-41](https://www.feisuanyz.com/fsimage/zc-image/cz_11_12_03.png)

##### 图1-41 配置配置项信息

d）配置完成后，单击“提交” --> 系统提示“新增成功”。

#### 1.13 新增数据库中间件资源

数据库中间件是分布式中间件和嵌入式中间件的结合体。用户可通过数据库中间件的checkDal配置来选择中间件类型，无须再单独添加分布式中间件或嵌入式中间件。本节主要介绍如何新增数据库中间件资源实例以及如何进行相关配置。

##### 1.13.1 操作步骤

a）单击项目卡片上的配置按钮，选择加载项，进入项目加载项页面，如图1-42所示：

![1-42](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_1.png)

##### 图1-42 选择加载项

b）在项目加载项页面，选择“资源”页签，如图1-43所示：

![1-43](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_2.png)

##### 图1-43 选择资源页签

c）找到“数据库中间件”资源，单击“添加”，如图1-44所示：

![1-44](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_3.png)

##### 图1-44 添加资源实例

d）单击“加载应用”，系统显示加载成功，如图1-45所示：

![1-45](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_4.png)

##### 图1-45 加载应用

e）再次单击项目卡片，进入平台模块功能界面，选择“资源实例”功能模块，您可以看到“数据库中间件”显示在列表中，如图1-46所示：

![1-46](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_5.png)

##### 图1-46 进入资源实例功能模块

f）选中并单击“数据库中间件”后的“+”，选择“新增资源实例”，如图1-47所示：

![1-47](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_6.png)

##### 图1-47 新增资源实例

g）进入新增资源实例页面，您可以开始进行相关配置，如图1-48所示：

![1-48](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_7.png)

##### 图1-48 新增资源实例页面

##### 说明：

##### a'）若您在chechDal配置项选择了“分布式中间件”，则只需要配置zkAddress和group即可，如图1-49所示；若您在chechDal配置项选择了“嵌入式中间件”，则只需要配置url、username、password即可，如图1-50、1-51所示。

##### b'）如图1-52所示，配置项中zkClient、zkUsername、zkPassword用于zkAdress账号信息的设置，当后台服务操作zkAddress相关内容时，若未获取到zkAddress的账号及密码信息，系统将会打印无权限操作的日志信息。需注意： 若需对zkAddress账号信息进行设置，则需要同时填写zkClient、zkUsername、zkPassword的值，其中zkClient的值固定为curator；若不用对zkAddress账号信息进行设置，则均无需填写。

![1-49](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_8.png)

##### 图1-49 分布式中间件配置

![1-50](https://www.feisuanyz.com/fsimage/zc-image/czzn_11_14_9.png)

##### 图1-50 嵌入式中间件配置1
