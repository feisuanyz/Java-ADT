### 1. 组件流程日志

#### 1.1 配置本地组件流程日志

通过本节，您可以在配置组管理activityLog配置日志存储的位置，然后在任意的流程节点组件中自定义配置需要记录的日志信息，在通过存储的日志位置去查看打印出的日志信息，方便定位问题。

##### 1.1.1 操作步骤

a）如图1-1所示。选择“配置组管理”，打开默认配置组` defaultGroup `页面，将` activityLog `配置项设置为

`{"storageType":"file","filePath":"/data/logs/${项目路径}/activityLog.txt"}`

![1-1](https://www.feisuanyz.com/fsimage/zc-image/cz_0001_img.png)

##### 图1-1 配置组管理页面

##### 说明：

a1）其中${项目路径}会被自动替换为当前项目的项目路径，同时您也可以自行设置该值，例如：若您将“filePath”设置为“/data/logs / ${项目编号}/ ${项目路径}/ ${项目名称}/ activityLog.txt”，其中的 ${项目名称}、 ${项目编号}也会被替换为当前项目的项目名称和项目编号。注意：当前的自行设置仅限于 ${项目名称}、 ${项目编号}、 ${项目路径}三个变量。

a2）若配置项中的“storageType“，即存储类型，设置为除file、elasticsearch、mongodb、customized这四种类型以外的值时，系统将默认使用本地文件存储的方式来存储组件的流程日志，这时的文件路径就是{"storageType":"file","filePath":"/data/logs/ ${项目路径}/activityLog.txt"}。

a3）若未找到activityLog配置项，您需要单击“同步”来显示。

b）开发环境配置完成后，单击“提交”。

c）选择“接口管理”，新增一个接口。

d）接着您就可以在流程图中自定义组件的流程日志了，通过生成的日志可以方便您定位开发中可能会出现的问题。

e）选中您需要添加流程日志的组件，单击“流程日志”页签，如图1-2所示：

![1-2](https://www.feisuanyz.com/fsimage/zc-image/cz_0002_img.png)

##### 图1-2 单击“流程日志”标签

f）启用日志，根据实际项目需求选择日志级别：调试、追踪、信息、错误、警告、致命，如图1-3所示：

![1-3](https://www.feisuanyz.com/fsimage/zc-image/cz_0003_img.png)

##### 图1-3 选择日志级别

g）录入日志内容，您也可以添加自定义信息。

h）流程图绘制完成后，单击“保存并退出”，提交发布该接口。

i）执行测试用例成功后，在配置组管理` activityLog `键中配置日志路径会自动生成` activityLog `日志文件。

##### 说明：配置的activityLog文件只有下载项目部署包到自己服务器才生效，才可以查看日志文件，activityLog日志文件默认存到当前部署包目录下面。例如：部署包为feisuanyz-engine-3.0.12，则日志生成路径是feisuanyz-engine-3.0.12/data/logs/activityLog.txt

#### 1.2 配置Elasticsearch或MongoDB组件流程日志

通过本节，您可以了解到如何使用Elasticsearch或MongoDB存储器来存储组件流程日志，Elasticsearch和MongoDB存储器是平台默认可以实现的。

##### 1.2.1 操作步骤

a）单击项目卡片上的设置按钮，选择“加载项”，如图1-4所示：

![1-4](https://www.feisuanyz.com/fsimage/zc-image/cz_0004_img.png)

##### 图1-4 单击设置按钮

b）选择“资源”页签，您可以根据实际项目需要将“Elasticsearch”或“MongoDB数据库”资源加载到项目，如图1-5所示：

![1-5](https://www.feisuanyz.com/fsimage/zc-image/cz_0005_img.png)

##### 图1-5 选择资源标签

c）选择“资源实例”模块，单击“Elasticsearch”或“MongoDB数据库”，单击“添加”新增资源实例，此处我们以Elasticsearch为例，如图1-6所示：

![1-6](https://www.feisuanyz.com/fsimage/zc-image/cz_0006_img.png)

##### 图1-6 添加实例

d）配置资源实例信息，配置完成后单击“提交”按钮，如图1-7所示：

![1-7](https://www.feisuanyz.com/fsimage/zc-image/cz_0007_img.png)

##### 图1-7 配置资源实例信息

e）接着选择“配置组管理”模块，打开默认配置组` defaultGroup `页面，将` activityLog `配置项设置为

```
{"storageType":"elasticsearch","resourceName":"资源实例名称","indexType":"log","indexName":"例如：activityLog"}
```

##### 说明：

e1）若未找到activityLog配置项，您需要单击“同步”服务器activityLog配置项。

e2）若您选择MongoDB存储器方式存储， 配置项填写格式为`{"storageType":"mongodb","resourceName":"资源实例名称","collectionName":"表名，例如：activityLog"}`

如图1-8所示：

![1-8](https://www.feisuanyz.com/fsimage/zc-image/cz_0011_img.png)

##### 图1-8 配置组管理设置
