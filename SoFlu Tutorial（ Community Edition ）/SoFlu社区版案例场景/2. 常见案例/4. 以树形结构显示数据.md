### 4. 以树形结构显示数据

#### 4.1 以树形结构显示数据

树形结构指的是数据元素之间存在着“一对多”的树形关系的数据结构。本节实例将以常见的试卷选择题（一个题目存在多个选项）作为示例，讲述如何利用全自动开发平台来实现以树形结构展示数据。

##### 4.1.1 效果展示

![4-1](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_2-1.png)

##### 图4-1 效果展示1

![4-2](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_2-2.png)

##### 图4-2 效果展示2

以上仅为后端程序数据展示，用户可自行设计前端Web页面，将后端程序与前端Web页面进行联调，以实现更加美观的展示方式。

##### 4.1.2 准备工作

需提前准备功能实现过程中用到的两张数据表：题目表 title（用来存储题目信息）、选项表option（用来存储选项信息），表结构设计及相关数据如图4-3、图4-4所示：

题目表 title：

```
CREATE TABLE `title` (
  `title_id` varchar(24) NOT NULL COMMENT '题目编号',
  `title_context` varchar(255) DEFAULT NULL COMMENT '题目内容',
  PRIMARY KEY (`title_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT '题目表';
```
![4-3](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_3-1.png)

##### 图4-3 题目表展示

选项表 option：

```
CREATE TABLE `option` (
  `option_id` varchar(255) NOT NULL COMMENT '选项编号',
  `option_context` varchar(255) DEFAULT NULL COMMENT '选项内容',
  `title_id` varchar(255) DEFAULT NULL COMMENT '标题编号',
  PRIMARY KEY (`option_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT '选项表';
```

![4-4](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_3-2.png)

##### 图4-4 选项表展示

##### 4.1.3 流程图设计概览

![4-5](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_4-1.png)

##### 图4-5 流程图

逻辑描述：

a）在【题目表】查询题目信息（SQL语句需确定父子级关系）。

b）在【选项表】查询选项信息（SQL语句需确定父子级关系）。

c）将前面两个单SQL组件查询出来的数据合并为一个List。

d）使用获取树形结构函数实现功能。

e）输出树型结构拼接完成的信息。

##### 4.1.4 技术要点说明

实现本实例（以树形结构显示数据）的关键在于使用全自动开发平台中的自定义函数-获取树形结构函数getBuildTree，该函数适用于确定了父子级关系的List集合数据中，即：若需使用该函数，需先准备好已确定父子级关系的List集合数据。本实例采用合并两份分别确定了父子级关系的SQL查询记录为一个List集合数据的方式来准备。

##### 函数说明：获取树形结构函数 List getBuildTree(String parentIdName,String childIdName,List valueList,String childItemName)，如图4-6所示：

![4-6](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_5-1.png)

##### 图4-6 参数描述

##### 4.1.5 操作步骤

a）新增树形结构接口

a1）进入全自动开发平台“接口管理”功能模块，新增接口模块并新增一个接口，填写接口的基本信息，如图4-7所示：

![4-7](https://www.feisuanyz.com/fsimage/alcj-image/treestructure/tree_6-2.png)

##### 图4-7 新增接口
