### 5. 生成操作日志

#### 5.1 生成操作日志

操作日志在每个系统中都是必不可少的，用户在系统中进行每一项操作时，都会调用生成操作日志的程序实时生成对应的操作日志。根据这样的功能特性，可以很好地借助全自动开发平台中的子流程来实现，子流程中专门放置生成操作日志的程序，这样在进行每一项操作时，都会调用该子流程达到生成对应操作日志的效果。下文将为您介绍利用全自动开发平台实现生成操作日志功能的具体操作过程。

##### 5.1.1 效果展示

生成操作日志功能效果：通过执行测试接口，调用生成操作日志子流程，即可实现在数据库中保存用户操作记录，如图5-1所示，本实例仅针对后端程序开发，若与前端页面进行联调，即可实现如图5-2所示的效果。

![5-1](https://www.feisuanyz.com/fsimage/alcj-image/systemlog/2_1.png)

##### 图5-1 用户操作日志表记录

![5-2](https://www.feisuanyz.com/fsimage/alcj-image/systemlog/2_2.png)

##### 图5-2 前端页面效果

##### 5.1.2 准备工作

在数据库中准备一张数据表：用户操作日志表sy_log（用于存储用户操作的日志记录），表结构设计及相关数据如下图所示。

用户操作日志表sy_log：

```
CREATE TABLE `sy_log` (
  `auto_id` varchar(24) NOT NULL COMMENT '日志编号',
  `content` varchar(100) DEFAULT NULL COMMENT '内容',
  `log_type` varchar(50) DEFAULT NULL COMMENT '日志类型(1增加2删除3修改4查询5导出6清除历史数据7备份数据库8登录系统9退出系统)',
  `log_time` datetime DEFAULT NULL COMMENT '操作时间',
  `user_id` varchar(24) DEFAULT NULL COMMENT '用户账户',
  `from_ip` varchar(15) DEFAULT NULL COMMENT '来源ip',
  PRIMARY KEY (`auto_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户操作日志';
```
