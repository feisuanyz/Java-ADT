### 3. 实现商家APP下单调起微信支付功能

#### 3.1 实现商家APP下单调起微信支付功能

微信支付是我们日常生活中一种常见的支付方式，拥有自主APP的商家为了满足顾客的多重支付方式需求，通常会考虑接入微信支付功能。本节实例将以展示利用全自动开发平台实现商家APP下单调起微信支付功能作为示例来介绍全自动开发平台的使用，实例主要用到了全自动开发平台中的单函数组件、HTTP组件、互斥条件组件。通过拖拽方式绘制流程图并进行参数配置等同于编写复杂代码的业务逻辑，业务逻辑可视化展示，相对于写代码，用户可以更加轻松地进行功能实现。

##### 3.1.1 效果展示

执行设计好的调起微信支付功能接口，接口将返回前端调起微信支付页面所需的相关参数，如图3-1所示：

![3-1](https://www.feisuanyz.com/fsimage/alcj-image/wechatpay/wcpay_2-1.png)

##### 图3-1 响应内容页面

##### 注意：本实例仅针对后端程序开发，若与前端程序联合使用，可展示更加明显的效果，即可看到微信支付页面。

##### 3.1.2 准备工作

a）若您想要实际完成APP下单调起微信支付的功能，您需要提前注册微信支付商户号，如图3-1所示。注册好商户号后，进行下载并配置商户证书的操作，获取证书序列号及相应的证书存放路径，如图3-2所示。这三个参数（商户号、证书序列号、证书存放路径）将在接下来的开发过程中用到。

注册地址：https://pay.weixin.qq.com/index.php/apply/applyment_home/guide_normal

下载并配置商户证书指引地址：https://pay.weixin.qq.com/wiki/doc/apiv3/open/pay/chapter2_5_1.shtml

![3-2](https://www.feisuanyz.com/fsimage/alcj-image/wechatpay/wcpay_3-1.png)

##### 图3-2 注册微信支付商户号

![3-3](https://www.feisuanyz.com/fsimage/alcj-image/wechatpay/wcpay_3-2.png)

##### 图3-3 下载并配置商户证书

b）本实例功能的实现包含两个过程：APP下单和APP调起支付。您可以分别于微信支付APP下单和APP调起支付的API文档，查看相应请求参数的具体说明，如图3-4、3-5所示：

APP下单API文档地址：https://pay.weixin.qq.com/wiki/doc/apiv3/apis/chapter3_2_1.shtml
