### 2. 工具组件

#### 2.3 子流程批处理组件的使用

##### 2.3.1 子流程批处理组件

系统提供该功能，您可以在系统中利用子流程批处理组件进行可视化开发。

##### 2.3.2 前提条件

a）您需要拥有“流程编辑器”功能的权限。

b）您需要在子流程管理模块建有所需的子流程。

c）权限由系统管理员在“用户权限中心”系统中配置。

##### 2.3.3 操作步骤

a）在窗体视图左侧的“组件列表”中“工具”栏目下，找到子流程批处理组件，拖拽至绘图面板，如图3-1所示：

![3-1](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_1.png)

##### 图3-1 找到子流程批处理组件

b）拖拽所需的其他组件至绘图面板，连接好组件的流程图，如图3-2所示：

![3-2](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_2.png)

##### 图3-2 连接组件流程图

##### 说明：此处我们选择了一个单SQL组件和一个输出结果组件作为样例，用于列表查询数据库中的记录。

c）选中子流程批处理组件，根据项目需求填写子流程批处理组件的名称和描述，如图3-3所示：

![3-3](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_3.png)

##### 图3-3 填写子流程批处理组件的基本信息

d）单击”资源实例“处的选择记录方框，选择已连好的线程池资源，如图3-4、3-5所示：

![3-4](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_4.png)

##### 图3-4 选择子流程名称

![3-5](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_5.png)

##### 图3-5 示例

e）单击“子流程名称”处的选择记录方框，选择已建好的子流程，如图3-6、3-7所示：

![3-6](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_6.png)

##### 图3-6 选择子流程名称

![3-7](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_7.png)

##### 图3-7 示例

##### 说明：此处我们选择了往数据库插入一条记录的子流程，子流程批处理组件的使用可以实现向数据库中同时插入多条记录。

f）单击“子流程入参列表”处的录入参数方框，选择一个对应子流程入参的列表对象，如图3-8、3-9所示：

![3-8](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_8.png)

##### 图3-8 设置子流程入参列表

![3-9](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_9.png)

##### 图3-9 选择列表对象

##### 说明：列表对象可以是一个函数的执行结果、一个输入的表达式或者配置的入口参数等，可根据项目需求自行设置。此示例通过配置入口参数来设置入参列表，如图3-10所示：

![3-10](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_7_10.png)

##### 图3-10 示例
