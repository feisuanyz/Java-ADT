### 2. 工具组件

#### 2.4 子流程组件的使用

##### 2.4.1 子流程组件

系统提供该功能，您可以在系统中利用子流程组件进行可视化开发。

##### 2.4.2 前提条件

a）您需要拥有“流程编辑器”功能的权限。

b）您需要在子流程管理模块建有所需的子流程。

c）权限由系统管理员在“用户权限中心”系统中配置。

##### 2.4.3 操作步骤

a）在窗体视图左侧的“组件列表”中“工具”栏目下，找到子流程组件，拖拽至绘图面板，如图4-1所示：

![4-1](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_1.png)

##### 图4-1 找到子流程组件

b）拖拽所需的其他组件至绘图面板，连接好组件的流程图，如图4-2所示：

![4-2](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_2.png)

##### 图4-2 连接组件流程图

##### 说明：此处我们选择了一个单SQL组件和一个输出结果组件作为样例，用于列表查询数据库中的记录。

c）选中子流程组件，根据项目需求填写子流程组件的名称和描述，如图4-3所示：

![4-3](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_3.png)

##### 图4-3 填写子流程组件的基本信息

d）单击”子流程名称“处的选择记录方框，选择已建好的子流程，如图4-4、4-5所示：

![4-4](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_4.png)

##### 图4-4 选择子流程名称

![4-5](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_10.png)

##### 图4-5 示例

##### 说明：此处我们选择了往数据库插入一条记录的子流程。

e）单击“入参映射”的未选中记录方框，配置子流程的入口参数值，如图4-6、4-7所示：

![4-6](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_5.png)

##### 图4-6 配置入口参数值

![4-7](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_6.png)

##### 图4-7 示例

##### 说明：若您建的子流程未设置入口参数，也可以不用配置入口参数值。

f）若您需要将选择的子流程异步执行，也可以打开异步执行的按钮，同时配置线程池资源，如图4-8所示：

![4-8](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_7.png)

##### 图4-8 异步执行或配置线程池资源

##### 说明：将子流程组件设置为异步执行后，子流程和主流程依然都会执行，只是主流程不需要等待子流程的执行结果后再执行。

g）配置单SQL组件。

##### 说明：除子流程组件外，您可以根据项目需求自行选择组件自行配置，此处我们仅用单SQL组件作为示例，并设置了列表查询的SQL信息，如图4-9所示：

![4-9](https://www.feisuanyz.com/fsimage/zc-image/cz_22_1_6_8.png)

##### 图4-9 示例

h）配置输出结果组件。
