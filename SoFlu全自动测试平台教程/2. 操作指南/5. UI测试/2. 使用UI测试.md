### 2. 操作指南

#### 2.3 测试用例

##### 2.3.5 UI测试

##### 2.3.5.2 使用UI测试

UI自动化测试功能，即通过模拟用户手动操作UI界面，以脚本的形式实现自动操作和验证的一种自动化测试手段，支持对功能进行冒烟和回归测试，提升测试效率，保证测试质量。本节为您介绍如何在全自动测试平台使用UI自动化测试功能。

##### 2.3.5.2.1 前提条件

a）您已配置好UI环境，具体操作请参见《全自动测试平台教程操作指南第2.5.1节：配置UI环境》。

b）您已创建测试类型为UI测试的测试用例，如下图所示，关于如何创建测试用例，您可以参考《SoFlu全自动测试平台教程操作指南第2.3.1.1节：新增测试用例》部分。

![image](https://user-images.githubusercontent.com/79617492/190989825-2d7748b7-d9ce-44b4-b18a-775dc9acd110.png)

##### 2.3.5.2.2 步骤指引

使用UI自动化测试功能主要分为以下几步：

a）设置UI测试执行属性

b）创建UI测试动态参数

c）添加操作步骤

d）填写元素定位及相关参数

e）执行UI测试脚本

f）查看UI测试执行报告

##### 说明：“设置UI测试执行属性”和“创建UI测试动态参数”步骤根据您的实际需要，在执行UI测试脚本前进行即可。

##### 2.3.5.2.2.1 设置UI测试执行属性

a）进入UI测试功能模块，在左侧用例列表选中需执行UI测试的测试用例，您便可以在右侧页面对当前测试用例进行UI测试的所有配置。

![image](https://user-images.githubusercontent.com/79617492/190989858-8e0c1f98-d0ba-4de1-bb1e-f7c11bb24028.png)

##### 图2-2 进入UI测试功能模块

b）单击设置选项，系统弹出设置界面，此时您可以设置UI测试相关的执行属性，设置完成后，单击确定即可。

![image](https://user-images.githubusercontent.com/79617492/190989880-586a1b54-4fe2-4709-8de1-e99287468a56.png)

##### 图2-3 设置UI测试相关的执行属性

##### 说明：

##### b1）页面加载超时时间：表示若页面加载时间超过设置的超时时间，当前步骤将执行失败。

##### b2）截图设置：您可以选择对UI测试的执行过程进行截图，若不需要进行截图，选择“不截图”即可；若需要截图，则选择“自动截图”或者“失败截图”，其中“自动截图”表示无论步骤执行状态成功与否，每一个步骤都会截图，“失败截图”表示当步骤执行状态失败时进行截图。

##### b3）窗口最大化：选择“是”，则打开浏览器时，窗口将最大化显示。

##### b4）步骤失败：选择“继续”表示即使当前步骤失败仍会继续执行剩余步骤；选择“暂停”表示当前步骤失败，会立即停止执行整个测试。

##### b5）无头模式： 即HeadLess，在执行脚本时不显示浏览器界面，在后台运行。

##### b6）选择浏览器类型：UI测试可选的执行浏览器类型有Chrome、Firefox、IE、Edge，系统默认支持Chrome99版本、Firefox68以上版本、Edge103版本，IE无headless模式，不支持linux环境；若系统默认支持的浏览器版本与您当前浏览器版本不一致，则需要在对应浏览器官网下载您当前浏览器版本的驱动包，然后在节点引擎服务包driver文件夹中替换掉对应浏览器版本的驱动包即可。

##### 2.3.5.2.2.2 创建UI测试动态参数

a）将鼠标悬停在更多图标上，选择参数管理。

![image](https://user-images.githubusercontent.com/79617492/190989900-1b289687-d437-41e5-9808-a5229bec1bca.png)

##### 图2-4 选择参数管理

b）系统弹出参数管理页面，单击新增参数便可以创建动态参数。

![image](https://user-images.githubusercontent.com/79617492/190989911-4d378073-aa25-4a41-b77b-6993c7323217.png)

##### 图2-5 单击新增参数

c）您需要填写变量名称，选择变量类型，填写变量值，动态参数创建完成后，单击确定 > 关闭，退出参数管理页面即可。

![image](https://user-images.githubusercontent.com/79617492/190989924-22ffbdff-f338-4a1d-ba26-1f0d266860c0.png)

##### 图2-6 填写变量相关信息

##### 注意：当前配置的参数变量仅限当前用例可用，其它用例不可引用；在当前用例中引用的格式为${变量名}；若多处变量名相同时，变量优先级别为“步骤内设置的变量 > 参数管理处变量 > 全局变量”。

##### 2.3.5.2.2.3 添加操作步骤

a）单击新增步骤。

![image](https://user-images.githubusercontent.com/79617492/190990208-82055ad7-b56e-43f1-8ac8-ffd6d05226f2.png)

##### 图2-7 单击新增步骤

b）系统显示添加步骤窗口，根据您进行UI测试的实际需要添加步骤，添加完成后关闭窗口即可。

![image](https://user-images.githubusercontent.com/79617492/190990221-2518d6f1-6ea3-4878-ba12-1b19ab029993.png)

##### 图2-8 添加步骤

##### 说明：图2-9示例为自动登录飞算云智官网用例，添加步骤为“打开链接 > 输入账号 > 输入密码 > 单击登录 > 等待指定时间 > 关闭浏览器”。

![image](https://user-images.githubusercontent.com/79617492/190990234-f115a2e9-501b-42a6-b66e-e052b8148f5d.png)

##### 图2-9 自动登录飞算云智官网用例

##### 2.3.5.2.2.4 填写元素定位及相关参数

a）打开网页，鼠标移动到需要定位的元素上，右键单击选择“检查”，浏览器会弹出控制台并自动定位到该元素的位置。

![image](https://user-images.githubusercontent.com/79617492/190990256-63b99cb8-ae10-40cf-8d5d-bdb1b22c23cf.png)

##### 图2-10 右键单击选择“检查”

b）鼠标放在Elements控制台下，右击该元素，选择Copy > Copy XPath。

![image](https://user-images.githubusercontent.com/79617492/190990277-d14eef42-6a3f-4fcf-8382-b1f89bbdb092.png)

##### 图2-11 右击元素，选择Copy > Copy XPath

##### 说明：若右击该元素无效，您可以点击该元素列左侧三个点图标来复制元素定位信息。

c）回到UI测试脚本管理页面，在输入步骤的元素定位框中粘贴即可，其它元素定位方式同理。

![image](https://user-images.githubusercontent.com/79617492/190990306-567bc024-7253-4f4e-8a01-f21f4afc1083.png)

##### 图2-12 在输入步骤的元素定位框中粘贴

##### 说明：

##### c1）元素定位：即通过定位方式寻找元素在页面上的位置，支持填写id、name、xpath、link_text、tag_name、class_name、css_selector，填写格式为“定位方式=定位方法”，如id=123或xpath=//button，若未指定定位方式，默认使用XPath方式定位。

##### c2）当前脚本逻辑：打开飞算云智官网 > 输入账号 > 输入密码 > 单击登录 > 等待5秒 > 关闭浏览器。

d）填写操作步骤的参数、备注等信息，填写完成后，单击保存即保存当前UI测试所有配置内容。

##### 2.3.5.2.2.5 执行UI测试脚本

a）选择UI环境后，单击执行即开始执行UI测试脚本。

![image](https://user-images.githubusercontent.com/79617492/190990328-84cb5649-7196-477e-8c59-cf476ffcf590.png)

##### 图2-13 开始执行UI测试脚本

##### 2.3.5.2.2.6 查看UI测试执行报告

a）稍等几分钟后，将鼠标悬停至更多图标处，选择“执行报告”。

![image](https://user-images.githubusercontent.com/79617492/190990348-46d3ef85-8208-41b5-9f2b-478627bb3bc5.png)

##### 图2-14 选择“执行报告”

b）系统弹出执行报告列表页，选择刚刚执行的UI测试，单击详情即可查看报告的详细内容。

![image](https://user-images.githubusercontent.com/79617492/190990363-15ad3b41-b70c-48b8-b485-3c6427298c05.png)

##### 图2-15 单击详情

![image](https://user-images.githubusercontent.com/79617492/190990381-0c368194-5587-4aaf-bda2-a81e7932a4bc.png)

##### 图2-16 查看报告的详细内容
