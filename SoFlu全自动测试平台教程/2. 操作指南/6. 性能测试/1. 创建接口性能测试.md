### 2. 操作指南

#### 2.3 测试用例

##### 2.3.6 性能测试

##### 2.3.6.1 创建接口性能测试

接口性能测试是对接口功能进行的性能测试，即通过并发多条接口测试用例模拟多个用户调用同个接口来检测接口的负载能力、响应数据等。本节为您介绍如何创建接口性能测试。

##### 2.3.6.1.1 前提条件

a）存在可用的环境配置，具体操作可参考《SoFlu全自动测试平台教程操作指南第2.1.9节：新增环境配置》；

b）存在可用的资源池，具体操作可参考《SoFlu全自动测试平台教程操作指南第2.2.2.1.2节：新增资源池》；

c）存在已绑定测试场景的接口测试用例，具体操作可参考《SoFlu全自动测试平台教程操作指南第2.3.1.1节：新增测试用例》和《SoFlu全自动测试平台教程操作指南第2.4.1.1节：新建测试场景》；

d）已配置好可用的AccessKey参数，具体操作请参见文档《SoFlu全自动测试平台教程操作指南第2.1.6节：配置AccessKey》。

##### 2.3.6.1.2 操作步骤

a）进入全自动测试平台，单击“性能测试 > 性能测试管理 > 新增性能测试”开始创建接口性能测试。

![image](https://user-images.githubusercontent.com/79617492/190990705-204eb34e-7c83-4a16-b323-2e880bbbc4bf.png)

##### 图1-1 开始创建接口性能测试

b）系统弹出新增接口测试页面，您需要填写接口测试的基本信息，并设置超时时间。

![image](https://user-images.githubusercontent.com/79617492/190990716-8fd07ba2-f85e-4fb1-826b-204ce2d0462a.png)

##### 图1-2 填写接口测试的基本信息

##### 说明：

##### b1）超时时间：表示若在设置的超时时间内，性能测试还未执行完成，则该性能测试就会因超时而执行失败；若未设置超时时间，则性能测试不会因时间限制而执行失败；

##### b2）设置超时时间时，系统会检验AccessKey是否填写，若未填写，用户需使用主账号在系统设置中配置好AccessKey后再进行相关操作，关于如何配置AccessKey可参见文档”操作指南 > 系统配置 > 配置prometheus地址和accesskey” 。

c）系统弹出选择测试用例页面，勾选需关联的测试用例，单击确定。

![image](https://user-images.githubusercontent.com/79617492/190990733-bd8a1b38-5683-4f1e-98eb-9566535fdb29.png)

##### 图1-3 勾选需关联的测试用例

d）展开测试用例，您可以配置当前性能测试的并发用户数、并发模式以及并发分配策略，配置完成后单击保存即创建完成。

![image](https://user-images.githubusercontent.com/79617492/190990751-0007ee87-5f87-463f-9813-4f66c1d58c38.png)

##### 图1-4 配置当前性能测试的相关信息

##### 说明：

##### d1）“按循环次数”表示循环测试用例多少次，“按持续时间”表示进行多久时长的性能测试。

##### d2）“在多少秒内增加并发用户”：表示在设置的时间内完成所有并发用户数的请求。

##### d3）“自动分配”：表示系统自动将并发用户数均匀分配给资源池下的所有资源。

##### d4）“固定资源”：表示当分配的资源池存在多个资源，可以将所有并发用户数固定分配给该资源池下某一指定资源。

##### d5）“自定义”：即可以自定义设置占比，将并发用户数按照占比分配到各资源。

##### 通过设置并发分配策略，可以合理利用资源，同时还可以测试不同资源的情况，最终在所有资源中进行性能测试的情况都会在测试报告中体现。
