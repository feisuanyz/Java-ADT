### 3. 测试追踪

#### 3.4 缺陷管理

##### 3.4.1 基础概述

a）为有效管理测试用例中出现的问题，全自动测试平台集成了缺陷管理平台——禅道，并专门设置了缺陷管理的功能。

b）用户可以通过自定义字段创建自己的缺陷模板，并在新增/修改项目时绑定缺陷模板以及对应的禅道项目ID。

c）创建缺陷后，用户进行提交缺陷的操作，对应的缺陷将自动推送到禅道系统上；用户可以在禅道系统上对缺陷进行管理，当缺陷信息或者状态发生改变后，用户可以在全自动测试平台执行同步缺陷信息的操作以了解缺陷最新的信息和状态。

##### 3.4.2 集成缺陷管理平台

全自动测试平台支持集成禅道，通过调用禅道提供的接口，传入相应的参数，在全自动测试平台提交缺陷后，该缺陷会自动推送到禅道上，这样便可以实现在禅道上进行缺陷管理。本节将为您介绍如何集成缺陷管理平台——禅道。

##### 3.4.2.1 前提条件

a）需要在[禅道官网](https://www.zentao.net/index.html)下载并安装好开源版禅道系统。

b）版本需为开源版12.5.3以上。

##### 3.4.2.2 操作步骤

a）在禅道安装目录/xampp/zentao/config/下，找到my.php文件，添加内容“$config->features->apiGetModel = true;”，如图1-1所示：

##### 说明：若没有找到my.php文件，在/xampp/zentao/config/目录下自行创建一个即可。

![1-1](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_1.png)

##### 图1-1 修改my.php文件

b）使用系统管理员账号登录禅道系统，单击页面上方“组织 > 权限”，进入权限分组页面，如图1-2所示：

![1-2](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_2.png)

##### 图1-2 禅道权限分组页面

c）选择管理员分组，单击“权限维护”选项，进入管理员所有权限页面，如图1-3所示：

![1-3](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_3.png)

##### 图1-3 管理员所有权限页面

d）下拉页面，找到API接口行，勾选“超级model调用接口”，如图1-4所示：

![1-4](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_4.png)

##### 图1-4 勾选超级model调用接口

e）再次下拉页面到底部，单击“保存”即可，如图1-5所示：

![1-5](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_5.png)

##### 图1-5 保存权限设置

f）进入全自动测试平台，单击页面右上角系统设置按钮，进入系统设置页面，如图1-6所示：

![1-6](https://www.feisuanyz.com/fstest/cszz/bugmanage/bug_2_6.png)

##### 图1-6 系统设置页面

g）单击“服务 > 缺陷集成”，选择禅道，输入禅道的账号、密码以及地址信息。

h）输入完成后，单击“测试连接”。

i）系统提示连接成功，说明集成禅道成功，单击“保存”即可。
