### 4. 测试场景组件介绍

#### 4.7 配置器

##### 4.7.3 用户定义变量器

用户可以在用户定义变量器中自定义变量，可在测试场景中通过${变量名}引用该变量，获取该变量的值。本节主要介绍如何使用用户定义变量器。

##### 4.7.3.1 操作步骤

a）进入全自动测试平台的测试场景页面，选择已有测试场景的测试用例，选择接口，单击右侧的“+”键，单击配置器。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-1.png)

##### 图3-1 单击配置器

b）选择配置器，下拉框选择“用户定义变量器”。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-2.png)

##### 图3-2 选择“用户定义变量器”

c）单击新增变量，填写变量名name，选择变量类型为“常量”，输入变量值。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-3.png)

##### 图3-3 填写变量相关参数

##### 说明：变量类型支持常量、变量集、JMeter函数、Excel文件、SQL管理和Mock函数的，当前用“常量”举例，其它同理。

d）在接口需要引用变量的地方使用“${变量名}”来引用变量。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-4.png)

##### 图3-4 使用“${变量名}”来引用变量

e）单击上方的执行。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-5.png)

##### 图3-5 单击上方的执行

f）查看执行报告，字段值获取到变量中的值。

![输入图片说明](../../../images/SoFlu%E5%85%A8%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/4.%20%E6%B5%8B%E8%AF%95%E5%9C%BA%E6%99%AF%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/7.%20%E9%85%8D%E7%BD%AE%E5%99%A8/3-6.png)

##### 图3-6 查看执行报告

##### 说明：若用户定义变量器在根测试场景下添加，则根测试场景组下的接口都可以引用该变量；若用户定义变量器在子场景组下添加，则只有该子场景组下的接口可以引用该变量，其他场景组的接口不可用；若在对应的接口下添加，则仅限当前接口可用。
