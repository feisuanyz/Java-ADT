### 3. 应用使用指南

#### 3.3 页面管理

#### 3.3.20 绑定动作：响应结果处理

响应结果处理是指接口请求成功或者请求失败时，要执行的操作。可以将接口响应结果中某个字段的值赋值给其它变量，或者执行其他动作，如跳转页面、请求其它接口等。

#### 3.3.20.1 章节指引

a）接口响应成功处理

b）接口响应失败处理

#### 3.3.20.1.1 接口响应成功处理

##### 注意：只有HTTP状态码为200时，才会执行接口响应成功处理的动作。

a）选中“需要绑定动作的控件”，单击右侧属性栏中的属性 > 绑定动作, 选择需要绑定的动作事件。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-1.png)

##### 图20-1 选择需要绑定的动作事件

b）选择平台项目对应的接口后，根据实际情况配置接口信息，然后单击响应成功处理后的新增处理动作。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-2.png)

##### 图20-2 单击新增处理动作

c）填写判断条件后，选择需要执行的动作，然后单击绑定变量。

```
说明：

c1）判断条件： 响应字段是指这个接口请求成功后在响应信息中会显示的字段，如code=“000000”，msg=“成功”等字段和值。只有判断条件成功才会执行动作，失败则不做处理。

c2）执行动作：与内置动作用法一致，请参考《SoFlu（前端）全自动开发平台教程第3.3.17节：绑定动作:内置动作》。

c3）此处使用数据处理进行举例。
```

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-3.png)

##### 图20-3 单击绑定变量

d）选择响应数据后，输入需要使用的响应字段名，单击确定。

##### 说明：只有接口的响应结果处理中，绑定变量时，可以选择响应数据，输入响应字段名，可以返回该对象的响应数据，如data.url。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-4.png)

##### 图20-4 输入需要使用的响应字段名

#### 3.3.20.1.2 接口响应失败处理

```

说明：

d1）处理动作：是指接口请求成功或者请求失败时，要执行的操作，可以设置将接口响应结果中某个字段的值赋值给其它变量。

d2）响应成功处理：是指请求的接口HTTP状态码为200时，执行这个处理动作。

d3）响应失败处理：是指请求的接口HTTP状态码非200时，执行这个处理动作。这个动作的判断条件只能输入HTTP非200的状态码，如500,503等才会生效。

d4）响应成功处理和响应失败处理可以同时设置，程序会自动根据HTTP的状态码来执行对应的数据处理。
```

a）选中“需要绑定动作的控件”，单击右侧属性栏中的属性 > 绑定动作, 选择需要绑定的动作事件。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-5.png)

##### 图20-5 选择需要绑定的动作事件

b）选择平台项目对应的接口后，根据实际情况配置接口信息，然后单击响应失败处理后的新增处理动作。


```
说明：

b1）判断条件： 响应字段是指这个接口请求成功后在响应信息中会显示的字段，如code=“000000”，msg=“成功”等字段和值。只有判断条件成功才会执行动作，失败则不做处理。

b2）执行动作：与内置动作用法一致，请参考《SoFlu（前端）全自动开发平台教程第3.3.17节：绑定动作：内置动作》。
```

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-6.png)

##### 图20-6 单击新增处理动作

c）填写判断条件后，选择需要执行的动作并配置完成，然后单击确定。

##### 说明：判断条件：HTTP状态指接口返回时的状态码，当HTTP的状态码判断成功时，将会执行响应失败处理，判断失败则不执行。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/3.%20%E5%BA%94%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/3.%20%E9%A1%B5%E9%9D%A2%E7%AE%A1%E7%90%86/20-7.png)

##### 图20-7 选择需要执行的动作并配置完成
