### 4. 控件使用指南

#### 4.1 基础控件

#### 4.1.4 按钮

按钮控件用于触发某些特定事件，可嵌套在容器、表单等控件中使用，通常用于单击提交、保存、跳转等使用场景。触发按钮动作时，可设置请求加载中动画，防止按钮点击多次。

#### 4.1.4.1 基本属性

a）组件描述：可输入对控件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/217760973-ec52c024-83d8-43e0-832c-59fae460bacb.png)

##### 图4-1 组件描述

b）标题：可输入控件显示的标题，字符限制在20个字符以内。

![image](https://user-images.githubusercontent.com/79617492/217761012-33a092a1-d784-43a9-947e-ee0d1e7603e0.png)

##### 图4-2 标题

c）权限标识：可输入英文、数字、横线组成的权限标识。

![image](https://user-images.githubusercontent.com/79617492/217761034-723c065d-6662-45f0-a547-21ae5a7aeaa3.png)

##### 图4-3 权限标识

d）是否禁用：默认关闭，开启后控件无法使用。

![image](https://user-images.githubusercontent.com/79617492/217761054-8b8db35c-f28c-4315-a6c0-541ad21e0e22.png)

##### 图4-4 是否禁用

e）按钮类型：提供五种不同类型的按钮样式，分别是primary（主按钮）、dashed（虚线按钮）、danger（危险按钮）、link（链接按钮）以及default（次按钮）。

![image](https://user-images.githubusercontent.com/79617492/217761081-f5e6af7f-d72b-4159-a5d3-4f80765b88ef.png)
 
##### 图4-5 按钮类型

f）按钮尺寸：提供大、中、小三种尺寸选择。

![image](https://user-images.githubusercontent.com/79617492/217761114-4103dd24-b61b-45cf-b5bf-b05ae7090e31.png)

##### 图4-6 按钮尺寸

g）按钮形状：提供三种按钮形状，默认为无（长方形），也可选择圆形或椭圆形。

![image](https://user-images.githubusercontent.com/79617492/217761152-463848d2-1a02-401d-8aad-5e1fe07dd5dd.png)

##### 图4-7 按钮形状

h）图标：可在平台提供的图标库中选择按钮的图标，图标和标题一起显示在按钮控件中。

![image](https://user-images.githubusercontent.com/79617492/217761187-4d4df64f-a6bb-4d14-a4a1-54d110210f80.png)

##### 图4-8 图标

i）block：开启后当前按钮控件转换为块级元素，block元素会独占一行，多个block元素会各自新起一行。默认情况下，block元素宽度自动填满其父元素宽度。

![image](https://user-images.githubusercontent.com/79617492/217761216-62ff8f6c-4b8d-43b6-b7ea-1d0382e16d34.png)

##### 图4-9 block

j）ghost：等同于html中button的幽灵属性，开启后使按钮背景透明。

![image](https://user-images.githubusercontent.com/79617492/217761253-bb51d833-8305-468d-a5bd-a2bfd56b49bf.png)

##### 图4-10 ghost

k）默认开启加载中动画：开启后，预览页面时该按钮会默认显示加载中动画。

![image](https://user-images.githubusercontent.com/79617492/217761283-07595b7f-ea48-46f9-990d-e0f20c6ed064.png)

##### 图4-11 默认开启加载中动画

l）点击按钮开启加载中动画：开启后，当点击按钮时会出现加载中动画，需要设置固定加载时间或接口请求关闭动作搭配使用。若未开启此功能，固定加载时间和接口设置不生效。

![image](https://user-images.githubusercontent.com/79617492/217761305-efc5c3d6-65b6-4be5-b451-cb14208bf142.png)

##### 图4-12 开启加载中动画

m）固定加载时间：可设置按钮加载中的时间，单位为秒。

![image](https://user-images.githubusercontent.com/79617492/217761342-525ed66c-4992-4b9e-a856-747bd4fe239d.png)

##### 图4-13 固定加载时间

n）动作面板：支持绑定控件被点击的动作，当符合动作条件时会触发相应的动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至3.3.20节》绑定动作相关章节。

![image](https://user-images.githubusercontent.com/79617492/217761370-ab99d5a9-8df7-4f88-9418-d5a45ec7a56d.png)

##### 图4-14 动作面板

#### 4.1.4.2 操作案例

按钮加载中动画一般用于点击按钮触发动作时，动作的请求还没有响应结果时，可通过加载中的动画来表示正在请求中，加载中时不可再次点击，也可防止用户点击多次请求多次。下面将介绍如何通过静态或者动态根据接口来控制按钮显示和关闭加载中动画属性。

#### 4.1.4.2.1 静态开启/关闭加载中动画

##### 说明：前端页面固定显示加载中动画的时间，时间到了关闭加载中动画，无需和后端进行交互。

a）在“左侧控件库”拖出一个按钮控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/217761405-7028a8d3-2040-4458-9b38-d7500a4066b3.png)

##### 图4-15 拖出一个按钮控件到右侧画布

b）在“右侧导航栏”，单击开启 “点击按钮开启加载中动画”，根据需求设置固定加载时间。

![image](https://user-images.githubusercontent.com/79617492/217761431-a13a01df-e124-400f-b2e0-5de389365604.png)

##### 图4-16 根据需求设置固定加载时间

c）单击预览，在浏览器预览页面，单击按钮触发加载中动画，3秒后动画关闭。

![image](https://user-images.githubusercontent.com/79617492/217761460-0298ceb0-47b4-4a22-975c-8f9b5da6a499.png)

##### 图4-17 单击预览

#### 4.1.4.2.2 动态关闭加载中动画

##### 说明：前端页面默认点击按钮时会开启加载中动画的，然后根据后端接口响应结果进行判断关闭加载中动画。一般用于点击按钮后，需要等待后端接口请求结束之后才关闭加载中动画。关闭加载中动画的效果比静态模式更灵活一点。

a）在左侧页面工具栏单击后端项目 > 新建后端项目，关联平台或第三方项目。

![image](https://user-images.githubusercontent.com/79617492/217761490-97dee483-47c6-47ba-b904-68e627098201.png)

##### 图4-18 单击新建后端项目

b）在“左侧控件库”拖入一个按钮控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/217761508-07c3be15-42ea-4796-8d38-38f11da3b435.png)

##### 图4-19 拖入一个按钮控件到右侧画布

c）在“右侧属性栏”，单击开启 “点击按钮开启加载中动画”，然后单击绑定动作 > 当点击时。

![image](https://user-images.githubusercontent.com/79617492/217761543-4817785c-81bd-4180-bf4b-022a54811a68.png)

##### 图4-20 单击当点击时

d）单击平台项目，选择项目和对应接口，配置完相关参数后单击响应成功处理的 新增处理动作。在“新增处理”动作页面，配置判断条件，执行动作选择 “数据处理”， 左边绑定按钮控件，右边绑定响应数据输入“false”，配置完成后单击确定。

![image](https://user-images.githubusercontent.com/79617492/217761589-9a471428-b417-443e-9c52-faee26792027.png)

##### 图4-21 配置相关参数

e）单击预览，在浏览器预览页面，单击按钮触发加载中动画并执行接口，接口执行成功后关闭加载中动画。

![image](https://user-images.githubusercontent.com/79617492/217761615-0cb73d55-064c-488a-bb4d-a701b8059ad7.png)

##### 图4-22 单击预览

#### 4.1.4.2.3 动态开启和关闭加载中动画

##### 说明：前端不固定加载中动画什么时候显示和关闭，都是通过绑定的动作来判断，当开启加载中设置的变量为true时，显示加载中动画，如果为false，则会关闭加载中动画。一般用于自定义开启和关闭，比前面两种方式更灵活。

a）在左侧页面工具栏单击后端项目 > 新建后端项目，关联平台或第三方项目。

![image](https://user-images.githubusercontent.com/79617492/217761645-0c7efe05-1cda-4f09-8532-4891c87b8051.png)

##### 图4-23 单击新建后端项目

b）在“左侧控件库”拖入一个按钮控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/217761671-39c06514-7baa-4d95-b2d3-a229dd824e5e.png)

##### 图4-24 拖入一个按钮控件到右侧画布

c）单击上方变量设置 > 页面变量，配置页面变量“a”，无需赋值。

![image](https://user-images.githubusercontent.com/79617492/217761693-0834cd25-9444-4678-8414-81bd2a8b34e2.png)

##### 图4-25 单击页面变量

d）单击右侧属性栏中默认开启加载中动画旁的变量绑定按钮，单击页面变量 > 选择变量“a” > 确定。

![image](https://user-images.githubusercontent.com/79617492/217761723-c002a33e-edda-441d-95b2-65fe7b51e550.png)

##### 图4-26 单击选择变量“a”

e）选中按钮控件，单击右侧属性栏的绑定动作 > 当点击时。

![image](https://user-images.githubusercontent.com/79617492/217761747-3ba1dbec-2d93-4265-9d4e-c872264973c5.png)

##### 图4-27 单击当点击时

f）单击内置动作 > 数据处理 > 新增数据处理，左侧绑定页面变量“a”，右侧手动输入给变量“a”赋值为“true”。配置完成后单击确定。

##### 说明：当点击按钮时，触发这个数据处理动作，将变量a的值改为true，显示加载中动画。

![image](https://user-images.githubusercontent.com/79617492/217761777-02bdf6a2-850c-45e3-9be7-07f109d7c8a8.png)

##### 图4-28 触发数据处理动作

g）再次绑定控件的点击动作，单击平台项目，选择项目和对应接口，配置完相关参数后单击响应成功处理的 新增处理动作。

![image](https://user-images.githubusercontent.com/79617492/217761813-1598b7e7-3394-41e0-a6bf-a245c876947f.png)

##### 图4-29 单击响应成功处理的新增处理动作

h）在“新增处理”动作页面，配置判断条件，执行动作选择 “数据处理”， 左侧绑定页面变量“a”，右侧绑定变量选择手动输入“false”，配置完成后单击确定。

##### 说明：当点击按钮时，触发这个数据处理动作，将变量a的值改为false，关闭加载中动画。

![image](https://user-images.githubusercontent.com/79617492/217761836-26049060-6653-44bc-b902-ed011e3904ff.png)

##### 图4-30 配置判断条件

i）单击预览，在“浏览器预览页面”，单击按钮触发加载中动画并执行接口，接口执行成功后加载中动画关闭。

![image](https://user-images.githubusercontent.com/79617492/217761872-d6c94478-62c9-4a63-9617-314f718763ce.png)

##### 图4-31 单击按钮触发加载中动画并执行接口
