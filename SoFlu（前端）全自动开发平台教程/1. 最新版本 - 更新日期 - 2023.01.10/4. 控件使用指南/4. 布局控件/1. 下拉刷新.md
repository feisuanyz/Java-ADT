### 4. 控件使用指南

#### 4.4 布局控件

#### 4.4.1 下拉刷新

用于移动端提供页面下拉刷新的操作。可以自定义下拉时的样式，以及当下拉时动作绑定。

#### 4.4.1.1 基本属性

a）组件描述：可输入对控件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/218947934-2bffa2bf-10b6-45c8-8a6a-3730a5ee3867.png)

##### 图1-1 组件描述

b）下拉过程提示文案：下拉过程中提示的文案，默认为“下拉即可刷新”。

![image](https://user-images.githubusercontent.com/79617492/218947951-c6c7d8ab-e82f-46ac-bc00-047bfe1787bc.png)

##### 图1-2 下拉过程提示文案

c）释放过程提示文案：释放过程提示的文案，默认为“释放即可刷新”。

![image](https://user-images.githubusercontent.com/79617492/218947966-f89b995e-1058-4424-8879-bf1c3f56aa95.png)

##### 图1-3 释放过程提示文案

d）加载过程提示文案：加载过程提示的文案，默认为“加载中……”。

![image](https://user-images.githubusercontent.com/79617492/218950886-76c762d4-b425-4bc0-8662-238b1d2dda11.png)

##### 图1-4 加载过程提示文案

e）刷新完成提示文案：刷新完成提示的文案，默认为“刷新成功”。

![image](https://user-images.githubusercontent.com/79617492/218950905-579afc36-177d-4630-9a9c-68f97d824cd1.png)

##### 图1-5 刷新完成提示文案

f）刷新成功提示展示时长（ms）：刷新成功提示语展示的时长，默认为500ms。

![image](https://user-images.githubusercontent.com/79617492/218950930-c76135d4-7712-4e49-94ff-f241736be759.png)

##### 图1-6 刷新成功提示展示时长（ms）

g）返回顶部动画时长（ms）：返回顶部动画的时长，默认为300ms。

![image](https://user-images.githubusercontent.com/79617492/218950958-4215901a-76e9-4df1-bf5f-5fed70a15b62.png)

##### 图1-7 返回顶部动画时长（ms）

h）顶部内容高度（px）：顶部加载区域的高度，默认为50px。

![image](https://user-images.githubusercontent.com/79617492/218950976-b8b11fb4-afab-4988-9cf8-85eb88df98be.png)

##### 图1-8 顶部内容高度（px）

i）触发下拉刷新的距离（px）：触发刷新操作时距离顶部的距离（下拉距离），默认为50px。

![image](https://user-images.githubusercontent.com/79617492/218951000-5d335aff-76d5-4ca4-8370-a648e48c746b.png)

##### 图1-9 触发下拉刷新的距离（px）

j）禁用刷新：开启后禁用下拉刷新功能。

![image](https://user-images.githubusercontent.com/79617492/218951019-bfedcef7-e572-4bb3-b1cb-516d5bb03673.png)

##### 图1-10 禁用刷新

k）动作面板：支持绑定控件当下拉时的动作，当符合动作条件时会触发相应的动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至3.3.20节》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/218951044-450e8d95-3a93-4349-942c-7f98dc58f7a2.png)

##### 图1-11 动作面板

#### 4.4.1.2 操作案例

用于提供页面下拉刷新的操作。可以自定义下拉时的样式，以及当下拉时动作绑定。

#### 4.4.1.2.1 页面下拉刷新数据

前提条件：准备一个能返回列表数据的后端接口，数据格式参考如下：

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-12.png)

##### 图1-12 数据格式参考

a）从左侧控件库拖入一个下拉刷新控件，在下拉刷新控件中拖入一个需要展示数据的控件（此处以表格控件为例）。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-13.png)

##### 图1-13 拖入一个需要展示数据的控件

b）单击上方变量设置，新增一个页面变量“FromList”，用于存储表格数据。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-14.png)

##### 图1-14 新增一个页面变量“FromList”

c）选中表格控件，单击右侧属性栏数据源旁的变量绑定按钮，在变量绑定页面，选择页面变量 > FromList，给表格赋值。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-15.png)

##### 图1-15 选择FromList

d）选中下拉刷新控件，单击右侧属性栏绑定动作 > 当下拉时。在绑定动作页面，选择对应的项目和接口，填写请求参数。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-16.png)

##### 图1-16 单击绑定动作

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-17.png)

##### 图1-17 填写请求参数

e）单击响应成功处理旁的新增处理动作，在新增处理动作页面，填写判断条件，执行动作选择数据处理，左边绑定页面变量“FromList”，右边绑定接口响应数据“data”。

##### 说明：当下拉页面时，触发动作重新获取表格数据，实现下拉刷新。


![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-18.png)

##### 图1-18 新增处理动作

f）单击预览，在预览页面下拉控件，刷新表格数据。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/1-19.png)

##### 图1-19 单击预览
