### 4. 控件使用指南

#### 4.4 布局控件

#### 4.4.11 步骤条

步骤条组件只支持电脑端。

当操作复杂或存在先后关系时，可以使用步骤条组件将其分解成一系列步骤，从而简化任务。

#### 4.4.11.1 基本属性

a）组件描述：可输入对控件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/220286529-b0664810-c23c-451c-b7c2-cb52f862027c.png)

##### 图11-1 组件描述

b）尺寸：提供两种尺寸选择，分别是默认和迷你。

![image](https://user-images.githubusercontent.com/79617492/220286553-065868cc-f644-4e6c-b390-5b09701a29e5.png)

##### 图11-2 尺寸

c）展示模式：提供两种展示模式选择，分别是横向和纵向。

![image](https://user-images.githubusercontent.com/79617492/220286594-e9b300cf-a4ea-4d07-ad70-614c65a9708d.png)

##### 图11-3 展示模式

d）标题位置：提供两种标题位置选择，分别是横向和纵向。

![image](https://user-images.githubusercontent.com/79617492/220286633-ed6e3f6a-f9be-446c-bbeb-1ec6ec2be3cc.png)

##### 图11-4 标题位置

e）当前步骤位置：可手动或绑定变量设置当前步骤位置，默认为“1”。

![image](https://user-images.githubusercontent.com/79617492/220286656-9e1e15f9-026b-4e27-865f-f76ab257d93d.png)

##### 图11-5 当前步骤位置

f）当前步骤状态：提供四种步骤状态选择，分别是等待、进程中、已完成和错误。

![image](https://user-images.githubusercontent.com/79617492/220290165-c20793d1-f863-4748-bd0d-9884268a481a.png)

##### 图11-6 当前步骤状态

g）步骤列表：可手动添加或绑定变量设置步骤列表。

![image](https://user-images.githubusercontent.com/79617492/220290182-e13fa351-4bf1-4abc-ae9c-561b412e4642.png)

##### 图11-7 步骤列表

h）动作面板：支持绑定控件当切换步骤时的动作，当符合动作条件时会触发相应的动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至3.3.20节》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/220290204-4a3b1b63-bfa8-416b-a124-dd72669f994a.png)

##### 图11-8 动作面板

#### 4.4.11.2 操作案例

案例介绍如何切换步骤展示不同页面以及动态绑定步骤数据。

#### 4.4.11.2.1 切换步骤展示不同页面

a）在左侧控件库，拖入一个步骤条控件，并配置基本属性。再拖入两个需要在步骤下显示的任意组件。

##### 说明：此处步骤下显示的内容分别以两个不同的表格控件为例，表格控件的使用可参考《SoFlu（前端）全自动开发平台教程第4.6.18节：表格》。实现原理为：切换到步骤一时，判断当前步骤是不是在步骤一，如果是，则显示步骤一应该要显示的控件，非步骤一要显示的控件则隐藏，切换到步骤二时也是同理。控件是否显示在属性 > 高级 > 是否显示中绑定。

![image](https://user-images.githubusercontent.com/79617492/220290249-db33aeb1-b4c1-4c1c-946d-789c7ac761da.png)

##### 图11-9 配置基本属性

b）单击页面上方变量设置，新增页面变量 “CurrentStep” 、“From1Display”以及“From2Display”。

```
变量说明：

b1）CurrentStep：表示当前步骤的位置，当前步骤位置从0开始，可以通过绑定变量来控制步骤条的当前位置。

b2）From1Display：可绑定变量控制“步骤一表格”是否显示，当切换到对应步骤时，显示对应的控件。变量值为 “true” 时表示显示，变量值为 “false” 时表示不显示，一般绑定在控件属性高级 > 是否显示的变量中。

b3）From2Display：用于控制“步骤二表格”是否显示，原理与“From1Display”一致。
```

![image](https://user-images.githubusercontent.com/79617492/220290292-cc1401d9-d89f-4c12-9e2c-ec704b5ddb99.png)

##### 图11-10 新增页面变量 “CurrentStep” 、“From1Display”以及“From2Display”

c）单击上方页面函数，新增三个页面函数，用于后续给变量赋值。

```
说明：

c1）因当前版本在变量设置中给变量赋值的数据类型为string类型，不满足当前使用场景，所以需自定义函数给变量赋值。

c2）number（a）：表示当前步骤条值的函数，a为参数，然后返回数字类型的参数。

c3）table_t（）：控制表格控件显示的函数，返回boolean类型true。

c4）table_f（）：控制表格控件不可显示的函数，返回boolean类型false。
```

![image](https://user-images.githubusercontent.com/79617492/220290325-d0d9b1a1-2486-46ab-a7af-6817d7fc6e29.png)

##### 图11-11 新增三个页面函数

d）选中步骤条控件，单击右侧属性栏当前步骤位置旁的变量绑定按钮，选择页面变量 > CurrentStep。

![image](https://user-images.githubusercontent.com/79617492/220290361-02fbb50a-e472-45f1-b93a-965de6a8d805.png)

##### 图11-12 选择页面变量 > CurrentStep

e）选中步骤一表格控件，单击右侧属性栏高级 > 是否显示旁的变量绑定按钮，选择页面变量 > From1Display。

##### 说明：绑定变量后用于控制表格控件是否能显示，“步骤二表格控件” 的是否显示变量同样绑定页面变量 “From2Display”。

![image](https://user-images.githubusercontent.com/79617492/220290389-f0bbe530-eb9e-4eb4-8bd2-a8e925710291.png)

##### 图11-13 选择页面变量 > From1Display

f）单击页面配置 > 绑定动作 > 页面加载前事件。

![image](https://user-images.githubusercontent.com/79617492/220290437-21fa4c94-cb23-4619-bd0a-ef6b8f07854d.png)

##### 图11-14 单击页面加载前事件

g）在绑定动作页面，选择内置动作 > 数据处理。单击新增两个数据处理，左边绑定 “From1Display/From2Display（是否显示）”页面变量，右边绑定 “table_f（）”函数。

##### 说明：绑定“table_f（）”函数控制表格控件在页面加载前默认不显示。

![image](https://user-images.githubusercontent.com/79617492/220290465-5fa434da-61b3-4ac5-b46b-a233a0c2a9e5.png)

##### 图11-15 单击新增两个数据处理

h）选中步骤条控件，单击右侧属性 > 绑定动作 > 当切换步骤时。 在绑定动作页面选择内置动作 > 数据处理，单击新增数据处理，左边绑定页面变量“CurrentStep”，右边绑定步骤条的控件变

##### 说明：步骤条控件的值等同于步骤条当前位置的值，当单击切换步骤时，将当前步骤条的值也就是当前步骤条位置的值赋值给页面变量“CurrentStep”。

![image](https://user-images.githubusercontent.com/79617492/220290506-45a05eeb-679d-46c6-9b7e-f77553e0a82c.png)

##### 图11-16 单击当切换步骤

![image](https://user-images.githubusercontent.com/79617492/220290533-a8e11b2d-6ae9-4929-9f35-de12af366b56.png)

##### 图11-17 单击新增数据处理

i）单击步骤条控件属性栏的高级 > 值绑定旁的变量绑定按钮，在变量绑定页面，选择页面变量 > CurrentStep，给步骤条控件赋值。

![image](https://user-images.githubusercontent.com/79617492/220290556-d82599c8-c202-4ffa-9767-0099fac92332.png)

##### 图11-18 选择页面变量 > CurrentStep

j）单击步骤条控件属性栏的属性 > 绑定动作 > 当切换步骤时，开启判断条件，左边绑定页面变量“CurrentStep”，右边绑定自定义函数number(a)，之后给a赋值为0，中间条件选择 “等于”。

![image](https://user-images.githubusercontent.com/79617492/220290577-6fe3a1ed-be21-4dca-9b08-b34e5b68235b.png)

##### 图11-19 单击当切换步骤

k）在下方响应动作选择内置动作 > 数据处理，单击新增数据处理，左边绑定页面变量“From1Display”，右边板顶函数 “table_t（）”。

```
说明：

k1）步骤条控件的当前步骤位置从0开始，当满足当前步骤值为0（即第一个步骤）的判断条件时，执行后续的响应动作。

k2）当步骤条在第一个步骤时，From1Display 的变量值为 “true”，此时 “步骤一表格控件”显示。
```

![image](https://user-images.githubusercontent.com/79617492/220290607-b5317fdb-3a2e-48be-bac3-220b26cc82cc.png)

##### 图11-20 单击新增数据处理

l）单击步骤条控件属性栏的属性 > 绑定动作 > 当切换步骤时，开启判断条件，左边绑定页面变量“CurrentStep”，右边绑定自定义函数number(a)，之后给a赋值为0，中间条件选择 “等于”。

m）在下方响应动作选择内置动作 > 数据处理，单击新增数据处理，左边绑定页面变量“From2Display”，右边板顶函数 “table_f（）”。

```
说明：

m1）步骤条控件的当前步骤位置从0开始，当满足当前步骤值为0（即第一个步骤）的判断条件时，执行后续的响应动作。

m2）当步骤条在第二个步骤时，From2Display的变量值为 “false”，此时 “步骤二表格控件”隐藏。

m3）再次单击步骤条的切换步骤动作绑定，参考 “步骤十~步骤十三” 的绑定方法，在步骤条控件的“切换步骤时”动作中绑定针对 “步骤二表格”显示的处理动作，即当函数number(a)的a＝1时，From1Display=“false” 并且 From2Display=“true”。
```

![image](https://user-images.githubusercontent.com/79617492/220290970-a4b67bcc-3932-427f-a140-aad4e4dd5d89.png)

##### 图11-21 单击新增数据处理

n）单击上方预览，在浏览器预览页面体验切换步骤条展示不同页面的效果。

##### 说明：页面加载时显示当前步骤（步骤一）的页面，当步骤条切换至步骤二时，显示步骤二对应的页面。

![image](https://user-images.githubusercontent.com/79617492/220290996-8ed1cfbb-0f6b-4990-bf8f-04f1d5ad764a.png)

##### 图11-22 显示当前步骤（步骤一）的页面

![image](https://user-images.githubusercontent.com/79617492/220291128-90219442-1884-44f1-abd4-9468ded36771.png)

##### 图11-23 步骤条切换至步骤二

#### 4.4.11.2.2 动态绑定步骤数据

前提条件：准备一个可以返回步骤条列表数据的后端接口，返回数据格式如下：

![image](https://user-images.githubusercontent.com/79617492/220291165-eb0abfc1-f1fb-4f0d-b37c-288e4ea092fb.png)

##### 图11-24 前提条件

a）在左侧控件库拖入一个步骤条控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/220291199-34c09ed0-7d8e-46a7-be04-e495cd72a30f.png)

##### 图11-25 拖入一个步骤条控件到右侧画布

b）单击上方变量设置，新增一个页面变量“StepList”，用于存储步骤条列表数据。

![image](https://user-images.githubusercontent.com/79617492/220291225-8a4e00e6-a754-466b-9e0d-5ebd11e55f42.png)

##### 图11-26 新增一个页面变量“StepList”

c）单击右侧属性栏步骤列表旁的变量绑定按钮，选择页面变量 > StepList，给步骤列表赋值。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/11-27.png)

##### 图11-27 选择页面变量 > StepList

d）单击右侧属性栏页面配置 > 绑定动作 > 页面加载前事件。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/11-28.png)

##### 图11-28 单击页面加载前事件

e）在绑定动作页面，选择对应的项目和接口。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/11-29.png)

##### 图11-29 选择对应的项目和接口

f）单击响应成功处理旁的新增处理动作，在新增处理动作页面，填写判断条件，执行动作选择数据处理，左边绑定页面变量“StepList”，右边绑定接口响应数据“data”。配置完成后单击确定。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/11-30.png)

##### 图11-30 新增处理动作页面

g）单击预览，在浏览器预览页面，查看动态绑定的步骤条数据。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/11-31.png)

##### 图11-31 单击预览

