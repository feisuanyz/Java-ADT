### 4. 控件使用指南

#### 4.4 布局控件

#### 4.4.9 拖拽容器

拖拽容器可实现列表的拖拽排序。将拖拽容器的拖拽元素class与该容器中组件的样式类名绑定后，即可通过拖拽更改组件循环后的数据排序。也可以设置拖动开始/结束的动作，当拖动时触发。

#### 4.4.9.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-1.png)

##### 图9-1 组件描述

b）是否禁用：开启后控件无法使用。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-2.png)

##### 图9-2 是否禁用

c）拖拽元素class：当拖拽容器内部组件的class与拖拽容器一致时，可在拖拽容器中拖拽该组件。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-3.png)

##### 图9-3 拖拽元素class

d）拖拽阴影：开启后拖拽组件时，会产生阴影效果。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-4.png)

##### 图9-4 拖拽阴影

e）动作面板：支持绑定控件拖拽开始时和拖拽结束时的动作，当符合条件时，会触发相应动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至第3.3.20节》绑定动作部分。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-5.png)

##### 图9-5 动作面板

#### 4.4.9.2 操作案例

案例介绍如何拖拽列表更换数据顺序。

#### 4.4.9.2.1 拖拽列表更换排序

前提条件：准备一个可以返回文本循环数据的后端接口，数据格式参考如下：

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-6.png)

##### 图9-6 数据格式参考

a）在左侧控件库中拖入一个拖拽容器组件到右侧画布，并在属性中填写拖拽元素class。

##### 说明：拖拽元素class为拖拽元素的标识，只有组件的样式类名与该元素一致时，该组件即可实现拖拽位置。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-7.png)

##### 图9-7 填写拖拽元素class

b）在拖拽容器中添加需要的组件（此处以文本组件为例），并配置该组件的样式类名。

##### 说明：只有在拖拽容器内的组件，以及该组件的样式类名与拖拽容器的拖拽元素class内容一致时才能拖拽。如果两个拖拽容器的拖拽元素class一致时，该组件可在两个拖拽容器中拖拽位置。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-8.png)

##### 图9-8 配置组件的样式类名

c）单击页面上方变量设置，新增一个页面变量“text”，用于存储文本的循环数据。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-9.png)

##### 图9-9 新增一个页面变量“text”

d）选中文本组件，单击右侧属性栏高级 > 循环数据旁的“绑定变量”按钮，绑定页面变量“text”。

##### 说明：此处绑定循环数据，只能绑定变量，用编辑代码中的数据绑定拖拽容器不生效。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-10.png)

##### 图9-10 绑定页面变量“text”

e）单击文本组件右侧属性栏内容旁的“绑定变量”按钮，选择循环变量 > 接口中的循环变量名“a”。

##### 注意：只有通过循环出来的数据才能拖拽顺序。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-11.png)

##### 图9-11 选择接口中的循环变量名“a”

f）单击右侧属性栏页面配置 > 绑定动作 > 页面加载前事件。在绑定动作页面，选择对应的项目和接口。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-12.png)

##### 图9-12 单击页面加载前事件

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-13.png)

##### 图9-13 选择对应的项目和接口

g）单击响应成功处理的新增处理动作，填写判断条件，执行动作选择数据处理，左边绑定页面变量“text”，右边绑定接口响应数据“data”，配置完成后单击确定。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-14.png)

##### 图9-14 单击响应成功处理的新增处理动作

h）选中拖拽容器，单击属性栏高级 > 值绑定旁的变量绑定按钮，在变量绑定页面，选择页面变量 > text。

##### 说明：拖拽容器只有设置值绑定后，才能在每次拖拽后更新循环数据。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-15.png)

##### 图9-15 选择页面变量 > text

i）单击右侧属性栏拖拽容器的绑定动作 > 拖拽开始时，在绑定动作页面选择内置动作 > 消息提示，输入拖拽开始的提示内容，如图9-16所示。

##### 说明：此处消息提示的处理动作仅用于展示，用户可以根据实际需求绑定拖拽开始时和拖拽结束时触发的动作，拖拽结束时动作绑定方法与拖拽开始时动作绑定方法一致，如图9-17所示。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-16.png)

##### 图9-16 拖拽开始时动作

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-17.png)

##### 图9-17 拖拽结束时动作

j）单击预览，在浏览器器预览页面，拖拽循环的组件后，即可更改循环数据的排序。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/4.%20%E5%B8%83%E5%B1%80%E6%8E%A7%E4%BB%B6/9-18.png)

##### 图9-18 单击预览
