### 4. 控件使用指南

#### 4.5 表单控件

#### 4.5.2 上传附件

上传附件控件可以将信息（网页、文字、图片、视频等）上传到服务器上。

#### 4.5.2.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/220586944-45e16be3-6d03-45eb-86e0-b537d37b0e45.png)

##### 图2-1 组件描述

b）标题：可设置单项选择的标题，默认显示在选择框上方。

![image](https://user-images.githubusercontent.com/79617492/220586988-ce94dd7a-f77f-40bd-8311-37d58ddcfc9b.png)

##### 图2-2 标题

c）数据源：可预设上传文件，数据格式为数组[“https:.×××.jpg”]。

![image](https://user-images.githubusercontent.com/79617492/220587029-3f102433-afed-486f-83b2-0121b985f8de.png)

##### 图2-3 数据源

d）是否禁用：开启后控件无法使用。

![image](https://user-images.githubusercontent.com/79617492/220587090-4c61f353-7bc6-457c-b98c-6ab56fa79c1e.png)

##### 图2-4 是否禁用

e）是否非空：开启后控件值不允许为空。

![image](https://user-images.githubusercontent.com/79617492/220840902-7b0e460e-6734-464b-ba52-084cf5723b0d.png)

##### 图2-5 是否非空

f）标题位置：提供上、左两种标题位置选择，默认为上。

![image](https://user-images.githubusercontent.com/79617492/220840915-7da8d5a4-19f2-4cbf-901b-7b8ce20cc5a3.png)

##### 图2-6 标题位置

g）尺寸：提供大、中、小三种尺寸选择，默认为中。

![image](https://user-images.githubusercontent.com/79617492/220840935-3e5a779a-b0a5-40c2-a7b1-ef9d6376b58c.png)

##### 图2-7 尺寸

h）上传类型：提供三种上传类型，分别是按钮、卡片、拖拽，默认为按钮。

![image](https://user-images.githubusercontent.com/79617492/220840957-e146f8a2-17f2-4518-ac12-fc72da7672e1.png)

##### 图2-8 上传类型

i）按钮内容和类型：上传模式为按钮时，可设置按钮内的显示文本和按钮类型，提供三种按钮类型。

![image](https://user-images.githubusercontent.com/79617492/220840971-a166775f-c0ac-4f66-b2de-f934bce46df0.png)

##### 图2-9 按钮内容和类型

j）多选：开启后可上传多个文件并设置上传文件上限数和到达上线后隐藏按钮。

![image](https://user-images.githubusercontent.com/79617492/220840980-9b3c5dab-9210-4e8c-82a6-661ae5b676a8.png)

##### 图2-10 多选

k）上传超时：可设置上传超时时间，单位为毫秒，当上传时间超过设定的时间时，提示上传超时。

![image](https://user-images.githubusercontent.com/79617492/220841014-59cc4286-5a42-43ba-9ab3-2089c6dc84dd.png)

##### 图2-11 上传超时

l）参数设置：默认请求参数为“file”，响应字段为“data”，可根据上传接口的参数自定义参数名。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-12.png)

##### 图2-12 参数设置

m）动作面板：支持绑定控件的上传接口、上传成功/失败、当添加/删除文件的动作，当符合条件时，会触发相应动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至第3.3.20节》绑定动作部分。

```
说明：

m1）上传接口：绑定后当上传文件时触发后端自定义上传文件的接口。

m2）上传成功/失败: 绑定后根据后端的上传接口执行情况触发对应动作。

m3）当添加/删除文件：绑定后当添加/删除文件时触发对应动作。
```

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-13.png)

##### 图2-13 动作面板

#### 4.5.2.2 操作案例

案例介绍如何长传单个或批量上传文件。

#### 4.5.2.2.1 上传单个文件

a）在“左侧控件库”拖入一个上传附件控件到右侧画布。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-14.png)

##### 图2-14 拖入一个上传附件控件

b）在右侧属性栏，单击绑定动作 > 上传接口。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-15.png)

##### 图2-15 单击上传接口

c）在“绑定动作”页面，选择对应项目和接口，配置需要的参数，配置完成后，单击确定。

##### 说明：此处一般可选择绑定能将文件上传至服务器的接口。因为绑定了“上传接口”的动作，所以在上传文件时，会触发对应的响应动作。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-16.png)

##### 图2-16 配置需要的参数

d）配置完基础属性后单击预览，在“浏览器预览页面”，单击上传文件按钮，选择需要上传的文件，选择完成单击打开即可。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-17.png)

##### 图2-17 选择需要上传的文件

上传完成效果：

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-18.png)

##### 图2-18 上传完成效果

#### 4.5.2.2.2 批量上传文件

a）在“左侧控件库”拖入一个上传附件控件到右侧画布。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-19.png)

##### 图2-19 拖入一个上传附件控件

b）在“右侧属性栏”单击打开多选按钮，设置文件上传上限数并单击打开到达上限数隐藏按钮。

##### 说明：上传上限是指一个上传控件最多可以上传的文件数量，此处上传上限为2，上传2个文件后，上传按钮自动隐藏。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-20.png)

##### 图2-20 打开多选按钮

c）单击预览，在“浏览器预览页面”，单击上传文件按钮，选择多个需要上传的文件，选择完成单击打开即可。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-21.png)

##### 图2-21 选择多个需要上传的文件

上传完成效果：

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/2-22.png)

##### 图2-22 上传完成效果
