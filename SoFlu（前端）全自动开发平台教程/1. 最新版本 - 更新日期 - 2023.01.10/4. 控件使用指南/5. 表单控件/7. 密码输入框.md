### 4. 控件使用指南

#### 4.5 表单控件

#### 4.5.7 密码输入框

可通过鼠标或键盘输入内容，支持密码/明文展示，平台自带输入框校验规则，可对输入框的数据做校验设置。

#### 4.5.7.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/222068670-9845d253-403d-4fc2-bcf6-6752ab25ca1a.png)

##### 图7-1 组件描述

b）标题：可设置输入框的标题，置于输入框上方，字符限制在20字符以内。

![image](https://user-images.githubusercontent.com/79617492/222068690-b97e840d-e7cd-44bf-b72b-0d10d6fd7863.png)

##### 图7-2 标题

c）是否只读：开启后无法输入内容，默认关闭。

![image](https://user-images.githubusercontent.com/79617492/222068718-07aa1ab1-888e-496f-b242-46e77bf0c61e.png)

##### 图7-3 是否只读

d）是否禁用：开启后控件无法使用，默认关闭。

![image](https://user-images.githubusercontent.com/79617492/222068747-251d94a1-f3c4-40ae-94dd-d9cacbe33693.png)

##### 图7-4 是否禁用

e）是否非空：开启后，输入框为必填项，当输入框为空时，弹出提示。

![image](https://user-images.githubusercontent.com/79617492/222068779-5d933c62-e3b2-41f2-a306-e91158843678.png)

##### 图7-5 是否非空

f）前/后缀图标：可在图标库选择输入框前/后缀图标。

![image](https://user-images.githubusercontent.com/79617492/222068810-6dcb0930-e56e-4287-9e13-7fd071fc30cf.png)

##### 图7-6 前/后缀图标

g）校验项配置：可配置输入框的校验，包括触发条件、校验正则、失败提示以及图标等。

```
说明：提供10中不同的正则校验方式，可根据实际需求选择，具体规则如下：

手机号：除了11位限制外，还增加了数字判断，支持13、14、15、18开头的号段，其中14开头号段后尾只能有5或7，18开头号段后尾不能有4。

URL：至少有一位英文字母（不分大小写），需拼接://再拼接不以空格开头的任意字符。

数字：0-9之间的任意数字

字母：常规英文字母，不区分字符大小写

校验纯汉字：必须为中文，且字符长度为0-50。

字母、数字、下划线：字母不区分大小写、数字可选择0-9之间的任意数字、下划线支持“_”。

Email：必须以字母或数字开头，后面可以拼接0至多个字母、数字、-、+、.中任意字符的组合，再拼接@，@后面可以拼接0至多个字母、数字、-、+、.中任意字符的组合。

身份证号（15位、18位数字）：身份证号码为15位或18位，为15位时必须全为数字，为18位时，前17位为数字最后一位可以为数字或者字符X。

日期：校验日期格式，如：2000-02-02格式，月份和日期可以由一个数字或者两个数字组成。

Ipv4地址：以数字开头，第一个数范围为0-255，从第二个数开始每个数前面加”.”，匹配三次0-255范围内任意的数字。
```

![image](https://user-images.githubusercontent.com/79617492/222068882-4ed979e8-6493-4824-aa89-6bb1b6f2dbc3.png)

##### 图7-7 校验项配置

h）默认值：可配置输入框默认值，预览运行时显示。

![image](https://user-images.githubusercontent.com/79617492/222068908-f7e69971-e109-4f37-b682-dc8fac64e379.png)

##### 图7-8 默认值

i）标题位置：提供上、左两种标题位置样式选择。

![image](https://user-images.githubusercontent.com/79617492/222068924-7ebe3f5a-441e-4690-a020-40df7130fc52.png)

##### 图7-9 标题位置

j）占位提示：当输入框未输入时的显示文案，默认为“请输入”。

![image](https://user-images.githubusercontent.com/79617492/222068954-2a0c92fa-828b-4aef-8426-2b6323198584.png)

##### 图7-10 占位提示

k）尺寸：提供大、中、小三种尺寸选择，默认为中。

![image](https://user-images.githubusercontent.com/79617492/222068979-0b5ce029-37f8-4711-9fef-3c1bd825bf50.png)

##### 图7-11 尺寸

l）清除按钮：可对当前选中值进行清除操作，清除后可选中其他项。

![image](https://user-images.githubusercontent.com/79617492/222069011-9ffd8e8e-ab51-4c2d-9685-59e25f6ed388.png)

##### 图7-12 清除按钮

m）最大长度：设置输入框可输入的最大字符长度，可手动输入或选择整数。

![image](https://user-images.githubusercontent.com/79617492/222069052-10387926-ceb8-47b6-8bb3-469129bf5f40.png)

##### 图7-13 最大长度

n）加密方式：提供base64、md5、rsa三种加密方式，默认为无。

![image](https://user-images.githubusercontent.com/79617492/222069460-13194b6a-c343-4090-ab44-68cbfe3d6386.png)

##### 图7-14 加密方式

o）动作面板：支持绑定控件的值变化、按下回车、获取/失去焦点的动作，当符合条件时，会触发相应动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至第3.3.20》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/222069502-2a44385e-d060-47bb-965e-19ecde15469a.png)

##### 图7-15 动作面板

#### 4.5.7.2 操作案例

操作案例介绍如何配置带校验规则的密码输入框以及如何使用ras加密方式对公钥进行加密。

#### 4.5.7.2.1 使用rsa公钥对密码进行加密

RSA公开密钥密码体制是一种使用不同的加密密钥与解密密钥，“由已知加密密钥推导出解密密钥在计算上是不可行的”密码体制。

a）使用“RSA加解密工具”生成一个密钥长度为“2048 bit"、密钥格式为"RKCS #1"、私钥密码为”123456“的公钥。

##### 说明：此处加解密工具为第三方工具，用户可根据使用习惯自行选择工具。

![image](https://user-images.githubusercontent.com/79617492/222069646-50590d04-1387-4991-9960-908cbcb1a87f.png)

##### 图7-16 点击生成公私密钥

b）在左侧“控件库”拖入密码输入框控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/222069684-1648d517-acd1-43a1-a1d7-f924b2b88253.png)

##### 图7-17 拖入密码输入框控件

c）选中密码输入框控件，在右侧属性栏中加密方式选择rsa，然后将生成的公钥填入公钥输入框。

![image](https://user-images.githubusercontent.com/79617492/222069764-cab58bf3-4419-49f2-8a5e-d2a2e7044e9c.png)

##### 图7-18 将生成的公钥填入公钥输入框

d）单击绑定动作 > 当按下回车时。在“绑定动作页面”，选择需要绑定的项目和接口。

![image](https://user-images.githubusercontent.com/79617492/222069798-1bbdbfdf-87aa-4d01-b928-5d5cddbe3707.png)

##### 图7-19 选择需要绑定的项目和接口

e）单击新增请求参数，左边填写接口参数名，右边绑定密码输入框控件变量，选择完成后单击确定。

##### 说明：此处把加密后的文本赋值给接口参数，仅用于展示RSA加密方法，用户可根据实际情况绑定对应的接口及参数。

![image](https://user-images.githubusercontent.com/79617492/222069820-7c6f04b9-ec9c-405c-8e2e-dee79674edf4.png)

##### 图7-20 单击新增请求参数

f）单击预览，在“浏览器预览页面的密码输入框”输入测试数据并按下回车，触发接口请求。

g）按下键盘F12打开浏览器控制台，查看接口参数，此时可以看到密码输入框中的数据已被RSA算法加密并传入接口参数。

![image](https://user-images.githubusercontent.com/79617492/222069848-29e5538a-b280-4ef0-ae1d-a8518fe0bb0f.png)

##### 图7-21 打开浏览器控制台

#### 4.5.7.2.2 校验密码格式是否为字母、数字、下划线组成

a）在左侧“控件库”拖入密码输入框控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/222070006-6119ce93-da3c-4528-b136-649bb02f76a7.png)

##### 图7-22 拖入密码输入框控件

b）在右侧“属性栏”，单击校验项配置。

![image](https://user-images.githubusercontent.com/79617492/222070025-3e4a2f40-106c-4546-9ece-17e94bb48bdc.png)

##### 图7-23 单击校验项配置

c）单击添加一项，选择触发条件为值改变。

```
说明：

c1）值改变： 当输入框内值发生改变，会触发该事件。

c2）获取焦点： 当单击或使用Tab键切换到输入框控件时，会触发该事件。

c3）失去焦点： 当单击或使用Tab键离开输入框控件时，会触发该事件。
```

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-24.png)

##### 图7-24 选择触发条件为值改变

d）单击触发条件旁的编辑按钮，选择校验正则为字母、数字、下划线，并输入校验失败提示。

##### 说明：平台自带验证字母、数字、下划线的正则表达式。其中字母不区分大小写、数字可选择0-9之间的任意数字、下划线支持“_”。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-25.png)

##### 图7-25 单击触发条件旁的编辑按钮

e）配置完成后单击预览，在浏览器运行页面体验密码输入框校验效果。如图7-26、图7-27所示。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-26.png)

##### 图7-26 校验成功

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-27.png)

##### 图7-27 校验失败

#### 4.5.7.2.3 验证两次输入密码是否一致

a）在“左侧控件库”，拖入两个密码输入框控件，一个文本组件。

##### 说明：两个密码输入框控件，一个用于输入密码，一个用于二次确认密码；文本组件用于提示两次密码输入是否一致。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-28.png)

##### 图7-28 拖入所需控件和组件

b）单击上方变量设置，新增一个 “text”的页面变量，用于给文本控件赋值。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-29.png)

##### 图7-29 新增一个 “text”的页面变量

c）选中文本控件，单击右侧属性栏内容中的变量绑定按钮，单击页面变量，选择变量 “text”，选择完成后单击确定。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-30.png)

##### 图7-30 选择变量 “text”

d）选中 “再次确认”密码输入框控件，在属性栏设置基本属性，设置完成后单击下方绑定动作，选择当失去焦点时。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-31.png)

##### 图7-31 设置基本属性

e）在“绑定动作页面”，开启判断条件，左边绑定 “再次确认”输入框控件变量，右边绑定 “密码”输入框控件变量，中间条件选择不等于。

说明：此判断条件设置后，当 “再次确认”输入框的值不等于 “密码”输入框的值时，执行下面的响应动作。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-32.png)

##### 图7-32 绑定动作页面

f）在下方响应动作中，选择内置动作 > 数据处理，左边绑定页面变量“text”，右边手动输入提示 “两次输入密码不一致！”。配置完成后单击确定。

##### 说明：当两个输入框值不一致时，会给变量“text”赋值“为两次输入密码不一致！”，因文本控件的内容变量绑定了变量“text”，所以此时文本也会显示变量“text”的值。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-33.png)

##### 图7-33 选择内置动作 > 数据处理

g）再次单击动作绑定，选择当失去焦点时，添加 “再次确认”输入框 的值等于 “密码”输入框值的判断条件，下方选择内置动作 > 数据处理，左边左边绑定页面变量“text”，右边手动输入空值，配置完成后单击确定。

##### 说明：当两个输入框值一致时，会给变量“text”赋空值，因文本控件的内容变量绑定了变量“text”，所以此时文本内容的展示效果也为空，不显示提示。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-34.png)

##### 图7-34 再次单击动作绑定

h）单击预览，在“浏览器预览页面”查看密码输入框验证效果。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/5.%20%E8%A1%A8%E5%8D%95%E6%8E%A7%E4%BB%B6/7-35.png)

##### 图7-35 单击预览
