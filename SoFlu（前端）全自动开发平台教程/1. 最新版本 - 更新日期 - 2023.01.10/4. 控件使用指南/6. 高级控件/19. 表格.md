### 4. 控件使用指南

#### 4.6 高级控件

#### 4.6.19 表格

当有大量结构化数据需要用行、列的形式展示时，可使用表格组件。表格组件适用于读取、管理指定对象多条记录的场景，可以同时向用户清晰地展示多条数据的指定信息。

#### 4.6.19.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/228193674-9911d6ca-bc7f-4c7a-ac7e-ffdbc15b5edd.png)

##### 图19-1 组件描述

b）列表名称：可设置表格的标题，置于表格上方，字符限制在20字符以内。

![image](https://user-images.githubusercontent.com/79617492/228193707-ff23386c-108e-4ac2-9cb1-3296cfed0739.png)

##### 图19-2 列表名称

c）图标：可在图标库中选择设置表格的图标。

![image](https://user-images.githubusercontent.com/79617492/228193750-9a4bf23f-5b4b-49fe-a5f2-be2485bc7614.png)

##### 图19-3 图标

d）支持复选：开启后表格支持选择多条数据。

![image](https://user-images.githubusercontent.com/79617492/228193770-5be71cb3-8b3e-4114-b07e-33be1363bde0.png)

##### 图19-4 支持复选

e）显示序号：开启后显示表格数据行的序号。

![image](https://user-images.githubusercontent.com/79617492/228193796-0cc04062-863e-4a9f-88de-8aa0fda73fef.png)

##### 图19-5 显示序号

f）序号标题：可设置表格序号标题。

![image](https://user-images.githubusercontent.com/79617492/228193822-ae70a7c3-3dd2-4add-938d-6ea129ae4282.png)

##### 图19-6 序号标题

g）显示滚动条：开启后当表格数据较多时，显示滚动条。

![image](https://user-images.githubusercontent.com/79617492/228193859-4734c686-73a8-4280-8d41-1597265730b4.png)

##### 图19-7 显示滚动条

h）固定操作列：开启后表格操作列不可移动。

![image](https://user-images.githubusercontent.com/79617492/228194024-83f7bd72-9557-46b1-ba89-d6fc7978a2be.png)

##### 图19-8 固定操作列

i）自动查询：开启后表格自动查询显示数据。

![image](https://user-images.githubusercontent.com/79617492/228194044-806f0a22-98a9-48b9-81b8-551748295694.png)

##### 图19-9 自动查询

j）展开筛选：开启后表格默认显示筛选栏。

![image](https://user-images.githubusercontent.com/79617492/228194073-5d419839-e393-4e83-97fb-bd7058f076d7.png)

##### 图19-10 展开筛选

k）数据源：可对表格数据进行代码编辑也可绑定自定义变量，代码编辑格式如下：

![image](https://user-images.githubusercontent.com/79617492/228194103-5160480b-17ea-4a88-aec6-b86352762f71.png)

##### 图19-11 数据源

l）数据映射：可编辑代码编辑数据映射字段。

```
说明：

l1）pageIndex：当前页号

l2）pageSize：页数大小

l3）records：分页数据集

l4）totalRecords：分页总数
```

![image](https://user-images.githubusercontent.com/79617492/228194134-e6300d4f-d015-4159-9236-d94c6145d26e.png)

##### 图19-12 数据映射

m）数据列：可设置表格的数据列标题以及绑定数据字段，支持手动添加或者从接口返回解析。

```
说明：

标题：可设置数据列的显示标题

数据字段：可绑定对应的数据列字段

是否主键：可将字段设置为主键

是否展示：开启后该数据列在表格中展示

数据类型：可选文本、金额、日期、图片以及自定义格式，开启自定义后可以在该表格列中拖拽其他组件在该列进行使用。

是否固定：可选在左侧或右侧固定，固定后该数据列不能移动，默认为不固定

宽度：可设置该数据列的宽度

对齐方式：可设置数据列标题的对其方式，可选左、中、右，默认为左

排序方式：可选择基础排序、根据长度排序以及服务端排序，默认为无

弹出展示：设置后单击数据列数据会有弹出展示，可根据需求选择不同的弹出格式
```

![image](https://user-images.githubusercontent.com/79617492/228194192-f67c752d-17ca-447a-a611-e4fbba187982.png)

##### 图19-13 数据列

n）筛选项配置：表格筛选功能支持设置指定筛选项，设置好筛选项标题和字段后，在运行页面的搜索输入框即可查询相关数据。

```
说明：

标题：可设置筛选项标题

字段名：可绑定筛选项字段

输入提示：可输入筛选框的输入提示

宽度：可设置筛选框宽度

是否必填：开启后筛选框为必填项

类型：可设置筛选输入框类型，可选择输入框、密码输入框、多行输入框以及下拉选择项等
```

![image](https://user-images.githubusercontent.com/79617492/228409262-1d458103-da9b-4a33-af45-67d4338bf707.png)

##### 图19-14 筛选项配置

o）分页设置：开启后表格数据可分页展示，可设置表格分页显示的分页条数、分页大小、每页条数以及页面总数。

```
说明：

分页条数：表格加载时显示的数据条数。

分页大小：提供“大”和“小”两种样式选择，默认为“小”。

开启每页条数：开启后在表格右下方可选择每页需要显示的条数，可使用代码编辑自定义选项。

开启页面总数：开启后可在表格右下方显示当前页面数据的总条数，显示格式可自定义，格式为：“Total totalitems”（{total} items”（totalitems”（{total}为页面数据总数变量，会自动获取数据），例：“共${total}条”
```

![image](https://user-images.githubusercontent.com/79617492/228409275-524e8a2e-1e90-42d3-bc84-c87dd4a209ac.png)

##### 图19-15 分页设置

p）顶部操作：可对表格顶部的筛选框和操作按钮进行设置。

```
说明：

名称：可设置表格顶部操作按钮的名称

标题：可设置表格顶部操作按钮的标题

权限标识：可设置操作按钮的权限标识，支持英文、数字以及下划线

操作：可选择顶部按钮的操作类型，可选择新增、导入、导出、批量以及自定义

布局：可选择垂直或水平布局

新增项配置：当操作类型选择新增时，可手动或一键同步配置新增项字段

是否提示：开启后在单击操作按钮时会弹出二次确认提示框

动作面板：可绑定操作按钮当点击时的动作，当符合条件时，会触发相应动作
```

![image](https://user-images.githubusercontent.com/79617492/228409300-74e4d488-15cc-403d-a4c2-0e10466ca0e1.png)

##### 图19-16 顶部操作页面

![image](https://user-images.githubusercontent.com/79617492/228409324-a57b16eb-d6f4-4c48-8687-0939fb6da318.png)

##### 图19-17 对表格顶部的筛选框和操作按钮进行设置

q）操作列配置：可对表格内的操作列进行设置。

```
说明：

名称：可设置表格内操作列的名称

标题：可设置表格内操作列的标题

权限标识：可设置操作列的权限标识，支持英文、数字以及下划线

是否显示：开启后操作列会显示在表格内

操作：可选择表格内操作列的操作类型，可选详情、编辑以及自定义

是否提示：开启后在单击操作按钮时会弹出二次确认提示框

绑定事件：可绑定操作按钮当点击时的动作，当符合条件时，会触发相应动作
```

![image](https://user-images.githubusercontent.com/79617492/228409347-0069071e-4b6f-4fd5-9473-f01972785065.png)

##### 图19-18 操作列配置页面

![image](https://user-images.githubusercontent.com/79617492/228409363-c44342d7-8d52-42a7-8385-63546d674bb5.png)

##### 图19-19 绑定动作

r）表格设置：可对表格的大小进行设置，提供大、中、小三种样式选择，默认为中。

![image](https://user-images.githubusercontent.com/79617492/228409384-050eca7f-57b8-49c6-a234-25961842ad0a.png)

##### 图19-20 表格设置

s）动作面板：支持绑定控件的当获取数据时的动作，当符合条件时，会触发相应动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至第3.3.20节》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/228409405-e4688b58-2c27-4bcb-b4e6-cbc823113853.png)

##### 图19-21 动作面板

#### 4.6.19.2 案例演示

案例介绍如何通过接口或数据源获取数据，并且根据id删除当前行记录。

#### 4.6.19.2.1 通过接口获取数据

前提条件：准备一个可以展示表格数据的后端接口，示例接口返回数据如下：

![image](https://user-images.githubusercontent.com/79617492/228409467-eaf03ce6-8ba8-4ee8-bf20-b27c08e94b70.png)

##### 图19-22 示例接口返回数据

a）从左侧控件库拖入一个表格控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/228409472-7084b225-6bdf-4b0e-b286-9f30ba25ce27.png)

##### 图19-23 拖入一个控件

b）单击动作面板的绑定动作 > 当获取数据时。

c）在绑定动作页面，选择对应项目和接口，选择完成后单击确定。

##### 说明：此处绑定获取数据的动作，绑定对应项目和接口后即可自动获取表格数据，无需另外赋值。

![image](https://user-images.githubusercontent.com/79617492/228409490-567c2b58-0184-42f0-862c-94b4d7545003.png)

##### 图19-24 选择对应项目和接口

d）在右侧属性栏，单击开启自动查询。

##### 说明：开启自动查询后，在页面加载时会自动查询表格数据。

![image](https://user-images.githubusercontent.com/79617492/228409517-c6785283-8752-4190-bdea-7ad7b277a028.png)

##### 图19-25 单击开启自动查询

e）单击数据映射的编辑代码，根据接口字段给表格编辑对应的数据映射字段。

![image](https://user-images.githubusercontent.com/79617492/228409532-c088328b-73b5-4471-917f-5764b598fb50.png)

##### 图19-26 单击数据映射的编辑代码

f）在数据列属性中单击添加一项，设置表格对应的数据列。

##### 说明：可以手动添加表格数据列，也可以单击从接口返回解析一键添加数据列。

![image](https://user-images.githubusercontent.com/79617492/228409544-e1838335-7288-432f-8a01-1afc37ad5617.png)

##### 图19-27 设置表格对应的数据列

g）单击开启分页设置，配置分页条数、大小等。

##### 说明：如果后端接口的SQL语句是分页查询的格式，此处必须开启分页设置按钮，否则表格无法显示数据。表格分页不是必需项，用户可根据实际情况配置。

![image](https://user-images.githubusercontent.com/79617492/228409569-99d1ccd3-d6b8-44e9-b235-631295d82a70.png)

##### 图19-28 单击开启分页设置

h）配置完单击上方预览，在浏览器运行页面查看表格数据。

![image](https://user-images.githubusercontent.com/79617492/228409594-b2a5250a-1aae-40b6-b469-33ba0ab25c8d.png)

##### 图19-29 单击上方预览

#### 4.6.19.2.2 通过数据源获取数据

a）从左侧控件库拖入一个表格控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/228409634-856ac945-e924-4001-a235-c2a25db4cf23.png)

##### 图19-30 拖入一个表格控件

b）单击上方变量设置，新增一个 “FromList”的页面变量，用于存储表格数据。

![image](https://user-images.githubusercontent.com/79617492/228409794-478a5c5e-ae99-4310-bb0d-dca63e435ce1.png)

##### 图19-31 单击上方变量设置

c）单击数据源旁的变量绑定按钮，单击页面变量 > FromList ，给表格控件赋值。

![image](https://user-images.githubusercontent.com/79617492/228409819-5eb91428-8c33-4fd2-869f-9ade26fbc9c0.png)

##### 图19-32 单击数据源旁的变量绑定按钮

d）在数据列属性中单击添加一项，设置表格对应的数据列。

##### 说明：可以手动添加表格数据列，也可以单击从接口返回解析一键添加数据列。

![image](https://user-images.githubusercontent.com/79617492/228409832-01303052-1530-4a79-a4ae-dbd11c848854.png)

##### 图19-33 设置表格对应的数据列

e）单击数据映射的编辑代码，根据接口字段给表格编辑对应的数据映射字段。

![image](https://user-images.githubusercontent.com/79617492/228409852-8930919c-deb0-4160-be0e-cc583fe6d977.png)

##### 图19-34 单击数据映射的编辑代码

f）单击开启分页设置，配置分页条数、大小等。

##### 说明：如果后端接口的SQL语句是分页查询的格式，此处必须开启分页设置按钮，否则表格无法显示数据。表格分页不是必需项，用户可根据实际情况配置。

![image](https://user-images.githubusercontent.com/79617492/228409874-4842026b-d7ac-477d-8af4-9baa22b50e28.png)

##### 图19-35 单击开启分页设置

g）单击右侧属性栏页面配置 > 绑定动作 > 页面加载前事件。

h）在绑定动作页面，选择对应项目和接口，并填写对应参数。

![image](https://user-images.githubusercontent.com/79617492/228409893-06316603-6128-42ad-a821-e2454da207bd.png)

##### 图19-36 选择对应项目和接口

i）单击响应成功处理的新增处理动作，填写判断条件，执行动作选择数据处理，左边绑定页面变量“FromList”，右边绑定接口中的响应数据“data”，配置完成后单击确定。

![image](https://user-images.githubusercontent.com/79617492/228410050-e8ecd518-b5be-4dd4-9026-29b40bd60d16.png)

##### 图19-37 单击响应成功处理的新增处理动作

j）配置完单击上方预览，在浏览器运行页面查看表格数据。

![image](https://user-images.githubusercontent.com/79617492/228410065-d0b3cc10-316f-4f04-8a23-b2044f937f2c.png)

##### 图19-38 配置完单击上方预览

#### 4.6.19.2.3 通过数据源获取数据

a）从左侧控件库拖入一个表格控件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/228410076-938e62e0-4c14-496a-b480-6e251c6dc739.png)

##### 图19-39 拖入一个表格控件

b）单击上方变量设置，新增一个 “FromList”的页面变量，用于存储表格数据。

![image](https://user-images.githubusercontent.com/79617492/228410104-2cc73515-7a4c-4ebe-bdf9-acef8302d8ae.png)

##### 图19-40 单击上方变量设置

c）单击数据源旁的变量绑定按钮，单击页面变量 > FromList ，给表格控件赋值。

![image](https://user-images.githubusercontent.com/79617492/228410123-540c2123-eb41-4a52-a941-21cf9dc7efbf.png)

##### 图19-41 单击数据源旁的变量绑定按钮

d）在数据列属性中单击添加一项，设置表格对应的数据列。

##### 说明：可以手动添加表格数据列，也可以单击从接口返回解析一键添加数据列。

![image](https://user-images.githubusercontent.com/79617492/228410136-2758bfad-88fe-4ff4-87e7-c5d4a1c0ed8c.png)

##### 图19-42 设置表格对应的数据列

e）单击数据映射的编辑代码，根据接口字段给表格编辑对应的数据映射字段。

![image](https://user-images.githubusercontent.com/79617492/228410148-76657fb5-6ad1-4ea4-bd59-8ad3924a9052.png)

##### 图19-43 单击数据映射的编辑代码

f）单击开启分页设置，配置分页条数、大小等。

##### 说明：如果后端接口的SQL语句是分页查询的格式，此处必须开启分页设置按钮，否则表格无法显示数据。表格分页不是必需项，用户可根据实际情况配置。

![image](https://user-images.githubusercontent.com/79617492/228410169-00a49eac-f050-4fa5-bda7-28f34b51316b.png)

##### 图19-44 单击开启分页设置

g）单击右侧属性栏页面配置 > 绑定动作 > 页面加载前事件。

h）在绑定动作页面，选择对应项目和接口，并填写对应参数。

![image](https://user-images.githubusercontent.com/79617492/228410185-b9ea60e4-59f7-485e-adde-984bc03b9607.png)

##### 图19-45 选择对应项目和接口

i）单击响应成功处理的新增处理动作，填写判断条件，执行动作选择数据处理，左边绑定页面变量“FromList”，右边绑定接口中的响应数据“data”，配置完成后单击确定。

![image](https://user-images.githubusercontent.com/79617492/228410196-711c210f-7db0-4a44-b363-503a7e5327a1.png)

##### 图19-46 单击响应成功处理的新增处理动作

j）配置完单击上方预览，在浏览器运行页面查看表格数据。

![image](https://user-images.githubusercontent.com/79617492/228410218-e995ee89-248a-4565-aae1-6b5c87128dee.png)

##### 图19-47 单击上方预览

#### 4.6.19.2.4 根据id删除当前行记录

前提条件：绑定后端接口获取表格数据，详情可参考上文案例一。

a）选中表格控件，单击操作列配置，添加 “删除” 操作列，单击编辑按钮。

![image](https://user-images.githubusercontent.com/79617492/228410233-305f072b-6aa5-40e3-939b-3bf6b4a7cd07.png)

##### 图19-48 单击编辑按钮

b）配置删除操作列的名称、标题等，操作选择自定义，配置完成后单击绑定动作 > 当点击时。

![image](https://user-images.githubusercontent.com/79617492/228410244-81c19cd1-ebfe-4096-83ac-779f704207ea.png)

##### 图19-49 单击绑定动作 > 当点击时

c）在绑定动作页面，选择项目及接口，路径参数“id” 绑定为表格当前行变量“id”，绑定完成后单击确定。


```
说明：

c1）此处绑定的接口需要绑定可根据id删除指定数据的接口。

c2）只有在控件操作列的变量绑定支持绑定表格当前行变量。
```

![image](https://user-images.githubusercontent.com/79617492/228410256-39b582ba-592a-4bc8-ad95-57b781ddfe00.png)

##### 图19-50 绑定动作页面

![image](https://user-images.githubusercontent.com/79617492/228410273-cf61293b-88ce-45b0-a2cd-35dbd5dd6749.png)

##### 图19-51 变量绑定

d）单击预览，在浏览器预览页面，选择一条需要删除的数据，单击对应数据操作列中的删除，在二次确认后即可删除指定id的数据。

![image](https://user-images.githubusercontent.com/79617492/228410281-36d7bbb0-9861-449b-b0f9-0f0ba46fe005.png)

##### 图19-52 单击预览
