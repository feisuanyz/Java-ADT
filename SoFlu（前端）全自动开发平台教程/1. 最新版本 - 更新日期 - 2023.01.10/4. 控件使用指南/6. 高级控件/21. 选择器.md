### 4. 控件使用指南

#### 4.6 高级控件

#### 4.6.21 选择器

选择器组件只支持移动端，可以自定义选项的数据源。选项选中的值即为该组件的值，当选中值发生 改变时，组件的值会跟随改变。

#### 4.6.21.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/228414277-dcee0bac-008a-4af7-b96f-258be42dde32.png)

##### 图21-1 组件描述

b）展示loading：开启后选择器控件上展示一个loading层。

![image](https://user-images.githubusercontent.com/79617492/228414314-0e99d8a6-fd63-49ba-bbd2-ffcd5beaf24a.png)

##### 图21-2 展示loading

c）标题：可输入组件的标题，字符限制在20字符以内。

![image](https://user-images.githubusercontent.com/79617492/228414335-7d893ada-a1bc-4b53-b823-c67bb54ef949.png)

##### 图21-3 标题

d）默认选中值：可设置控件初始时选中的值。

![image](https://user-images.githubusercontent.com/79617492/228414369-baa38fe3-4ec3-4551-95a2-6a1df92f984e.png)

##### 图21-4 默认选中值

e）数据源： 可以自定义设置或通过变量获取，数据源格式如下：

e1）单列数据格式：

![image](https://user-images.githubusercontent.com/79617492/228414391-e7a73576-5cf9-439e-8b45-0738d1dc9f8e.png)

##### 图21-5 单列数据格式

e2）多列数据格式：

![image](https://user-images.githubusercontent.com/79617492/228414440-32d12419-566a-44f6-89f1-b7733c80d856.png)

##### 图21-6 多列数据格式

e3）数据源禁用：

![image](https://user-images.githubusercontent.com/79617492/228414462-587014df-9786-4349-95e9-40ab02a0add7.png)

##### 图21-7 数据源禁用

f）动作面板：支持绑定控件点击确定按钮时、点击取消按钮时以及选择改变时触发的动作，当符合条件时，会触发相应动作。详情见《SoFlu（前端）全自动开发平台教程第3.3.16节至3.3.20节》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/228414484-ddf2cf25-fcb0-4161-9b10-4a2bd968ccc4.png)

##### 图21-8 动作面板

#### 4.6.21.2 操作案例

案例介绍如何使用输入框动态获取选择器数据;

#### 4.6.21.2.1 输入框动态获取选择器数据

前提条件：准备一个可以返回选择器数据的后端接口，数据格式如下：

![image](https://user-images.githubusercontent.com/79617492/228414528-8143b475-6a52-414d-bb6e-0049243238c9.png)

##### 图21-9 数据格式

a）将开发页面切换至手机端，从左侧控件库拖入一个选择器控件和一个输入框控件到右侧画布，并将选择器控件隐藏。

![image](https://user-images.githubusercontent.com/79617492/228414543-b4b60d38-171b-4c7c-a4bc-e43dc824b500.png)

##### 图21-10 拖入两个控件

b）单击上方变量设置，新增两个 “selector” 和 “display” 页面变量。

```
变量说明：

b1）selector：用于存储后端返回的选择器数据。

b2）display：用于控制选择器控件是否显示。
```

![image](https://user-images.githubusercontent.com/79617492/228414639-163983d1-ae1c-4033-803f-a00ccd4b119f.png)

##### 图21-11 新增两个变量

c）选中输入框控件，单击右侧属性栏的绑定动作 > 当获取焦点时。

![image](https://user-images.githubusercontent.com/79617492/228414994-04234944-9f1e-4b8f-a4d0-d9f6e0f1b261.png)

##### 图21-12 单击当获取焦点时

d）在绑定动作页面，选择内置动作 > 数据处理 > 新增数据处理，左侧绑定页面变量“display”，右侧手动输入“true”。

##### 说明：当单击输入框控件时，隐藏的选择器控件显示。

![image](https://user-images.githubusercontent.com/79617492/228415011-1f56d0a4-1a8a-413c-850f-4a4f9f86fee9.png)

##### 图21-13 选择新增数据处理

e）在大纲树中选中选择器控件，单击右侧属性栏数据源旁的变量绑定按钮，选择页面变量 > selector。 给选择器控件赋值。

![image](https://user-images.githubusercontent.com/79617492/228415026-73bbfa61-4680-479c-bb90-e2119555c8b0.png)

##### 图21-14 单击变量绑定按钮

f）单击右侧属性栏高级 > 是否显示旁的变量绑定按钮，选择页面变量 > display。

![image](https://user-images.githubusercontent.com/79617492/228415054-a8cf24f8-6273-4087-bf88-952bca39a325.png)

##### 图21-15 单击变量绑定按钮

g）单击属性 > 绑定动作 > 点击确认按钮时。

h）在绑定动作页面，选择内置动作 > 数据处理 > 新增数据处理，左侧绑定输入框控件变量，右侧绑定选择器控件变量。

##### 说明：当单击选择器控件的确认按钮时，将当前选择器控件的值赋值给输入框控件，在输入框中显示。

![image](https://user-images.githubusercontent.com/79617492/228415069-1d48e601-4496-41cf-933a-4f656cd9aafe.png)

##### 图21-16 绑定动作页面

![image](https://user-images.githubusercontent.com/79617492/228415083-1da442bd-7c5c-474e-8d02-f091fb3a958b.png)

##### 图21-17 绑定变量

i）再次单击新增数据处理，左侧绑定页面变量“display”，右侧手动输入“false”。

##### 说明：在选择器控件中选完需要的数据单击确定后，选择器控件隐藏。

![image](https://user-images.githubusercontent.com/79617492/228415113-a88e7a85-903b-4332-9a71-5906ce15205f.png)

##### 图21-18 绑定变量

j）单击绑定动作 > 点击取消按钮时。

k）在绑定动作页面，选择内置动作 > 数据处理 > 新增数据处理，左侧绑定页面变量“display”，右侧手动输入“false”。

##### 说明：当单击选择器取消按钮时，选择器控件隐藏。

![image](https://user-images.githubusercontent.com/79617492/228415133-8fdfce94-707a-436a-9efe-13db8880a705.png)

##### 图21-19 绑定动作页面

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/21-20.png)

##### 图21-20 绑定变量

l）单击右侧属性栏页面配置 > 绑定动作 > 页面加载前事件。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/21-21.png)

##### 图21-21 单击页面加载前事件

m）在绑定动作页面，选择对应的项目和接口。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/21-22.png)

##### 图21-22 选择对应的项目和接口

n）单击下方响应成功处理的新增处理动作，在新增处理动作页面，填写判断条件，执行动作选择数据处理，左侧绑定页面变量“selector”，右侧绑定后端接口响应字段“data”。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/21-23.png)

##### 图21-23 绑定变量

o）单击预览，在预览页面，体验动态获取选择器数据效果。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/21-24.png)

##### 图21-24 单击预览
