### 4. 控件使用指南

#### 4.6 高级控件

#### 4.6.4 下拉菜单：移动端

下拉菜单组件只支持移动端。主要用于移动端应用场景向上或向下弹出菜单列表。

#### 4.6.4.1 基本属性

a）组件描述：可输入对组件的描述，字符限制在200字符以内。

![image](https://user-images.githubusercontent.com/79617492/224651221-75fd4d3e-52c6-4682-8d9b-6fc95264f467.png)

##### 图4-1 组件描述

b）菜单展开方向：可设置菜单滑出的方向，默认为向下。

![image](https://user-images.githubusercontent.com/79617492/224651239-64ab740d-0ada-437e-9d45-251189ae8182.png)

##### 图4-2 菜单展开方向

c）动画时长：设置菜单展开和收起的动画时长，默认为0.2s。

![image](https://user-images.githubusercontent.com/79617492/224651265-a6db0236-051e-4626-95dc-27babe749143.png)

##### 图4-3 动画时长

d）是否显示遮罩：开启后当菜单滑出时展示遮罩效果。

![image](https://user-images.githubusercontent.com/79617492/224651296-d42613eb-946f-4b18-aa14-d5461998a048.png)

##### 图4-4 是否显示遮罩

e）点击遮罩层关闭菜单：开启后当点击遮罩时，菜单关闭。

![image](https://user-images.githubusercontent.com/79617492/224651320-9d1421b0-c967-473e-a33a-ccaa53effda9.png)

##### 图4-5 点击遮罩层关闭菜单

f）菜单数据映射：可自定义或者通过数据绑定配置菜单数据映射字段。

```
字段说明：

f1）title：菜单标题

f2）options：菜单子项列表

f3）active：菜单默认选中项

f4）disabled：是否禁用
```

![image](https://user-images.githubusercontent.com/79617492/224651429-65a23562-c4d1-45a9-9206-4da02e14f21c.png)

##### 图4-6 菜单数据映射

g）菜单项数据映射：可自定义或者通过数据绑定配置菜单项数据映射字段。

```
字段说明：

g1）text：菜单项名称

g2）value：菜单项值
```

![image](https://user-images.githubusercontent.com/79617492/224651455-f54d97e2-70f5-4de1-a31d-0b280136d1b1.png)

##### 图4-7 菜单项数据映射

h）下拉菜单配置：可手动或绑定变量配置多个下拉菜单并对菜单属性进行配置。


```
菜单属性说明：

h1）菜单标题：可输入当前下拉菜单的标题。

h2）数据源：可手动或绑定变量配置当前菜单的菜单项列表。

h3）默认选中：可配置当前菜单初始选中的菜单项值。

h4）支持slot：开启后可在菜单项中拖入自定义组件。

h5）是否禁用：开启后当前菜单被禁用。
```

![image](https://user-images.githubusercontent.com/79617492/224651493-a52a18ed-1d60-41c8-9bdb-042dccda415f.png)

##### 图4-8 下拉菜单配置

![image](https://user-images.githubusercontent.com/79617492/224651515-08de52c0-59fe-4a42-a9bf-dcc8569ec4fe.png)

##### 图4-9 配置菜单属性

i）菜单标题和选项的的选中颜色：配置菜单选中时的颜色。

![image](https://user-images.githubusercontent.com/79617492/224651539-f57f5d35-2d24-451b-b03f-90efef760056.png)

##### 图4-10 单标题和选项的的选中颜色

j）动作面板：支持绑定控件当选中菜单发生变化时、当菜单栏打开时以及当菜单栏关闭时的动作，当符合条件时，会触发相应动作。详情见 《SoFlu（前端）全自动开发平台教程第3.3.16节至3.3.20节》绑定动作部分。

![image](https://user-images.githubusercontent.com/79617492/224651857-d63fac7a-84ac-45c7-8e02-cc6b604bb9d5.png)

##### 图4-11 动作面板

#### 4.6.4.2 操作案例

案例介绍如何动态获取菜单、单击菜单跳转页面以及自定义菜单项内容。

#### 4.6.4.2.1 动态绑定菜单标题以及下拉菜单值

前提条件：准备一个可以返回下拉菜单数据的后端接口，数据格式如下：

![image](https://user-images.githubusercontent.com/79617492/224651879-a63f21a3-b5cf-49b4-8f47-63401aa482e2.png)

##### 图4-12 数据格式

a）在页面开发界面，切换为手机模式，从左侧控件库中拖拽出下拉菜单组件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/224651895-e547af0c-6117-4e55-a0a5-370f18a8e756.png)

##### 图4-13 拖拽出下拉菜单组件

b）单击上方变量设置，新增一个页面变量“Dropdown”，用于存储下拉菜单的值。

![image](https://user-images.githubusercontent.com/79617492/224651922-bb301ec4-ce19-4ecc-8388-aef08c068dcb.png)

##### 图4-14 单击上方变量设置

c）单击右侧属性栏下拉菜单配置旁的变量绑定按钮，选择页面变量 > Dropdown，给下拉菜单赋值。

![image](https://user-images.githubusercontent.com/79617492/224651944-d49cf455-7862-4089-ba11-77d5640801a6.png)

##### 图4-15 选择页面变量 > Dropdown

d）单击右侧属性栏页面配置 > 页面加载事件。

![image](https://user-images.githubusercontent.com/79617492/224652141-1e6e923f-0e46-4b60-8bf9-484f693796d8.png)

##### 图4-16 单击页面加载事件

e）在绑定动作页面，选择对应的项目和接口。

![image](https://user-images.githubusercontent.com/79617492/224652161-0d256ca7-383b-4fa5-976c-5e2f60886122.png)

##### 图4-17 选择对应的项目和接口

f）在绑定动作页面单击下方响应成功处理的新增处理动作，在新增处理动作页面，填写判断条件，执行动作选择数据处理，左侧绑定页面变量“Dropdown”，右侧绑定后端接口响应数据“data”。

![image](https://user-images.githubusercontent.com/79617492/224652200-f0eee82b-d735-4a91-8cb8-a670e621f388.png)

##### 图4-18 新增处理动作页面

g）单击预览，在预览页面查看动态绑定数据的下拉菜单。

![image](https://user-images.githubusercontent.com/79617492/224652217-6e238e71-3166-4362-8150-e9f4e1724e90.png)

##### 图4-19 单击预览

#### 4.6.4.2.2 点击下拉菜单的值跳转不同的页面

a）在页面开发界面，切换为手机模式，从左侧控件库中拖拽出下拉菜单组件到右侧画布。

![image](https://user-images.githubusercontent.com/79617492/224652236-ae8f16d9-565a-4a6b-a5e2-37674afa4bcc.png)

##### 图4-20 拖拽下拉菜单组件

b）单击上方变量设置，新增一个页面变量“list” 和一个页面变量“selected”，用于存储下拉菜单被选中的值。

![image](https://user-images.githubusercontent.com/79617492/224652262-dd329a9b-4d68-496e-920f-fd8349570dcd.png)

##### 图4-21 单击上方变量设置

c）单击上方页面函数，在函数代码开发页面，编写一个 “listChuli()”函数，把当前被选中的菜单项值赋值给变量“slected”。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-22.png)

##### 图4-22 单击上方页面函数

d）单击下方动作面板绑定动作 > 当选中菜单发生变化时。在绑定动作页面，选择内置动作 > 数据处理 > 新增数据处理，左侧绑定页面变量“list”，右边绑定下拉菜单控件变量。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-23.png)

##### 图4-23 绑定变量

e）再次单击下方动作面板绑定动作 > 当选中菜单发生变化时。在绑定动作页面，选择内置动作 > 函数处理 > 新增函数处理，绑定页面函数“listChuli()”。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-24.png)

##### 图4-24 绑定页面函数“listChuli()”

f）再次单击下方动作面板绑定动作 > 当选中菜单发生变化时。在绑定动作页面，开启判断条件，左边绑定页面变量“selected”，右边手动输入值为“1”，中间条件选择 “等于”。

g）在下方响应动作中选择内置动作 > 打开URL，填写需要跳转的网站地址。

##### 说明：当菜单选项值为1时，执行后续响应动作，此处以打开自定义URL为例。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-25.png)

##### 图4-25 填写需要跳转的网站地址

h）单击预览，在预览页面，单击下拉菜单选项，当菜单项值为“1”（即深圳）时，跳转至自定义网站地址。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-26.png)

##### 图4-26 单击预览

#### 4.6.4.2.3 自定义下拉菜单的内容

a）在页面开发界面，切换为手机模式，从左侧控件库中拖拽出下拉菜单组件到右侧画布。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-27.png)

##### 图4-27 拖拽下拉菜单组件

b）在右侧属性栏下拉菜单配置中配置下拉菜单项并单击菜单项旁的编辑按钮。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-28.png)

##### 图4-28 配置下拉菜单项

c）在菜单项配置页面中单击打开支持slot，此时菜单项变为slot模式，在菜单项中插入自定义控件即可。

![输入图片说明](../../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/4.%20%E6%8E%A7%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/6.%20%E9%AB%98%E7%BA%A7%E6%8E%A7%E4%BB%B6/4-29.png)

##### 图4-29 单击打开支持slot
