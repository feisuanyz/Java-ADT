### 5. 完整案例专题

#### 5.1 用户注册

用户注册功能往往是开发者在开发一个系统或APP应用时需要实现的比较常见的功能，本节为您介绍如何使用(前端)全自动开发平台进行页面开发，同时联合(后端)全自动开发平台进行用户注册功能的实现。

#### 5.1.1 功能描述

在【用户注册页面】填写好用户注册信息以后，输入注册手机号，单击“发送验证码”，即可接收到验证码；填写收到的验证码，单击“注册”按钮进入【用户管理页面】，即可查看所有用户注册信息，并可对每一位用户进行启用或停用的操作。

![image](https://user-images.githubusercontent.com/79617492/228419233-80da2b96-c94e-4e96-ab5a-2e5d1679cfe9.png)

##### 图1-1 用户注册页面

#### 5.1.2 步骤引导

a）后端接口准备；

b）页面设计、数据绑定；

c）页面预览、功能测试。

#### 5.1.2.1 后端接口准备

在（后端）全自动开发平台准备前端页面需调用到的5个接口：

![image](https://user-images.githubusercontent.com/79617492/228419251-6e4bcc41-d170-4529-a2c0-529d11b9288a.png)

##### 图1-2 需调用到的5个接口

a）saveUserregistration接口

用于新增用户注册信息，在【用户注册页面】填写完所有用户信息后，单击“注册”按钮时调用。

![image](https://user-images.githubusercontent.com/79617492/228419266-b2cc24a2-c870-42cd-9011-54987f816f9c.png)

##### 图1-3 saveUserregistration接口流程图

b）updateUserregistration接口

用于更新用户注册信息，在【用户管理页面】对用户单击“启用”或“停用”按钮时调用。

![image](https://user-images.githubusercontent.com/79617492/228419286-3e5a44c6-6899-4db7-b5d5-3b91e77c324e.png)

##### 图1-4 updateUserregistration接口流程图

c）pageListUserRegistration接口

用于查询所有用户信息，在进入【用户管理页面】时调用并显示所有用户信息。

![image](https://user-images.githubusercontent.com/79617492/228419316-cb33327f-9a79-41d5-82d9-ab492ebdadc2.png)

##### 图1-5 pageListUserRegistration接口流程图

d）sendVerifyCode接口

用于发送手机验证码，在【用户注册页面】填写完注册手机号之后，单击“发送验证码”按钮时调用。

![image](https://user-images.githubusercontent.com/79617492/228443814-073a77ee-211b-4117-824b-802210baae03.png)

![image](https://user-images.githubusercontent.com/79617492/228443825-ff8de7f8-505b-4d92-990a-7d039bf62136.png)

##### 图1-6/7 sendVerifyCode接口流程图

e）checkVerifyCode接口

用于验证手机验证码，在【用户注册页面】填写完接收到的手机验证后，单击“注册”按钮时调用。

![image](https://user-images.githubusercontent.com/79617492/228443871-a350290a-a34d-48f4-bab9-4d1a91ae3fdd.png)

##### 图1-8 checkVerifyCode接口流程图1

若您不了解如何在(后端)全自动开发平台创建接口及其他相关操作，可以查看《SoFlu（后端）全自动开发平台教程》。

#### 5.1.2.2 页面构建、数据绑定

##### 前提条件：您已完成创建应用项目、创建页面、关联后端项目等基本操作。

用户注册功能需要开发【用户注册页面】、【导航栏页面】和【用户管理页面】三个页面，其中【导航栏页面】与【用户管理页面】为页面嵌套关系，即【导航栏页面】需关联【用户管理页面】进行展示，如下图所示。

![image](https://user-images.githubusercontent.com/79617492/228443978-c77d085d-bcd4-4b41-955c-81d1de41ba35.png)

##### 图1-10 【导航栏页面】需关联【用户管理页面】

##### 若您不了解如何进行页面嵌套，可以查看《SoFlu（前端）全自动开发平台教程第6.1.1节：如何实现页面嵌套》。

a）用户注册页面

a1）页面构建

通过点击页面开发界面中大纲树选项，即可查看该页面使用到的所有控件，点击控件右侧的眼睛按钮，可显示或隐藏对应控件以展示不同的页面效果。

控件的具体配置可根据实际需求进行自定义配置，若不清楚如何配置控件，请查看对应控件的帮助文档。

![image](https://user-images.githubusercontent.com/79617492/228444007-9eb0d9ea-784e-4207-90ea-f96c99a93ec5.png)

##### 图1-11 页面构建

a2）数据绑定

a2-1）为发送验证码按钮绑定：当点击时，调用sendVerifyCode接口发送手机验证码，传入注册手机号，直接引用注册手机号输入框控件即可。

![image](https://user-images.githubusercontent.com/79617492/228444025-219e4f6f-443a-413f-b876-c73dfa21e49b.png)

##### 图1-12 为发送验证码按钮绑定

![image](https://user-images.githubusercontent.com/79617492/228444057-ea0fe496-83b3-42db-9094-642bb51632e0.png)

##### 图1-13 执行绑定动作

![image](https://user-images.githubusercontent.com/79617492/228444080-a593eccd-3485-4bcd-9ade-cd673e9d9a18.png)

##### 图1-14 变量绑定

a2-2）为注册按钮绑定：当点击时，调用saveUserregistration接口新增用户注册信息，需传入在页面中填写的用户名、登录密码、注册手机号信息，直接引用对应控件即可；同时跳转至用户管理页面。

![image](https://user-images.githubusercontent.com/79617492/228444206-59a575d9-a704-4b7e-8425-2f15a1079f54.png)

##### 图1-15 为注册按钮绑定

![image](https://user-images.githubusercontent.com/79617492/228444238-267a3971-05c2-467d-9ef1-4fcbb2d67a00.png)

##### 图1-16 选择变量

![image](https://user-images.githubusercontent.com/79617492/228444264-b5cae699-8b1b-4928-8b58-d6ccc555be15.png)

##### 图1-17 选择页面

b） 导航栏页面

由于该页面需与【用户管理页面】关联展示，需打开属性栏“页面配置”选项下设置为页面组件的按钮，如此在开发【用户管理页面】时，才可选择上级页面组件，以实现页面嵌套；该页面无需进行数据绑定。

![image](https://user-images.githubusercontent.com/79617492/228444428-0e440f8d-605b-47a6-b003-63e88fab56d5.png)

##### 图1-18 打开属性栏

![image](https://user-images.githubusercontent.com/79617492/228444453-e8f12f78-4af4-4309-b570-e570b01d954d.png)

##### 图1-19 设置为页面组件

c）用户管理页面

c1）页面构建

由于用户管理页面只需要设计一张表单展示用户数据，可使用（前端）全自动开发平台的表单设计功能，利用表单生成页面，具体操作请参见《SoFlu（前端）全自动开发平台教程第4.5节：表单控件》。

##### 说明：用户管理页面也可直接使用控件库中的表格控件进行构建。

![image](https://user-images.githubusercontent.com/79617492/228444487-a53eee9a-773d-4ea8-944f-f1c07c79b19f.png)

##### 图1-20 点击表单设计

![image](https://user-images.githubusercontent.com/79617492/228444507-b24ea332-bb06-424a-a0ad-d5233b6dbf24.png)

##### 图1-21 表单设置

c2）数据绑定

c2-1）为表格控件绑定：调用pageListUserRegistration接口分页查询所有用户注册信息。

![image](https://user-images.githubusercontent.com/79617492/228444531-ec8f82d5-5e98-48b3-9942-156a6f87e811.png)

##### 图1-22 为表格控件绑定

c2-2）为操作列-启用/停用选项绑定：当点击时，调用updateUserregistration接口修改用户状态，进入属性栏操作列配置进行相关设置即可。

![image](https://user-images.githubusercontent.com/79617492/228444581-83f8688b-e4ec-4fe7-8001-89d6b3c0e86e.png)

##### 图1-23 选择操作列配置

![image](https://user-images.githubusercontent.com/79617492/228444604-9bfd8d79-5cc9-46fd-b4aa-9a0baed49885.png)

##### 图1-24 进行操作列配置

![image](https://user-images.githubusercontent.com/79617492/228445150-5b4bb262-4337-44f6-a9b0-5f5e5c9bfa84.png)

##### 图1-25 执行绑定动作

#### 5.1.2.3 页面预览、功能测试

a）上述所有操作完成后，在【用户注册页面】所在页面设计界面上方，单击“预览”选项进行页面预览。

![image](https://user-images.githubusercontent.com/79617492/228445168-2e054353-7e87-46cf-ba5b-db9697ff4756.png)

##### 图1-26 单击“预览”选项

b）预览加载完成后，系统将自动弹出浏览器窗口默认显示设置为首页的页面，此时您可以输入用户注册信息，进行相关功能测试。

##### 说明：在浏览器按F12键，即可查看手机端效果。

提交注册信息：

![image](https://user-images.githubusercontent.com/79617492/228445193-fdbfe420-17d2-4306-a34b-a3ea0b07bbec.png)

##### 图1-27 提交注册信息

查看所有用户信息：

![image](https://user-images.githubusercontent.com/79617492/228445212-580e84e6-54ad-47d9-8256-9abebf61f477.png)

##### 图1-28 查看所有用户信息

停用用户状态：

![image](https://user-images.githubusercontent.com/79617492/228445246-03317b30-3067-448e-b46f-644ce1411161.png)

##### 图1-29 停用用户状态
