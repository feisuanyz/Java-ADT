### 6. 常见操作案例

#### 6.3 如何实现级联控件数据映射

级联控件用于对一组相关联的数据集合进行多级选择，如省市区、公司架构、事物分类等。使用级联控件时，用户可以选择使用固定的本地数据作为数据源，也可以通过调用接口获取数据，本节主要介绍调用接口进行数据映射的情况。

#### 6.3.1 前提条件

若需使用级联控件实现数据映射，无论数据源来自固定的本地数据还是调用接口获取的数据，其数据源格式需为层级级联或平级级联形式，以下将分别介绍这两种数据源格式进行数据映射的操作过程。

层级级联数据源格式示例：

```
[
    {
        "value": "1",
        "label": "一级",
        "children": [
            {
                "value": "1-1",
                "label": "二级",
                "children": [
                    {
                        "value": "1-1-1",
                        "label": "三级",
                    }
                ]
            }
        ]
    }
]

```

平级级联数据源格式示例：

```
[
        {
            "value":"1",
            "label":"一级"
        },
        {
            "value":"1-1",
            "label":"一级一项",
            "parentKey":"1"
        },
        {
            "value":"1-1-1",
            "label":"一级一项一列",
            "parentKey":"1-1"
        }
]
```

```
字段说明：

value：选项对应的值

label：选项显示的内容

children：层级结构中的子级数据

parentKey：平级结构中的父级id
```

#### 6.3.2 层级级联数据映射

数据源格式为层级级联的情况使用选择所在地区进行说明，实现效果如下图所示：

![输入图片说明](../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/6.%20%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B/3-1.png)

##### 图3-1 选择所在地区

a）级联控件基本属性配置

选中级联控件，输入控件标题，选择数据源格式为“层级级联”，选择数据加载类型。

![输入图片说明](../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/6.%20%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B/3-2.png)

##### 图3-2 级联控件基本属性配置

```
说明：

a1）示例仅说明了主要属性的配置，其他属性您可以根据实际需求自行配置。

a2）数据加载类型：

a2-1）“可搜索非远程数据”用于搜索初始化数据源或者本地绑定的数据源，一般与绑定动作类型“初始化数据”结合使用，或不绑定动作，单独使用本地绑定的数据源；

a2-2）“点击层级远程加载数据”用于当本地绑定的数据源和初始化数据仅返回第一层级数据的情况，一般与绑定动作类型“初始化数据”、“当值变化时”结合使用，通过点击第一层级节点的数据，根据值的变化调用接口，一层一层去加载下一层级的数据；

a2-3）“输入搜索远程加载数据”用于实现调用接口远程搜索，一般与绑定动作类型“当远程搜索加载数据”结合使用。

后两种结合使用方式就是为了满足用户可以动态触发接口实时拿到最新数据。
```

![输入图片说明](../../../images/%20SoFlu%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202023.01.10/6.%20%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B/3-3.png)

##### 图3-3 效果示例
