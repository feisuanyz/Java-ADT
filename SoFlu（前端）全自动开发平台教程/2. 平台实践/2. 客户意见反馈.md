### 2. 平台实践

#### 2.2 客户意见反馈

本节为您介绍客户意见反馈功能的实现。

##### 2.2.1 功能描述

客户意见反馈功能的实现具体包含以下子功能：

a）提交客户意见反馈

b）客户反馈意见后台管理

c）添加回访记录

d）查询回访记录

![2-1](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_1_1.png)

##### 图2-1 客户意见反馈子功能

##### 说明：通过在【客户意见反馈页面】填写意见反馈信息，单击“提交反馈”或者“后台”即可进入【后台管理页面】；在【后台管理页面】，可对每一条反馈意见进行回访操作，进入【添加回访记录页面】；在【添加回访记录页面】填写该条反馈的回访记录内容，单击“提交”，再次进入【后台管理页面】，便可以看到对应反馈意见记录的回访状态字段由未回访变化为已回访；同时在【后台管理页面】单击“查看回访记录”可进入【查询回访记录页面】查看所有的回访记录。

##### 2.2.2 后端接口准备

在（后端）全自动开发平台准备前端页面需调用到的5个接口：

![2-2](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_1.png)

##### 图2-2 需调用的5个接口

a）客户意见反馈录入接口

用于新增客户意见反馈信息。

![2-3](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_2.png)

##### 图2-3 客户意见反馈录入接口流程图

b）查询客户反馈意见列表接口

用于查询客户反馈意见数据，显示在【后台管理页面】。

![2-4](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_3.png)

##### 图2-4 查询客户反馈意见列表接口流程图

c）查询字典表数据接口

用于根据参数opinionType（意见类型）和satisfaction（满意度）查询对应的字典表数据，作为选项数据返回在【用户注册页面】中“意见类型”多选框及“满意度”单选框。

![2-5](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_4.png)

##### 图2-5 查询字典表数据接口流程图

![2-6](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_5.png)

##### 图2-6 数据返回效果 

d）新增回访记录接口

用于添加回访记录。

![2-7](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_6.png)

##### 图2-7 新增回访记录接口流程图

e）查询回访记录接口

用于查询回访记录。

![2-8](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_2_7.png)

##### 图2-8 查询回访记录接口流程图

##### 2.2.3 关联（后端）全自动开发平台项目

##### 前提条件：您已完成创建前端应用项目、创建页面等基本操作。

由于在（前端）全自动开发平台创建的项目会同步显示在（后端）全自动开发平台，若后端接口在相同项目名下开发，在选择关联后端项目时，选择同名项目即可，如下图所示：

![2-9](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_3_1.png)

##### 图2-9 新增后端项目

##### 2.2.4 页面构建、数据绑定

客户意见反馈功能包含【客户意见反馈页面】、【后台管理页面】、【添加回访记录页面】和【查询回访记录页面】四个页面的构建，如下图所示，图中的连接线代表页面间的跳转关系。

![2-10](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_1.png)

##### 图2-10 客户意见反馈功能

a）客户意见反馈页面

a1）页面构建

![2-11](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_2.png)

##### 图2-11 页面构建

a2）数据绑定

a2-1）为页面绑定：当页面加载前，两次调用查询字典表数据接口，获取选项数据返回在【用户注册页面】中“意见类型”多选框及“满意度”单选框。

说明：调用接口前需设置4个页面变量，如下图“为页面绑定2”所示，前两个页面变量opinionType、satisfaction为传入的查询参数，后两个opinionTypeName、satisfactionName为选项值的接收参数。

![2-12](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_3.png)

##### 图2-12 为页面绑定1

![2-13](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_4.png)

##### 图2-13 为页面绑定2

![2-14](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_5.png)

##### 图2-14 为页面绑定3

![2-15](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_14.png)

##### 图2-15 为页面绑定4

![2-16](https://www.feisuanyz.com/fspage/alcj/feedback/clientadvicefeedback_4_7.png)

##### 图2-16 为页面绑定5
