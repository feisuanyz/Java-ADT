### 10 商用版客户端

#### 10.7 本地客户端使用指标监控接口

平台提供监控检测扩展jar包，在本地客户端和执行引擎使用指标监控接口时，需要下载指定的扩展jar包后，执行指标监控的接口时才能监控到数据。

#### 10.7.1 操作指南

a）进入（后端）全自动开发平台，单击右上角下载按钮 > 扩展jar包。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-1.png)

##### 图7-1 单击扩展jar包

b）在扩展jar包历史版本列表中，单击下载监控检测扩展jar包。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-2.png)

##### 图7-2 单击下载监控检测扩展jar包

c）将下载的监控检测扩展jar包解压后放进后端平台本地客户端或执行引擎的extjar文件夹中。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-3.png)

##### 图7-3 放进extjar文件夹

d）创建一个application.yml文件放置于feisuanyz-local-engine.jar文件同一目录并配置以下信息，用于控制执行引擎中的所有项目是否上报监控信息。

```
metrics-report:
enable: true
```

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-4.png)

##### 图7-4 创建一个application.yml文件

e）单击startup启动本地客户端。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-5.png)

##### 图7-5 单击startup启动本地客户端

f）在本地客户端项目中，新建一个开启指标监控上报的接口。

##### 说明：如何创建指标监控上报接口详情可见文档《SoFlu（后端）全自动开发平台教程第4.13.3节：集成监控接口》部分。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-6.png)

##### 图7-6 新建一个开启指标监控上报的接口

g）执行接口后，进入监控上报数据的地址可查看监控采集到的数据。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/10.%20%E5%95%86%E7%94%A8%E7%89%88%E5%AE%A2%E6%88%B7%E7%AB%AF/7-7.png)

##### 图7-7 查看监控采集到的数据
