### 2. 快速入门

#### 2.8 部署项目

通过部署项目，用户可以将开发完成的项目部署到服务器长期运行，本节主要针对平台端项目部署进行说明，本地端部署项目操作请您参见商用/社区版客户端部分内容。

#### 2.8.1 前提条件

a）已安装1.8.0.91或以上版本JDK环境，否则将无法正常启动项目；若启动闪退，请检查JDK版本。

b）已完成项目发版操作，具体操作请参见《SoFlu（后端）全自动开发平台教程第2.7节：项目发版》。

#### 2.8.2 章节指引

a）下载项目部署包

b）下载执行引擎包

c）启动项目

#### 2.8.2.1 下载项目部署包

a）在平台项目管理页面，选择需部署的项目，单击设置按钮![image](https://user-images.githubusercontent.com/79617492/229678166-90c0cbe6-e097-4ea4-8c19-ba4132e5fda1.png)，选择发版记录。

![image](https://user-images.githubusercontent.com/79617492/229678186-6e1b62c2-5095-4cc8-a243-339c2fcd94a6.png)

##### 图8-1 选择发版记录

b）在发版记录页面，找到需要部署的项目版本，下载项目部署包，如图8-2所示。

##### 说明：若想直接下载最新项目部署包进行项目部署，单击设置按钮后，选择项目部署包即可，如图8-2所示。

![image](https://user-images.githubusercontent.com/79617492/229678205-7225eeb0-370f-4544-8a83-e81e33401e44.png)

##### 图8-2 发版记录页面

![image](https://user-images.githubusercontent.com/79617492/229678238-63594b55-cbd9-4d7e-9fb7-bb9e3cab6abd.png)

##### 图8-3 下载项目部署包

c）在弹出的导出配置页面，选择项目部署包导出的环境，单击确定开始下载，并保存至本地PC。

##### 注意：若系统出现如下图所示的红色提示，需要在之后的操作中下载对应版本号的执行引擎包。

![image](https://user-images.githubusercontent.com/79617492/229678273-74259056-1eed-4b10-8d23-c07d38c0b87f.png)

##### 图8-4 红色提示

![image](https://user-images.githubusercontent.com/79617492/229678294-2984d8dc-3d3c-48a7-8b81-0abec30451f9.png)

##### 图8-5 选择项目部署包导出的环境

#### 2.8.2.2 下载执行引擎包

a）在项目管理页面，单击右上角下载按钮，选择执行引擎历史版本。

##### 说明：如果部署的项目中有指标监控接口，还需要下载对应的扩展JAR包放入执行引擎文件夹中，详情操作可见文档《SoFlu（后端）全自动开发平台教程第10.7节：本地客户端使用指标监控接口》。

![image](https://user-images.githubusercontent.com/79617492/229678331-9268975e-7c3d-48c7-b40c-86428e1e22d6.png)

##### 图8-6 选择执行引擎历史版本

b）在执行引擎历史版本页面，下载最新版或所需版本的执行引擎包。

![image](https://user-images.githubusercontent.com/79617492/229678342-65b13e3d-0035-49d8-9eaf-f27962871e9e.png)

##### 图8-7 下载最新版或所需版本的执行引擎包。

#### 2.8.2.3 启动项目

a）解压下载的执行引擎包feisuanyz-engine.zip。

##### 注意：启动项目的服务路径不能存在中文，否则启动会失败。

![image](https://user-images.githubusercontent.com/79617492/229678364-56204b91-cf02-43f7-96bb-f37231a31c89.png)

##### 图8-8 解压下载的执行引擎包

b）将下载的项目部署包移动至执行引擎包的apps目录下。

```
说明：

b1）若解压后的执行引擎包没有apps目录，手动创建apps目录即可。

b2）项目部署默认不需要配置任何内容，启动端口默认为8080，日志文件默认存放在当前执行引擎包目录下的logs目录中（该目录在项目服务启动后自动生成）。

例如：若解压后的执行引擎包为feisuanyz-engine-3.0.12，则日志生成路径是 feisuanyz-engine-3.0.12/logs ，若需修改配置，您需要创建一个application.yml文件，该文件需要和feisuanyz-engine.jar文件存放于同一目录。
```

application.yml文件创建模板如下：

##### 注意：application.yml的日志存储方式只能选择一种。

```
server:
    # 服务端口
    port: 8080

# 系统日志配置（日志二选一）
logging:
    file:
        path: /logs


# 系统日志存储到kafka（日志二选一）
logging:
    config: classpath:logback-kafka.xml

# kafka相关配置，日志默认是保存到本地文件中，我们也支持将日志存储到kafka，需要按照下面模板进行配置
fs:
    kafka:
        producer-enabled: true
        producers:
            logback:
            # kafka集群地址
                bootstrapservers: bootstrap.servers=127.0.0.1:9092,127.0.0.2:9093,127.0.0.3:9092
                # topic
        topic: flow-system-logs
```

c）（可选）若在Windows操作系统下部署项目，则直接双击startup.bat即可启动项目服务。

##### 注意：默认服务端口是8080，日志存放路径是当前部署项目根目录，例如：\feisuanyz-engine-3.0.12\logs。

![image](https://user-images.githubusercontent.com/79617492/229678397-2dbd0db4-8df4-4d91-ad09-8fdc1733cb8c.png)

##### 图8-9 启动项目服务

d）（可选）若在Linux操作系统下部署项目，则执行以下操作：

```
注意：

startup.sh为启动服务脚本；shutdown.sh为停止服务脚本。

默认服务端口号是8080，日志存放路径为当前部署项目根目录，例如：/feisuanyz-engine-3.0.12/logs。
```

d1）使用工具或通过二进制方式上传项目部署包至安装的服务器，进入当前项目的安装路径下。

d2）执行以下命令给安装脚本添加执行权限：

```
chmod a+x startup.sh
chmod a+x shutdown.sh
```

d3）执行./startup.sh启动项目服务。

![image](https://user-images.githubusercontent.com/79617492/229678415-4188745f-c8d7-4c9e-9730-fa00e331c064.png)

##### 图8-10 启动项目服务

e）若出现如下图所示信息，说明项目部署成功。

![image](https://user-images.githubusercontent.com/79617492/229678435-459a9d90-428e-4c8b-8976-2477428345ce.png)

##### 图8-11 说明项目部署成功
