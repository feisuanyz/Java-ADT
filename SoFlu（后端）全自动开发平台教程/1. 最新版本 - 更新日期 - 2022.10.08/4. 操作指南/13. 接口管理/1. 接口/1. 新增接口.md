### 4. 操作指南

#### 4.13 接口管理

#### 4.13.1 接口

#### 4.13.1.1 新增接口

本节主要介绍如何在项目中新增接口的具体操作方法。

#### 4.13.1.1.1 操作步骤

a）在项目管理页面中，选择“接口管理”，单击已新增模块后的“+”，选择“新增接口”。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/image.png)

##### 图1-1 选择“新增接口”

b）在“新增接口信息 > 基本信息”页面，配置接口的基本信息，配置完成单击下一步。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-2.png)

##### 图1-2 配置接口的基本信息

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-3.png)

##### 图1-3 配置完成单击下一步

```
说明：

b1）接口路径：路径在同一个接口模块下不可重复；

b2）接口协议：根据接口选择对应协议，HTTP或Wbsocket；Websocker协议与客户端通信组件搭配使用，具体可参考《SoFlu（后端）全自动开发平台教程第6.9.4节：客户端通信组件》；

b3）HTTP方法：根据接口需求选择对应的请求方法，平台支持POST、GET、PUT、DELETE、HEAD、TRACE、OPTIONS、PATCH等8种HTTP方法；

b4）数据模拟：模拟mock接口数据，具体操作可参考《SoFlu（后端）全自动开发平台教程第4.13.3.1节：创建接口模拟数据》；

b5）是否异步：开启按钮后，当前接口会交给其它线程执行，释放主线程，若未开启按钮，则当前接口由主线程执行完成；

b6）更多设置：包含业务标签、指标上报、监控上报，详情可参考《SoFlu（后端）全自动开发平台教程第4.13.6节：集成监控接口》；

b7）设计文档：用于描述接口设计原理，详情可参考《SoFlu（后端）全自动开发平台教程第4.13.7节：接口设计文档》。
```

c）进入配置入参列表页面，选择对应的请求参数，配置自定义的接口入参字段以及字段类型，配置完成单击提交。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-4.png)

##### 图1-4 配置自定义的接口入参字段以及字段类型

```
说明：

c1）若开启“集合”按钮，则说明该字段为列表类型，列表中元素为设置的字段类型；若没有开启，则说明该字段为基本数据类型、对象类型或者实体模型类型。

c2）“验证类型”、“验证的值”以及“输出结果”，属于字段验证内容；字段验证即对字段类型进行验证，是否符合类型规范，相当于前置条件，只有所有字段验证通过后才会执行接口流程图；若字段验证不通过，则会直接输出设置的输出结果内容，不执行接口流程图。

c3）“验证类型”中的内容会根据所选字段类型发生变化，选择完验证类型后，需输入对应验证的值，同时选择验证字段后的输出结果。

c4）“输出结果类型配置”用于配置接口的输出结果，详情可参考《SoFlu（后端）全自动开发平台教程第6.2.8节：输出结果组件》。
```

d）单击进入模型编辑，进入接口流程图编辑界面。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-5.png)

##### 图1-5 进入接口流程图编辑界面

e）在窗体视图界面，您可以根据实际开发需求，从左侧控件库中拖拽所需组件至中间的绘图面板，连接好接口流程图，并在右侧属性配置栏，配置好组件的相关属性，流程图编辑完成后，可单击上方保存并退出选项退出界面。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-6.png)

##### 图1-6 编辑组件流程图

```
说明：

e1）接口流程图由组件连接而成，一个流程从开始组件开始，遇到结束组件结束，不允许出现多个开始组件，但可以存在N个结束组件。

e2）为了保证接口流程图的完整性，流程图线条必须完整，不允许存在组件未被连接、组件未连接下一个节点（结束组件除外）等，若编辑的接口流程图不符合规范，当您单击“保存”或“保存并退出”选项时，系统会给予相应的提示，您可以选择继续退出当前流程图编辑界面，但当前不合规接口流程图仅为暂时保存，可进行提交操作但无法发布该不合规接口，若您对该不合规接口执行测试用例，执行的接口为暂存前符合规范的完整流程图，只有暂存的接口流程图编辑完整符合规范后，才可以成功发布接口并执行测试用例。
```

f）退出流程图编辑界面后，单击三个点按钮，选择发布接口。新增接口完成，后续您可以对该接口进行测试用例、仿真测试等操作。

![输入图片说明](../../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/4.%20%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/13.%20%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/1.%20%E6%8E%A5%E5%8F%A3/1-7.png)

##### 图1-7 选择发布接口

```
说明：

f1）若您后续对接口基本信息或入口参数做了修改，则需要单击提交按钮后才能保存修改后的数据；

f2）若您修改的是接口流程图的内容，则直接发布接口即可发布最新的流程图，无需单击提交按钮。
```
