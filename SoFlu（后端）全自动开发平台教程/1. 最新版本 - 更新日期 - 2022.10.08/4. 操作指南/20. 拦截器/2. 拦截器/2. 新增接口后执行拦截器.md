### 4. 操作指南

#### 4.20 拦截器

#### 4.20.2 拦截器

#### 4.20.2.2 新增接口后执行拦截器

接口后执行拦截器，即在接口执行完成后，再执行拦截器。

适用情况：执行拦截器时，需要用到接口返回的相关参数。

#### 4.20.2.2.1 前提条件

a）您需要拥有“拦截器”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

#### 4.20.2.2.2 步骤引导

a）新增接口后执行拦截器

b）接口管理绑定拦截器

#### 4.20.2.2.2.1 新增接口前执行拦截器

a）进入拦截器页面，选择已创建的拦截器模块，单击旁边的“+”按钮，选择“新增拦截器”。

b）进入新增拦截器页面，填写拦截器基本信息，执行类型选择“接口后执行”，单击“下一步”。

![image](https://user-images.githubusercontent.com/79617492/199925069-7a53fa20-35b9-4fd0-b336-3b0c61932a04.png)

##### 图2-1 填写拦截器基本信息

c）进入拦截器参数列表页面，单击“选择输出结果”。

![image](https://user-images.githubusercontent.com/79617492/199925082-98eee17b-de5c-41e3-a390-07baf5e2e1de.png)

##### 图2-2 单击“选择输出结果

d）选择与绑定接口对应的输出结果，若没有，则单击“新增输出结果”进行创建即可。

![image](https://user-images.githubusercontent.com/79617492/199925095-b8b356e0-566a-4aba-af8d-eda1cb3fccfb.png)

##### 图2-3 选择与绑定接口对应的输出结果

##### 注意：接口后执行拦截器选择的输出结果必需与绑定的接口选择的输出结果项一致，因为接口的输出结果项的值是作为拦截器的接口入参，若两者不一致，拦截器则无法获取到接口响应的字段信息。

e）选择完输出结果，单击提交。

![image](https://user-images.githubusercontent.com/79617492/199925112-96ab5724-fd00-48ed-8291-62726a220001.png)

##### 图2-4 单击提交

f）单击进入模型编辑，进入流程图编辑。

![image](https://user-images.githubusercontent.com/79617492/199925142-1c85555f-363c-49b6-9149-b5c950db37db.png)

##### 图2-5 进入流程图编辑

g）拦截器流程图编辑完成后，单击保存并退出。

![image](https://user-images.githubusercontent.com/79617492/199925163-26b980d8-6981-49cb-8888-04076597d8a5.png)

##### 图2-6 单击保存并退出

h）回到编辑拦截器页面，单击提交再次提交拦截器信息，然后单击测试用例检验拦截器接口是否可以正常运行。

![image](https://user-images.githubusercontent.com/79617492/199925182-d7979e6b-65af-4290-9aca-dee8fdae1d69.png)

##### 图2-7 提交拦截器信息并检验运行状况

#### 4.20.2.2.2.2 接口管理绑定拦截器

a）进入接口管理页面，单击新增接口模块旁边的三个点按钮，选择“拦截器白名单设置”。

![image](https://user-images.githubusercontent.com/79617492/199925199-a8d1fd34-d5e1-4763-85aa-7b7950e6a243.png)

##### 图2-8 选择“拦截器白名单设置”

b）选择接口后执行的拦截器，并设置拦截还是放行，再选择需要指定的接口，单击应用即可。

![image](https://user-images.githubusercontent.com/79617492/199925224-ec4725d5-a676-4dbd-9dbe-43f67da09e74.png)

##### 图2-9 配置拦截器相关信息

```
说明：

b1）一个拦截器可以应用多个接口，勾选需要执行拦截器的接口即可。

b2）拦截：只有勾选的接口会执行拦截器，其它不勾的接口不会执行拦截器。

b3）放行：只有勾选的接口不会执行拦截器，其它不勾选的接口会执行该拦截器
```

##### 注意：切换接口拦截还是接口放行时，系统会清除清除之前的设置，以当前设置为准。
