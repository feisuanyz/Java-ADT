### 5. 案例场景

#### 5.2 常见案例

#### 5.2.7 计算学生各科总成绩

本节案例主要实现通过录入学生学号，查询该学生各科成绩，从而计算该学生的各科成绩总和。案例不仅涉及单SQL组件、单函数组件、计数器组件、赋值组件等多种组件的使用，还综合运用了资源实例、实体模型、SQL管理、接口生成器功能模块，可以较好地体现全自动开发平台的功能。

#### 5.2.7.1 准备工作

a）在数据库中准备3张数据表并配上相应的数据。

学生表：

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/image.png)

##### 图1-1 学生表

课程表：

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-2.png)

##### 图1-2 课程表

成绩表：

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-3.png)

##### 图1-3 成绩表

b）创建项目（可参见《SoFlu（后端）全自动开发平台教程第2.1节：如何创建项目》）

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-4.png)

##### 图1-4 创建项目

c）向项目中添加组件、平台自定义函数、数据库中间件资源等加载项（可参见《SoFlu（后端）全自动开发平台教程第2.2节：如何加载资源》）

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-5.png)

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-6.png)

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-7.png)

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-8.png)

##### 图1-5/6/7/8 添加组件

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-9.png)

##### 图1-9 添加函数加载项

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-10.png)

##### 图1-10 数据库中间件加载项

d）使用数据库中间件资源创建嵌入式直连DB连接

可以采用直接填写配置项，也可以通过点击数据库连接来配置。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-11.png)

##### 图1-11 直接填写配置项

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-12.png)

##### 图1-12 点击数据库连接

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/2.%20%E5%B8%B8%E8%A7%81%E6%A1%88%E4%BE%8B/7.%20%E8%AE%A1%E7%AE%97%E5%AD%A6%E7%94%9F%E5%90%84%E7%A7%91%E6%80%BB%E6%88%90%E7%BB%A9/1-13.png)

##### 图1-13 修改数据库连接
