### 5. 案例场景

#### 5.4 综合案例

#### 5.4.4 身份证识别

本实例是结合腾讯云实现身份证识别的功能，实例仅用到了平台中的单函数组件和输出组件，可适用于实名认证APP、信用卡申请、海关物流等多种不同的业务场景。

#### 5.4.4.1 效果展示

进入全自动开发平台“身份证识别”功能接口测试用例页面，在接口入参处上传身份证图片文件，并输入身份证文件的类型（即上传的身份证文件为正面还是反面），启动可视化日志后执行该接口，即可返回身份证图片上的个人信息，如图4-1所示。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-1.png)

##### 图4-1 测试用例编辑页面

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-2.png)

##### 图4-2 身份证信息展示

#### 5.4.4.2 准备工作

a）提前准备一个开通了文字识别服务的腾讯云账号。

##### 说明：

##### 关于如何注册腾讯云账号可参见[文档1](https://cloud.tencent.com/document/product/378/17985)（文档中心 > 账号相关 > 注册腾讯云）

##### 关于如何开通文字识别服务可参见[文档2](https://cloud.tencent.com/document/product/866/34681)（文档中心 > 文字识别 > 快速入门 > 一分钟接入服务端 API） 

b）需进入腾讯云控制台获取相关参数，放入全自动开发平台配置组管理中，如图4-3所示。

##### 说明：此处的参数字段分别为secretId（腾讯云密钥secretId）、secretKey（腾讯云密钥secretId），其参数值均可以在腾讯云控制台获取。因本案例需与腾讯云结合使用，具体的参数值需要用户自行创建密钥，如图4-4所示。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-3.png)

##### 图4-3 配置组展示

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-4.png)

##### 图4-4 腾讯云控制台

##### 注意：若对于如何新增配置组不清晰，可参见《SoFlu（后端）全自动开发平台教程第4.17.1节：新增配置组》

#### 5.4.4.3 流程图设计概览

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-5.png)

##### 图4-5 接口流程图

逻辑描述：

a）将上传的身份证图片文件转换为base64字符串；

b）构建身份证识别函数所需的参数；

c）将构建参数传入身份证识别函数；

d）根据身份证识别函数返回值，构建身份证显示信息。

e）使用输出结果组件输出上一步构建的身份证显示信息。

#### 5.4.4.4 技术要点说明

本案例主要通过身份证识别函数idCardOcr(Map params) 实现，函数说明如下所示。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-6.png)

##### 图4-6 函数说明

#### 5.4.4.5 全自动开发平台具体操作过程

#### 5.4.4.5.1 新增身份证识别接口 

a）进入全自动开发平台“接口管理”功能模块，新增接口模块并新增一个接口，填写接口的基本信息。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-7.png)

##### 图4-7 新增接口

#### 5.4.4.5.2 配置接口的入口参数

a）此处需配置String类型参数idCardType（身份证类型）用于区分身份证正反面，File类型参数idCardFile（身份证文件）用于上传身份证文件，如图4-8所示。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-8.png)

##### 图4-8 配置接口入参

#### 5.4.4.5.3 模型编辑

a）单击“进入模型编辑”，您可以在窗体视图页面，通过拖拽左侧组件列表中的组件进行接口流程图的设计。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-9.png)

##### 图4-9 进入模型编辑器

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/5.%20%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/4.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/4-10.png)

##### 图4-10 模型编辑器

#### 5.4.4.5.4 组件的具体配置（按逻辑描述展示）
