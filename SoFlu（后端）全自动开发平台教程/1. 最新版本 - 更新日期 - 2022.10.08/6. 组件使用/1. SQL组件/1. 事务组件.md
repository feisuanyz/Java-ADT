### 6. 组件使用

#### 6.1 SQL组件

#### 6.1.1 事务组件

当接口流程图中需要执行多个SQL组件时，为了防止其中有任意一个SQL组件执行出现异常，导致前面已执行通过的SQL组件所产生的数据成为脏数据，这时可使用事务组件进行回滚操作，回到未执行前的状态。

#### 6.1.1.1 前提条件

项目中已加载“开始事务”和“提交事务”组件。

#### 6.1.1.2 操作步骤

a）在窗体视图左侧组件列表“SQL”分类下，找到“开始事务”和“提交事务”组件，拖拽至绘图面板，连接好组件的流程图。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/1.%20SQL%E7%BB%84%E4%BB%B6/image.png)

##### 图1-1 连接组件的流程图1

##### 说明：事务组件必须是以“开始事务”为始，到“提交事务”为止，两个事务组件位置不可颠倒，也不可缺少任意一个，为固定搭配使用。

b）选择SQL组件放置在事务组件之间（此处以单SQL组件为例），连接好组件的流程图。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/1.%20SQL%E7%BB%84%E4%BB%B6/1-2.png)

##### 图1-2 连接组件的流程图2

##### 说明：所有SQL组件都必须放置在“开始事务”和“提交事务”组件之间才有效，不在事务组件之间的SQL组件不生效，其它组件也不生效，事务组件只针对SQL组件。

c）选中单SQL组件，填写单SQL组件的名称和描述，单击未选中记录配置SQL信息。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/1.%20SQL%E7%BB%84%E4%BB%B6/1-3.png)

##### 图1-3 单击未选中记录配置SQL信息

d）进入“填写数据”页面，选择SQL名称，并设置流程变量。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/1.%20SQL%E7%BB%84%E4%BB%B6/1-4.png)

##### 图1-4 填写数据

##### 注意：事务组件只能用于新增、修改、删除SQL语句，查询SQL语句不存在事务的情况。

e）SQL信息配置完成后，单击确定即可，事务组件设置完毕。
