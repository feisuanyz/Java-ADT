### 6. 组件使用

#### 6.1 SQL组件

#### 6.1.6 提交事务

当接口流程图中需要执行多个SQL组件时，为了防止其中有任意一个SQL组件执行出现异常，导致前面已执行通过的SQL组件所产生的数据成为脏数据，这时可使用事务组件进行回滚操作，回到未执行前的状态。提交事务是事务组件的结束节点，需要和开始事务配合使用，在开始事务和提交事务之间，可以放置SQL组件，事务组件只针对SQL组件。

#### 6.1.6.1 前提条件

项目中已加载“提交事务”组件。

#### 6.1.6.2 操作步骤

a）在流程编辑器 > 左侧组件列表 > “SQL”分类下，将 “提交事务” 组件，拖拽至 “开始事务” 组件下方，连接好组件的流程图。

##### 说明：事务组件必须是以“开始事务”为始，到“提交事务”为止，两个事务组件位置不可颠倒，也不可缺少任意一个，为固定搭配使用。

![image](https://user-images.githubusercontent.com/79617492/229702930-5946c05b-45a3-467f-894d-b892007ce675.png)

##### 图6-1 连接好组件的流程图

b）在右侧属性栏，填写提交事务组件的名称、描述等属性。

![image](https://user-images.githubusercontent.com/79617492/229702945-d8d5780b-2776-48c3-ae38-24d643abe6e2.png)

##### 图6-2 填写提交事务组件的信息

c）选择SQL组件放置在事务组件之间（此处以单SQL组件为例），连接好组件的流程图。

```
说明：

c1）所有SQL组件都必须放置在“开始事务”和“提交事务”组件之间才有效，不在事务组件之间的SQL组件不生效，其它组件也不生效，事务组件只针对SQL组件。

c2）事务组件只能用于新增、修改、删除SQL语句，查询SQL语句不存在事务的情况。
```

![image](https://user-images.githubusercontent.com/79617492/229702971-125cbe72-c948-4d97-92e5-2924be997d15.png)

##### 图6-3 放置SQL组件

d）选中单SQL组件，填写单SQL组件的名称和描述，单击未选中记录配置SQL信息。

![image](https://user-images.githubusercontent.com/79617492/229702983-51145e34-6a52-4852-973e-721200a95ac3.png)

##### 图6-4 单击未选中记录配置SQL信息

e）在填写数据”页面，选择SQL名称，并设置流程变量，配置完单击确定即可。

![image](https://user-images.githubusercontent.com/79617492/229702995-db6d7fb5-6daa-4fb8-bc71-62489b2032e5.png)

##### 图6-5 设置流程变量
