### 6. 组件使用

#### 6.2 工具组件

#### 6.2.3 子流程批处理组件

系统提供该功能，当需要通过子流程批量执行某个操作时，可使用子流程批处理组件，比如通过子流程批量插入数据等。

#### 6.2.3.1 前提条件

a）项目中已加载子流程批处理组件。

b）您需要在子流程管理模块建有所需的子流程。

c）您需要在资源实例中新增线程池的资源实例。

#### 6.2.3.2 操作步骤

a）在窗体视图左侧组件列表，找到子流程批处理组件，拖拽至绘图面板。

b）选中子流程批处理组件，填写组件的基本信息，然后单击资源实例处选择记录。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-1.png)

##### 图3-1 填写组件的基本信息

c）选择线程池资源实例，单击确定。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-2.png)

##### 图3-2 选择线程池资源实例

##### 说明：线程池会根据子流程入参列表的记录数来分配同时执行子流程任务的线程数。

d）单击子流程名称处选择记录。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-3.png)

##### 图3-3 单击子流程名称处选择记录

e）选择所需使用的子流程后，单击确定。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-4.png)

##### 图3-4 选择所需使用的子流程

f）单击子流程入参列表处录入参数。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-5.png)

##### 图3-5 单击子流程入参列表处录入参数

g）子流程入参选择流程变量，再单击确定即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-6.png)

##### 图3-6 选择流程变量

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/2.%20%E5%B7%A5%E5%85%B7%E7%BB%84%E4%BB%B6/3-7.png)

##### 图3-7 勾选是否汇总子流程出参

```
说明：

g1）子流程入参的数据类型必须为List列表类型，List列表可以有多条数据，入参方式可以选择接口、全局变量、局部变量或其他组件返回的值。

g2）是否汇总子流程出参：打开按钮后会将所有子流程执行的出参汇总成一条结果返回，若不勾选，则单独返回每条记录的出参结果。
```
