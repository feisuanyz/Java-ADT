### 6. 组件使用

#### 6.3 数据库组件

#### 6.3.1 Elasticsearch组件

Elasticsearch是一个分布式、高扩展、高实时的搜索与数据分析引擎，用户可以在平台通过Elasticsearch组件实现分布式全文搜索。

Es实现原理：首先用户将数据提交到Elasticsearch数据库中，通过分词控制器将对应的语句分词，将其权重和分词结果一并存入数据；当用户搜索数据时，再根据权重给结果排名、打分，最后将返回结果呈现给用户。

#### 6.3.1.1 前提条件

a）项目中已加载Elasticsearch组件

b）项目中已创建Elasticsearch资源实例，具体操作可参见《SoFlu（后端）全自动开发平台教程第4.15.1.12节：新增Elasticsearch资源》。

#### 6.3.1.2 步骤引导

a）使用es组件新增数据

b）使用es组件批量新增数据

c）使用es组件更新数据

d）使用es组件删除数据

e）使用es组件查询一条数据

f）使用es组件分页查询数据

g）使用es组件实现聚合查询

h）使用es组件实现分页聚合查询

#### 6.3.1.2.1 使用es组件新增数据

a）在配置接口参数处，添加需要新增数据的字段信息。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%84%E4%BB%B6/image.png)

##### 图1-1 添加需要新增数据的字段信息

b）进入窗体视图，在左侧组件列表找到Elasticsearch组件，拖拽至中间模型编辑区。

##### 说明：若您需与其他组件搭配使用，则选择所需组件连接好组件流程图后，再进行以下Elasticsearch组件的配置即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%84%E4%BB%B6/1-2.png)

##### 图1-2 拖拽Elasticsearch组件

c）选中Elasticsearch组件，单击选择记录方框选择Elasticsearch资源实例。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%84%E4%BB%B6/1-3.png)

##### 图1-3 选择Elasticsearch资源实例
