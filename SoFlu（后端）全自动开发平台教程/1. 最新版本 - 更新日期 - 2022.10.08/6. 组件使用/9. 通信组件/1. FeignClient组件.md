### 6. 组件使用

#### 6.9 通信组件

#### 6.9.1 FeignClient组件

FeignClient组件与Nacos、etcd、consul、eureka等多种注册中心搭配使用，当项目启动时会往已配置的注册中心注册当前项目的信息，注册成功后，可通过FeignClient组件调用第三方的接口。

##### 说明：注册中心有多种不同类型，本节以Nacos注册中心作为示例为您介绍FeignClient组件的使用，您可以根据实际需求选择注册中心服务，关于不同注册中心该如何进行配置，请参考《SoFlu（后端）全自动开发平台教程第7.1章：微服务治理》。

#### 6.9.1.1 前提条件

项目中已加载FeignClient组件、Nacos配置资源、Http通信资源，具体操作可以参考《SoFlu（后端）全自动开发平台教程第2.2.2节：如何加载资源》。

#### 6.9.1.2 步骤引导

a）新增Nacos配置资源实例、Http通信资源实例

b）通过FeignClient组件使用Nacos服务

#### 6.9.1.2.1 新增Nacos配置资源实例、Http通信资源实例

a）进入资源实例功能模块，新增Nacos配置资源实例，输入部署Nacos服务的IP地址和端口号即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/image.png)

##### 图1-1 新增Nacos配置资源实例

```
说明：

a1）isMock：Mock开关，该字段值只能为true或者false，输入其他不生效。

a2）mockReturnResult：Mock开关开启后返回的消息内容。

当调用FeignClient组件相关接口时，若isMock为true，则FeignClient组件直接返回mockReturnResult的消息内容；若isMock为false，则FeignClient组件返回第三方接口的输出结果。
```

b）新增Http通信资源实例，填写调用接口所在项目的项目路径地址即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-2.png)

##### 图1-2 填写调用接口所在项目的项目路径地址

##### 说明：FeignClient组件需使用Http通信资源实例在注册中心服务中找到对应的项目，Http通信资源实例中URL的填写格式为http://项目路径 ，格式必须正确，否则调用接口时会出现报错。

#### 6.9.1.2.2 通过FeignClient组件使用Nacos服务

a）进入窗体视图，选中FeignClient组件，在右侧组件属性栏选择注册中心类型。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-3.png)

##### 图1-3 选择注册中心类型

b）单击选择记录方框，选择对应的注册中心资源实例。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-4.png)

##### 图1-4 单击选择记录方框

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-5.png)

##### 图1-5 选择对应的注册中心资源实例

c）单击未选中记录方框配置http请求参数。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-6.png)

##### 图1-6 配置http请求参数

d）系统显示填写数据页面，选择HTTP资源实例。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-7.png)

##### 图1-7 填写数据页面

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-8.png)

##### 图1-8 选择HTTP资源实例

e）选择调用接口的Http请求方法。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/6.%20%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/9.%20%E9%80%9A%E4%BF%A1%E7%BB%84%E4%BB%B6/1-9.png)

##### 图1-9 选择调用接口的Http请求方法
