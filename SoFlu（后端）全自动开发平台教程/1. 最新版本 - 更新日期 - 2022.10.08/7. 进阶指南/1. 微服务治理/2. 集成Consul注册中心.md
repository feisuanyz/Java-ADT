### 7. 进阶指南

#### 7.1 微服务治理

#### 7.1.2 集成Consul注册中心

Consul是HashiCorp公司推出的开源工具，用于实现分布式系统的服务发现与配置。Consul的形式为“一站式”，内置了服务注册与发现框架、分布一致性协议实现、监控检测、Key/Value存储，以及多数据中心方案等，不再需要依赖其他工具，使用起来也比较简单。本节为您介绍如何在（后端）全自动开发平台使用Consul注册中心的服务。

##### 说明：（后端）全自动开发平台中的项目需通过使用本地客户端或部署项目的方式进行配置，才可在Consule注册中心注册并使用Consule注册中心的服务，未进行配置注册的项目不可以使用Consul注册中心的服务。使用本地客户端和部署项目的详细操作请参见《SoFlu（后端）全自动开发平台教程第2.1节：注册账户》和《SoFlu（后端）全自动开发平台教程第2.9.1节：如何部署项目》。

#### 7.1.2.1 步骤引导

a）配置注册Consul

b）使用Consul服务

#### 7.1.2.1.1 配置注册Consul

a）访问Consul官网下载Consul的最新版本，解压后启动Consul。

b）启动成功后浏览器访问： http://localhost:8500 ，即可看到Consul的管理界面。

c）在使用本地客户端或部署项目时打开bootstrap.yml配置文件，在文件中增加如下配置：

```
consul:  
    enabled: true # 是否开启consul服务注册
    service:
        interval: 2   # 心跳频率（秒）  
    nodes:    
        url: http://127.0.0.1:8500 # consul服务节点，多个服务使用逗号分隔
```

```
说明：

c1）若无bootstrap.yml文件，请手动创建。

c2）注册中心注册优先级为：Nacos >> Consul >> Eureka >> Etcd，使用Consul服务时请确保Nacos注册中心开关为false，如下图所示。
```

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/2-1.png)

##### 图2-1 确保Nacos注册中心开关为false

