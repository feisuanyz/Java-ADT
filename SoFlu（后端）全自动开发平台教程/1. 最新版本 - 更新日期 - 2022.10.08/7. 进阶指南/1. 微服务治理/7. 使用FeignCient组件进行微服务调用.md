### 7. 进阶指南

#### 7.1 微服务治理

#### 7.1.7 使用FeignCient组件进行微服务调用

全自动开发平台提供了FeignClient组件，通过在HTTP通信的资源实例中配置对应接口所在项目的项目路径地址，无需配置IP地址，微服务服务就会去寻找项目路径地址所部署的IP地址，并与请求地址拼接成完整的请求URL，这样就可以请求到其它接口的数据。若项目后续变更环境，也无需修改HTTP通信资源实例中的URL信息。

本节以Nacos为例来介绍如何使用FeignCient组件进行微服务调用。

#### 7.1.7.1 前提条件

项目中已加载好FeignClient组件、Nacos配置资源、Http通信资源，具体《SoFlu（后端）全自动开发平台教程第2.2.2节：如何加载资源》。

![image](https://user-images.githubusercontent.com/79617492/211253355-23913aa9-c6ff-4fee-8bfe-dc3bd49aba0b.png)

##### 图7-1 加载FeignClient组件

![image](https://user-images.githubusercontent.com/79617492/211253364-d45146f9-ac78-4ea4-be09-2c99a6906d36.png)

##### 图7-2 加载Nacos配置资源和Http通信资源

#### 7.1.7.2 操作步骤

#### 7.1.7.2.1 新增Nacos配置资源实例

a）进入全自动开发平台资源实例功能模块，新增Nacos配置资源实例。

![image](https://user-images.githubusercontent.com/79617492/211253383-42fe9e96-dd82-4282-8583-34ec0e85612f.png)

##### 图7-3 单击资源实例

![image](https://user-images.githubusercontent.com/79617492/211253402-6ac2af51-8941-404f-b37b-5f7dbbf044dc.png)

##### 图7-4 新增Nacos配置资源实例

b）输入Nacos部署的IP地址加端口即可。

![image](https://user-images.githubusercontent.com/79617492/211253411-f5c7fcbc-b87c-44c6-ab36-b714cb41dad2.png)

##### 图7-5 输入Nacos部署的IP地址加端口

#### 7.1.7.2.2 新增Http通信资源实例

a）新增Http通信资源实例，填写调用接口所在项目的项目路径地址。

##### 说明：若通过HTTP组件调用该资源实例，则填写IP地址。

![image](https://user-images.githubusercontent.com/79617492/211253428-7d287d9c-9c16-4b9f-a7c2-09c6067f1e8e.png)

##### 图7-6 新增Http通信资源实例

#### 7.1.7.2.3 接口编辑

a）进入接口的流程编辑器中，选择FeignClient组件。

![image](https://user-images.githubusercontent.com/79617492/211253439-412d0e65-13e9-446b-bb36-8fffaa378e6c.png)

##### 图7-7 选择FeignClient组件

b）选中FeignClient组件，Nacos资源实例名称处选择新增的Nacos配置资源实例。

![image](https://user-images.githubusercontent.com/79617492/211253457-7428cc90-f337-4e1e-ae82-e575cdf6949f.png)

##### 图7-8 选择新增的Nacos配置资源实例

c）配置HTTP的请求参数，HTTP的资源名称处选择新增的Http通信资源实例，剩下信息根据所需调用的接口来填写即可。

![image](https://user-images.githubusercontent.com/79617492/211253473-12a3500c-7d63-47fc-a00d-e0e458f59458.png)

##### 图7-9 配置HTTP的请求参数

d）选中输出结果组件，引用FeignClient组件的响应消息体来调用其它接口返回的信息。

![image](https://user-images.githubusercontent.com/79617492/211253490-a1488fb7-2735-4ec3-954b-72bb8755613c.png)

##### 图7-10 引用FeignClient组件的响应消息体

e）运行接口测试用例，查看是否调用成功。

![image](https://user-images.githubusercontent.com/79617492/211253499-997fdc34-1135-4d32-b4b1-5c5376741d64.png)

##### 图7-11 运行接口测试用例
