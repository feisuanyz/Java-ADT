### 7. 进阶指南

#### 7.1 微服务治理

#### 7.1.7 使用FeignCient组件进行微服务调用

全自动开发平台提供了FeignClient组件，通过在HTTP通信的资源实例中配置对应接口所在项目的项目路径地址，无需配置IP地址，微服务服务就会去寻找项目路径地址所部署的IP地址，并与请求地址拼接成完整的请求URL，这样就可以请求到其它接口的数据。若项目后续变更环境，也无需修改HTTP通信资源实例中的URL信息。

本节以Nacos为例来介绍如何使用FeignCient组件进行微服务调用。

#### 7.1.7.1 前提条件

项目中已加载好FeignClient组件、Nacos配置资源、Http通信资源，具体《SoFlu（后端）全自动开发平台教程第2.2.2节：如何加载资源》。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-1.png)

##### 图7-1 加载FeignClient组件

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-2.png)

##### 图7-2 加载Nacos配置资源和Http通信资源

#### 7.1.7.2 操作步骤

#### 7.1.7.2.1 新增Nacos配置资源实例

a）进入全自动开发平台资源实例功能模块，新增Nacos配置资源实例。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-3.png)

##### 图7-3 单击资源实例

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-4.png)

##### 图7-4 新增Nacos配置资源实例

b）输入Nacos部署的IP地址加端口即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-5.png)

##### 图7-5 输入Nacos部署的IP地址加端口

#### 7.1.7.2.2 新增Http通信资源实例

a）新增Http通信资源实例，填写调用接口所在项目的项目路径地址。

##### 说明：若通过HTTP组件调用该资源实例，则填写IP地址。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-6.png)

##### 图7-6 新增Http通信资源实例

#### 7.1.7.2.3 接口编辑

a）进入接口的流程编辑器中，选择FeignClient组件。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-7.png)

##### 图7-7 选择FeignClient组件

b）选中FeignClient组件，Nacos资源实例名称处选择新增的Nacos配置资源实例。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-8.png)

##### 图7-8 选择新增的Nacos配置资源实例

c）配置HTTP的请求参数，HTTP的资源名称处选择新增的Http通信资源实例，剩下信息根据所需调用的接口来填写即可。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/1.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/7-9.png)

##### 图7-9 配置HTTP的请求参数
