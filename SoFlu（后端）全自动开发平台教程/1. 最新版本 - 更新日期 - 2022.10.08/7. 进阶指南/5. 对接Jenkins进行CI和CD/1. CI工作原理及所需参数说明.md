### 7. 进阶指南

#### 7.5 对接Jenkins进行CI和CD

#### 7.5.1 CI工作原理及所需参数说明

本节为您介绍全自动开发平台对接Jenkins进行持续集成的工作原理以及会对构建镜像包所需参数进行说明。

#### 7.5.1.1 平台对接Jenkins进行持续集成的工作原理

a）全自动开发平台对外提供构建镜像包所需的项目下载包地址以及相关所需参数信息。

b）运维人员在Jenkins新建构建任务，并根据平台对外提供的信息自定义编写构建镜像包的脚本。（脚本内部实现逻辑由运维人员自定义）。

c）当用户在平台进行项目发版时，平台会获取到用户配置的JenkinsConfig相关信息，返回构建镜像包所需的其余参数，并通知Jenkins执行构建任务生成镜像包。

d）镜像包生成后，平台便会调用Jenkins接口获取到完整的构建记录显示在平台发版记录中，从而用户可以在平台发版记录中获取到镜像包地址。

#### 7.5.1.2 构建镜像包接口说明

接口地址：http://swg.feisuanyz.com/download/offlineDataPackage

请求方式：GET

请求数据类型：application/x-www-form-urlencoded

#### 7.5.1.3 请求参数

|参数名称|请求类型|是否必须|参数类型|参数说明|
|--|--|--|--|--|
|access_key_id|header|是|String|AccessKey ID|
|access_key_secret|header|是|String|AccessKey Secret|
|environmentIdcId|query|是|String|环境ID|
|releaseRecordId|query|是|String|发布记录ID|
|projectName|query|是|String|项目名称|

#### 7.5.1.4 获取头部参数方法

a）使用主账号登录全自动开发平台，进入控制台，单击右上角头像图标，选择“AccessKey管理”。

![image](https://user-images.githubusercontent.com/79617492/211254999-3acf6e43-663f-4b70-9fa8-8a2add0deed7.png)

##### 图1-1 选择“AccessKey管理”

b）进入AccessKey管理页面，便可获取到AccessKey ID以及AccessKey Secret的值，即access_key_id和access_key_secret的值。

![image](https://user-images.githubusercontent.com/79617492/211255013-99059ed7-9df8-49f0-aa6e-6939f26065a0.png)

##### 图1-2 获取AccessKey相关参数

##### 注意：AccessKey ID 以及AccessKey Secret的值需确保在有效期内。
