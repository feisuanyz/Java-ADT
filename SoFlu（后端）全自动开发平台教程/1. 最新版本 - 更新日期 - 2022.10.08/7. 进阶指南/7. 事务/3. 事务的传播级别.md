### 7. 进阶指南

#### 7.7 事务

#### 7.7.3 事务的传播级别

传播级别是指如果在开始当前事务之前，一个事务上下文已经存在，此时有若干选项可以指定一个事务性方法的执行行为。系统支持事务设置传播级别，通过设置传播级别，可以极大的避免出现逻辑处理失败导致的脏数据等问题。

#### 7.7.3.1 操作步骤

a）新增子流程C，“开启事务”组件里选择 “MANDATORY” 的事务传播行为，其它同理。

```
传播级别说明：

a1）REQUIRED：如果当前存在事务，则加入该事务；如果不存在事务，则创建一个新的事务。

a2）SUPPORTS：如果当前存在事务，则加入该事务；如果不存在事务，则无事务执行。

a3）MANDATORY：如果当前存在事务，则加入该事务；如果不存在事务，则抛出异常。

a4）REQUIRES_NEW：如果当前存在事务，则将这个事务挂起，重新创建一个新的事务。

a5）NOT_SUPPORTED：如果当前存在事务，则将这个事务挂起，然后无事务执行。

a6）NEVER：如果当前存在事务，则抛出异常。

a7）子流程C逻辑：先新增表数据，最后提交事务。
```

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/7.%20%E4%BA%8B%E5%8A%A1/3-1.png)

##### 图3-1 选择 “MANDATORY” 的事务传播行为

b）新增D接口。

```
说明：

b1）接口D 逻辑：先新增表数据，然后执行子流程C。

b2）D接口无事务执行。
```

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/7.%20%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/7.%20%E4%BA%8B%E5%8A%A1/3-2.png)

##### 图3-2 新增D接口
