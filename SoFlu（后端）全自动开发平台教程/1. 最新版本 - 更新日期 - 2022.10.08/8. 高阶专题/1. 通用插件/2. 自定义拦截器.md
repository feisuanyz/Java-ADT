### 8. 高阶专题

#### 8.1 通用插件

#### 8.1.2 自定义拦截器

拦截器的定义需要按照以下方式进行，然后存放到项目中的resources目录下名为plugins.xml的文件中，并一起打成jar包上传到平台即可。

#### 8.1.2.1 前提条件

自定义插件需要下载如下Demo工程包和加载项开发包，具体如下：

a）插件Demo工程包下载地址：demo-plugin.zip

b）下载加载项开发包：在(后端)全自动开发平台中，单击右上角下载加载项开发包，如图2-1所示。

![输入图片说明](../../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/1.%20%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%20-%20%E6%9B%B4%E6%96%B0%E6%97%A5%E6%9C%9F%20-%202022.10.08/8.%20%E9%AB%98%E9%98%B6%E4%B8%93%E9%A2%98/1.%20%E9%80%9A%E7%94%A8%E6%8F%92%E4%BB%B6/image.png)

##### 图2-1 下载加载项开发包

#### 8.1.2.2 操作步骤

a）在pom文件中增加依赖包。

包名：com.feisuanyz.flow.core.cmpt.interceptor.FlowInterceptor

类名：FlowInterceptor

```
<dependency>
     <groupId>com.feisuanyz.flow</groupId>
     <artifactId>flow-core-cmpt</artifactId>
     <version>${version}</version>
     <scope>provided</scope>
     <systemPath>${开发辅助工具路径}/flow-core-cmpt-${version}.jar</systemPath>
</dependency>
```

b）实现FlowInterceptor接口。

包名：com.feisuanyz.flow.core.cmpt.interceptor.FlowInterceptor

类名：FlowInterceptor

实现方法：

```
/** 
* <p>
* 	 拦截器操作需要在该方法中实现
* </p>
*/
@Override
public boolean preHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) 
@Override
public void afterCompletion(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Map<String, Object> map)
```
