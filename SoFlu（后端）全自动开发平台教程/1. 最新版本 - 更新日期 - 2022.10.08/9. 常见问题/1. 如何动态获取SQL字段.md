### 9. 常见问题

#### 9.1 如何动态获取SQL字段

(后端)全自动开发平台支持动态获取SQL字段（包含表名、字段名和字段值），即SQL语句中的表名和字段名可通过 ${变量名} 格式进行动态获取，字段值可通过 #{变量名} 格式进行动态获取，使用时将对应的表名、字段名和字段值以参数形式传进来即可。

本节将通过简单示例为您介绍在接口中动态获取SQL字段的具体操作过程及相关使用注意事项。

#### 9.1.1 前提条件

a）您已完成创建SQL组、SQL模块操作。

b）动态获取表名和字段名需要SQL语句所在SQL组已打开“动态字段/表名功能”按钮；动态获取字段值则可以直接使用。

![image](https://user-images.githubusercontent.com/79617492/211454380-dbe672f0-15f1-4c8c-9fdb-61cd43874dbf.png)

##### 图1-1 打开“动态字段/表名功能”按钮

#### 9.1.2 操作步骤

##### 本节通过从产品表product_info中以产品类型查询产品信息作为示例进行说明，数据表如下所示：

![image](https://user-images.githubusercontent.com/79617492/211454396-4eff1415-48ba-43c9-b098-cde01bde77e0.png)

##### 图1-2 数据表

a）配置接口参数

在配置接口参数处定义需进行动态获取的参数。

![image](https://user-images.githubusercontent.com/79617492/211454408-58db5114-483f-471e-a2a3-daf5fac847f5.png)

##### 图1-3 配置接口参数

##### 注意：此处定义的参数需与SQL语句中SQL字段参数保持一致，否则将无法传参。

b）接口模型编辑

b1）在窗体视图中使用了一个单SQL组件和一个输出结果组件来实现功能，单SQL组件中的SQL语句如下所示。

![image](https://user-images.githubusercontent.com/79617492/211454428-374468c7-1499-40d8-aab9-69d18751edce.png)

##### 图1-4 流程图

![image](https://user-images.githubusercontent.com/79617492/211454445-c9e64bf8-a88e-4ff0-bc09-0314f2e4437d.png)

##### 图1-5 单SQL组件中的SQL语句

```
注意：

b1-1）SQL语句中动态获取的参数字段需与上一步骤中定义的接口参数保持一致，否则将无法传参。

b1-2）select查询语句查询字段使用动态获取时，每个字段需取一个别名，如上图中的${str1} as id；其他语句没有这样的限制。

b1-3）若SQL语句中表名或字段名使用动态获取，则SQL在线调试功能将无法执行SQL语句。

b1-4）动态获取字表名/字段格式为${xxx}，动态字段值格式为#{xxx}，两者有所区别，不可颠倒。
```

b2）单SQL组件的入参选择接口参数即可。

![image](https://user-images.githubusercontent.com/79617492/211454465-37250a5d-9aa2-4da4-8786-5da0b26df8a7.png)

##### 图1-6 选择接口参数

c）接口测试用例，查看结果

提交发布接口后，编辑测试用例，填写需传入的参数值，执行测试用例，查看执行结果。

![image](https://user-images.githubusercontent.com/79617492/211454480-ff7a7dae-2b45-4a52-812f-1133fe5956fd.png)

##### 图1-7 编辑测试用例

![image](https://user-images.githubusercontent.com/79617492/211454498-8a5b8b3f-8785-47a8-9427-65b554ae779a.png)

##### 图1-8 查看执行结果
