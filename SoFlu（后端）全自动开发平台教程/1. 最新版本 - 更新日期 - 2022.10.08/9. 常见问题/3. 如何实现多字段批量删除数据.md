### 9. 常见问题

#### 9.3 如何实现多字段批量删除数据

平台支持通过接口来实现单字段批量删除数据，在接口中以 List< Map > 或其它基本类型方式做为入参，然后通过循环的方式取出Map中的数据，最后执行删除SQL语句，即可批量删除数据。

#### 9.3.1 操作步骤

a）新建接口，在“入参列表”中新增一个类型为 List< Map > 的参数作为入参，然后单击提交。

![image](https://user-images.githubusercontent.com/79617492/211478867-f995318b-c756-452c-8e5d-e52e4945e78e.png)

##### 图3-1 新增一个类型为 List< Map > 的参数

b）进入流程编辑器，拖入一个单函数组件到流程上，然后点击单函数组件，点击右边的未选中记录。

![image](https://user-images.githubusercontent.com/79617492/211478884-e737fb4f-b6f6-4b0d-9d2c-0784ea63f049.png)

##### 图3-2 点击未选中记录

c）选择自定义函数，选择List函数，取出入参大小（size）。

![image](https://user-images.githubusercontent.com/79617492/211478902-869b500c-0fd9-4dff-bce5-6511e6edae71.png)

##### 图3-3 填写函数数据

d）取出大小后，拖入一个计数器组件进行循环操作，右边的循环流程变量选择上一步的单函数返回结果，操作符选择递增。

##### 说明：根据list的长度进行循环。每循环一次，计数器组件次数+1。

![image](https://user-images.githubusercontent.com/79617492/211478923-15dfb36c-74b1-4073-886e-3cfeaccd1ef0.png)

##### 图3-4 进行循环操作

e）在计数器下方添加互斥组件，用于判断循环是否结束。

![image](https://user-images.githubusercontent.com/79617492/211478942-693e8345-859d-4c02-b725-e5a09a641441.png)

##### 图3-5 添加互斥组件

未退出时流转条件（当计数器的值小于list的长度时，则继续循环）：

![image](https://user-images.githubusercontent.com/79617492/211478954-b26ed63d-b253-4740-a8ef-dba040645e95.png)

##### 图3-6 未退出时流转条件

退出时流转条件（当计数器的值大于等于list的长度时，则退出循环）：

![image](https://user-images.githubusercontent.com/79617492/211478975-b6c79a74-819f-4a60-9479-1c4ff02a3a2b.png)

##### 图3-7 退出时流转条件

f）在未退出的分支下拖入一个单函数组件，单击右侧未录入单函数信息。

![image](https://user-images.githubusercontent.com/79617492/211478990-bcc70516-c1b5-4940-b424-c2c885a3deb2.png)

##### 图3-8 单击右侧未录入单函数信息

g）在“填写数据页面”，选择Map函数，去构建Map拿到每次循环的值，构建完成后单击确定。

##### 说明：每循环一次，都将循环的结果放在Map中存储。

![image](https://user-images.githubusercontent.com/79617492/211479016-ac02cab1-8a7d-45ce-91da-5d6adb4dac97.png)

##### 图3-9 填写数据

h）在流程中拖入一个单SQL组件，编写具体的SQL信息。

##### 说明：SQL语句示例（如图3-10），每次循环取出的id,name值都给SQL语句赋值，然后执行SQL进行删除操作。

![image](https://user-images.githubusercontent.com/79617492/211479040-07a4c099-d837-4c8d-aa9f-d571b99aa6c7.png)

##### 图3-10 SQL语句示例

![image](https://user-images.githubusercontent.com/79617492/211479054-a59115b1-60bd-4c9d-9c25-eddabfd73617.png)

##### 图3-11 编写具体的SQL信息

i）单击入参中的选择流程变量，选择入参，选择完成后单击确定。

![image](https://user-images.githubusercontent.com/79617492/211479072-e7181195-6b4f-4c19-a723-7b170dfbd1a8.png)

##### 图3-12 选择入参

j）返回“模型编辑页面”，拖入一个“输出结果”组件到流程中，选择对应“响应结果”。

![image](https://user-images.githubusercontent.com/79617492/211479087-9ba205fb-26d0-45f6-b2cf-a6ed4f3e737e.png)

##### 图3-13 选择对应“响应结果”

k）选中“输入结果组件”，单击右侧未选中记录，选择对应的“输出项值”，选择完成后单击确定。

![image](https://user-images.githubusercontent.com/79617492/211479099-255b7e26-98a8-4ee3-9cb3-676751a88541.png)

##### 图3-14 选择对应的“输出项值”

l）返回“模型编辑页面”，保存流程并退出，在接口编辑页面提交并发布接口，之后单击测试用例进行单元测试即可。

![image](https://user-images.githubusercontent.com/79617492/211479114-d7688495-1bdd-4c5b-8806-b7a38a1e76fe.png)

##### 图3-15 提交并发布接口
