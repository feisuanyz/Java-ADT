### 1. 拦截器

#### 1.1 新增拦截器模块

本节主要介绍如何在项目中新增拦截器模块的具体操作过程。

##### 1.1.1 操作步骤

a）进入全自动开发平台功能模块界面，选择“拦截器”功能模块，如图1-1所示：

![image](https://user-images.githubusercontent.com/79617492/172578091-f818630b-faca-4e44-9359-e8d8f8d4e7ae.png)

##### 图1-1 选择拦截器功能

b）单击“新增拦截器模块”，系统弹出新增拦截器模块页面，如图1-2、图1-3所示：

![image](https://user-images.githubusercontent.com/79617492/172578120-a9f886b1-3d97-4f1f-8564-bf472c24e46b.png)

##### 图1-2 单击新增拦截器模块

![image](https://user-images.githubusercontent.com/79617492/172578148-58b61fa0-c173-4c94-9c54-4f2f33d50692.png)

##### 图1-3 新增拦截器模块

c）输入拦截器模块的名称和描述，单击“确定”，可以看到拦截器模块新增成功，如图1-4所示：

![image](https://user-images.githubusercontent.com/79617492/172578169-c229ad28-a778-46c6-b311-abcb1d6a3632.png)

##### 图1-4 新增成功

#### 1.2 新增拦截器

系统提供该功能，用户可以在平台以画流程图的方式新增一个接口前执行或者接口后执行的拦截器，并可在接口管理中设置拦截器白名单。

##### 前提条件

a）您需要拥有“拦截器”模块的权限。

b）权限由系统管理员在“用户权限中心”系统中配置。

##### 操作步骤

拦截器有两种执行类型：接口前执行和接口后执行，用户可按需选择。

##### 1.2.1 操作步骤：新增接口前执行拦截器

a）选中拦截器模块，单击添加按钮，选择“新增拦截器”，如图1-5所示：

![image](https://user-images.githubusercontent.com/79617492/172578213-b8fe39e4-4560-4ca7-b48e-83a8bd6ad36a.png)

##### 图1-5 新增拦截器

b）填写拦截器的基本信息，执行类型选择接口前执行，如图1-6所示：

![image](https://user-images.githubusercontent.com/79617492/172578244-184a5f24-7c3b-4f3e-9f5f-90e560e20931.png)

##### 图1-6 选择接口前执行

c）填写完成后，单击“提交”。

d）单击“进入模型编辑”，根据需求绘制拦截器的流程图，如图1-7所示：

![image](https://user-images.githubusercontent.com/79617492/172578303-b459947c-a618-4399-a45d-35f4b0ba2337.png)

##### 图1-7 绘制流程图

##### 说明：

此处我们简单以新增一条SQL记录作为示例。

若想要拦截器程序运行结束后不执行接口操作，则需要在流程图中的输出结果配置` result `字段，` 1 `代表继续执行后续接口，` 0 `代表不执行后续接口。如无该字段，系统默认为` 1 `。

e）绘制完成后，单击“保存并退出”

f）单击“提交”

g）单击“测试用例”，测试拦截器是否可以正常运行。

##### 说明：

若无测试用例，则自行新增即可。

h）测试用例成功后，继续对接口进行拦截器白名单设置。

i）单击“接口管理”，单击“新增接口模块”旁边的三个点符号，选择“拦截器白名单设置”，如图1-8所示：

![image](https://user-images.githubusercontent.com/79617492/172578355-eeff3746-971a-401e-ba3f-a420c5f77e24.png)

##### 图1-8 选择拦截器白名单设置

j）选择对应的拦截器，勾选对应的接口，单击“应用”即可，如图1-9所示：

![image](https://user-images.githubusercontent.com/79617492/172578409-02cd2c71-be16-4535-88c8-0633e57ee188.png)

##### 图1-9 应用接口前执行拦截器

##### 1.2.2 操作步骤：新增接口后执行拦截器

a）选中拦截器模块，单击添加按钮，选择“新增拦截器”。

b）填写拦截器的基本信息，执行类型选择接口后执行，如图1-10所示：

![image](https://user-images.githubusercontent.com/79617492/172578448-c067dcb1-00dc-4eb6-8304-8c166d786cc9.png)

##### 图1-10 选择接口后执行

c）单击“下一步”。

d）单击“选择输出结果”，选择输出结果项，如图1-11所示：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/21.%20%E6%8B%A6%E6%88%AA%E5%99%A8/1-11.png)

##### 图1-11 选择输出结果项

##### 注意：此处选择的输出结果项必须与接口的输出结果组件选择的输出结果项一致。

e）选择完成后，单击“确认”。

f）单击“提交”。

g）单击“进入模型编辑”，根据需求绘制拦截器的流程图，如图1-12所示：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/21.%20%E6%8B%A6%E6%88%AA%E5%99%A8/1-12.png)

##### 图1-12 绘制流程图

##### 说明：此处我们简单以新增一条SQL记录作为示例，输出结果项可以任意选择。

h）绘制完成后，单击“保存并退出”。

i）单击“提交”。

j）之后步骤与新增接口前执行拦截器步骤相同。
