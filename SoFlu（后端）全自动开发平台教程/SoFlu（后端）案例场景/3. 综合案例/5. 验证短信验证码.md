### 5. 验证短信验证码

#### 5.1 验证短信验证码

本案例在《发送验证码功能》基础上进行，您需要做好发送短信验证码功能的准备工作并实现其功能后，再进行验证短信验证码的功能实现及测试。验证短信验证码的实现也是主要用到平台中的单函数组件、单SQL组件、互斥条件组件，通过流程图，您可以清晰地看出组件间的逻辑关系。

##### 5.1.1 效果展示

通过调用验证短信验证码接口，传入接收到的验证码及对应手机号后，即输出相关验证信息。

本实例设置的验证码有效时长为2分钟，若超过2分钟，则输出验证码失效信息；若根本未发送过该验证码，则输出验证失败信息；否则输出验证成功信息，如下图所示：

![image](https://user-images.githubusercontent.com/79617492/179951788-04d3f9b2-7e14-433e-9ee6-1d1da883b762.png)

##### 图5-1 编辑接口测试用例

验证码失效：

![image](https://user-images.githubusercontent.com/79617492/179951841-e2ae9bc1-4d52-405b-b11a-5c19b2195995.png)

##### 图5-2 验证码失效

验证失败：

![image](https://user-images.githubusercontent.com/79617492/179951875-7754d995-b677-4fba-8617-e69e80b3cb5e.png)

##### 图5-3 验证失败

验证成功：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-4.png)

##### 图5-4 验证成功

##### 5.1.2 流程图设计概览

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-5.png)

##### 图5-5 流程图概览

逻辑描述：

a）根据接口入参【手机号】【验证码】在短信表查询对应短信记录。

b）判断短信表中是否有对应短信记录，若没有对应短信记录，则输出验证失败结果；若存在对应短信记录，则继续以下流程。

c）构建查询参数【paramId】。

d）根据【paramId】的值查询参数表。

e）获取超时时间，即【当前短信记录的创建时间】累加【验证码有效时长】后的时间。

f）获取【当前系统时间】与【超时时间】的间隔时长。

g）根据间隔时长判断验证码是否失效，若间隔时长大于0，说明验证码已超时，输出验证码失效结果；若间隔时长小于等于0，说明验证码未超时，输出验证成功结果。

##### 5.1.3 操作步骤

a）新增验证短信验证码接口

进入全自动开发平台“接口管理”功能模块，新增接口模块并新增一个接口，填写接口的基本信息。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-6.png)

##### 图5-6 点击接口管理

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-7.png)

##### 图5-7 填写接口基本信息

b）配置接口的入口参数

此处需配置两个String类型的参数verifyCode（验证码）、receiverMobile（对应手机号），用于之后的查询操作。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-8.png)

##### 图5-8 配置入口参数

c）模型编辑

通过拖拽左侧组件列表中所需的组件进行模型编辑（即流程图编辑）。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-9.png)

##### 图5-9 进入模型编辑

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-10.png)

##### 图5-10 进行模型编辑

##### 5.1.4 组件的具体配置（按逻辑描述展示）

a）使用单SQL组件在短信表查询对应短信记录，具体SQL内容如下，需传入接口参数。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-11.png)

##### 图5-11 查询对应短信记录

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-12.png)

##### 图5-12 填写数据

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-13.png)

##### 图5-13 SQL内容

##### 注意：若对于如何新增SQL语句不清晰，可参见[《SoFlu社区版快速入门教程第4.6节：如何新增SQL信息》](https://gitee.com/feisuanyz/SoFlu-adp/blob/master/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%85%A8%E8%87%AA%E5%8A%A8%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%E6%95%99%E7%A8%8B/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/SoFlu%E7%A4%BE%E5%8C%BA%E7%89%88%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B.md#46-%E5%A6%82%E4%BD%95%E6%96%B0%E5%A2%9Esql%E4%BF%A1%E6%81%AF)

b）使用互斥条件组件判断短信表中是否有对应短信记录，若没有对应短信记录，则输出验证失败结果；若存在对应短信记录，则继续以下流程。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-14.png)

##### 图5-14 判断逻辑

短信表中没有对应短信记录的流转条件：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-15.png)

##### 图5-15 流转条件1

输出验证失败结果：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-16.png)

##### 图5-16 输出验证失败结果

短信表中存在对应短信记录的流转条件：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-17.png)

##### 图5-17 流转条件2

c）使用单函数组件调用函数newMapInit(Object[] keyAndValue)构建查询参数【paramId】，用于后续查询验证码有效时长的值。

##### 说明：函数newMapInit(Object[] keyAndValue)用于新建Map，需传入参数paramId及对应的参数值verificationCodeDuration，该参数值在参数表中表示验证码有效时长。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-18.png)

##### 图5-18 构建查询函数

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-19.png)

##### 图5-19 填写数据

d）使用单SQL组件根据【paramId】的值查询参数表，具体SQL内容如下，需传入上一步【paramId】的参数值verificationCodeDuration，用于获取参数表中验证码有效时长的参数记录。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-20.png)

##### 图5-20 构建参数表

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-21.png)

##### 图5-21 填写数据

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-22.png)

##### 图5-22 SQL内容

e）使用单函数组件调用函数addMinute(Date sourceDate,int addValue)获取超时时间，即【当前短信记录的创建时间】累加【验证码有效时长】后的时间。

##### 说明：函数addMinute(Date sourceDate,int addValue)用于对日期值进行累加，第一个需传入的参数为日期值，即第1步中查询到的对应短信记录的创建时间createTime；第二个需传入的参数为增加日期值，即第4步中获取到的验证码有效时长参数记录的paramValue，由于需传入整型参数，而参数表中param_value的数据类型为字符型，故此处需使用函数strToInt(String)对paramValue进行类型转换。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-23.png)

##### 图5-23 获取超时时间

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-24.png)

##### 图5-24 填写数据

f）使用单函数组件调用函数secondsDiff(Date startDate,Date endDate)获取【当前系统时间】与【超时时间】的间隔时长。

##### 说明：函数secondsDiff(Date startDate,Date endDate)用于取2个日期相隔秒钟，需传入两个日期，第一个日期为开始日期，即上一步获取到的超时时间；第二个日期为结束日期，即当前系统时间。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-25.png)

##### 图5-25 获取间隔时长

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-26.png)

##### 图5-26 填写数据

g）使用互斥条件组件根据间隔时长判断验证码是否失效，若间隔时长大于0，说明验证码已超时，输出验证码失效结果；若间隔时长小于等于0，说明验证码未超时，输出验证成功结果。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-27.png)

##### 图5-27 判断验证码是否失效

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-28.png)

##### 图5-28 流转条件1

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-29.png)

##### 图5-29 填写数据1

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-30.png)

##### 图5-30 流转条件2

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-31.png)

##### 图5-31 填写数据2

##### 5.1.5 退出窗体视图

流程图设计完成后，保存并退出窗体视图。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-32.png)

##### 图5-32 保存并退出

##### 5.1.6 提交并发布接口

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-33.png)

##### 图5-33 提交并发布接口

##### 5.1.7 测试用例

a）对接口进行测试用例，检验接口实现的功能是否可以达到预期。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-34.png)

##### 图5-34 使用测试用例

b）填写接收到的验证码及对应的手机号，并启用可视化日志（便于查看接口流程中的数据流转），再单击执行即可。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-35.png)

##### 图5-35 启用可视化日志

c）通过测试用例响应内容查看接口的执行结果。

验证成功：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-36.png)

##### 图5-36 验证成功

验证码失效：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-37.png)

##### 图5-37 验证码失效

验证失败：

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-38.png)

##### 图5-38 验证失败

d）若测试用例的结果出现错误，可通过可视化日志双击查看各个组件的节点数据进行接口的调试。

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-39.png)

##### 图5-39 查看可视化日志

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-40.png)

##### 图5-40 可视化日志

![输入图片说明](../../../images/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0/SoFlu%EF%BC%88%E5%90%8E%E7%AB%AF%EF%BC%89%E6%A1%88%E4%BE%8B%E5%9C%BA%E6%99%AF/3.%20%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/5.%20%E9%AA%8C%E8%AF%81%E7%9F%AD%E4%BF%A1%E9%AA%8C%E8%AF%81%E7%A0%81/5-41.png)

##### 图5-41 查询节点数据
