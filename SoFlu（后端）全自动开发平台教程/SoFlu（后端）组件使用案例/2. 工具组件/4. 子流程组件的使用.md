### 2. 工具组件

#### 2.4 子流程组件的使用

##### 2.4.1 子流程组件

系统提供该功能，您可以在系统中利用子流程组件进行可视化开发。

##### 2.4.2 前提条件

a）您需要拥有“流程编辑器”功能的权限。

b）您需要在子流程管理模块建有所需的子流程。

c）权限由系统管理员在“用户权限中心”系统中配置。

##### 2.4.3 操作步骤

a）在窗体视图左侧的“组件列表”中“工具”栏目下，找到子流程组件，拖拽至绘图面板，如图4-1所示：

![image](https://user-images.githubusercontent.com/79617492/180146510-ba14025b-e657-41e2-9db0-29304353c206.png)

##### 图4-1 找到子流程组件

b）拖拽所需的其他组件至绘图面板，连接好组件的流程图，如图4-2所示：

![image](https://user-images.githubusercontent.com/79617492/180146551-d1dcce96-bb6e-43a5-adcf-ad3e2a0d0549.png)

##### 图4-2 连接组件流程图

##### 说明：此处我们选择了一个单SQL组件和一个输出结果组件作为样例，用于列表查询数据库中的记录。

c）选中子流程组件，根据项目需求填写子流程组件的名称和描述，如图4-3所示：

![image](https://user-images.githubusercontent.com/79617492/180146578-5cc89b0b-d4fb-4044-a86f-41ab5a4efe11.png)

##### 图4-3 填写子流程组件的基本信息

d）单击”子流程名称“处的选择记录方框，选择已建好的子流程，如图4-4、4-5所示：

![image](https://user-images.githubusercontent.com/79617492/180146618-8bac33b5-e4f0-4902-87bd-3953e06d58bf.png)

##### 图4-4 选择子流程名称

![image](https://user-images.githubusercontent.com/79617492/180146650-93a6e0ee-7503-4856-9a2a-59a7d82d4072.png)

##### 图4-5 示例

##### 说明：此处我们选择了往数据库插入一条记录的子流程。

e）单击“入参映射”的未选中记录方框，配置子流程的入口参数值，如图4-6、4-7所示：

![image](https://user-images.githubusercontent.com/79617492/180146680-493a39df-8216-45ae-89f7-5829bd3a7913.png)

##### 图4-6 配置入口参数值

![image](https://user-images.githubusercontent.com/79617492/180146699-60da77e3-4b06-4fcd-863f-fdc680ad2372.png)

##### 图4-7 示例

##### 说明：若您建的子流程未设置入口参数，也可以不用配置入口参数值。

f）若您需要将选择的子流程异步执行，也可以打开异步执行的按钮，同时配置线程池资源，如图4-8所示：

![image](https://user-images.githubusercontent.com/79617492/180146739-64f01d75-d28e-470d-b819-11cdc366fa37.png)

##### 图4-8 异步执行或配置线程池资源

##### 说明：将子流程组件设置为异步执行后，子流程和主流程依然都会执行，只是主流程不需要等待子流程的执行结果后再执行。

g）配置单SQL组件。

##### 说明：除子流程组件外，您可以根据项目需求自行选择组件自行配置，此处我们仅用单SQL组件作为示例，并设置了列表查询的SQL信息，如图4-9所示：

![image](https://user-images.githubusercontent.com/79617492/180146773-724ce8f9-b19b-4f19-b3b1-cdd699494433.png)

##### 图4-9 示例

h）配置输出结果组件。

##### 注意：若输出结果需要引用某组件的执行结果，则需要在参数选择页面，选择相应的页签同时选择相应的执行结果，如图4-10所示：

![image](https://user-images.githubusercontent.com/79617492/180146796-4190fc0a-1227-48b8-a01d-e657c8f0b93f.png)

##### 图4-10 示例

i）流程图编辑完成后，单击“保存并退出”。

j）最后提交并发布该接口即可。
